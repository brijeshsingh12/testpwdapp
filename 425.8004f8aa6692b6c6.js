"use strict";(self.webpackChunkInventoryAPPN=self.webpackChunkInventoryAPPN||[]).push([[425],{7425:(ge,G,l)=>{l.r(G),l.d(G,{PurchaseModule:()=>ye});var f=l(5743),e=l(7705),i=l(9417),b=l(5416),C=l(3574),p=l(177),_=l(6600),h=l(8834),I=l(9213),v=l(9631),c=l(6467),R=l(2798),k=l(5911),d=l(5084);function D(t,n){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Select Request Date"),e.k0s())}function j(t,n){if(1&t&&(e.j41(0,"mat-option",18),e.EFF(1),e.k0s()),2&t){const r=n.$implicit;e.Y8G("value",r.id),e.R7$(1),e.JRh(r.unitName)}}function S(t,n){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Select Unit"),e.k0s())}function P(t,n){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Enter Remark"),e.k0s())}function O(t,n){if(1&t&&(e.j41(0,"mat-option",18),e.EFF(1),e.k0s()),2&t){const r=n.$implicit;e.Y8G("value",r.id),e.R7$(1),e.JRh(r.materialName)}}function $(t,n){if(1&t){const r=e.RV6();e.j41(0,"button",24),e.bIt("click",function(){e.eBV(r);const o=e.XpG().index,s=e.XpG();return e.Njj(s.removeItem(o))}),e.j41(1,"mat-icon"),e.EFF(2,"delete"),e.k0s()()}}function T(t,n){if(1&t&&(e.j41(0,"div",4)(1,"div",19)(2,"mat-form-field")(3,"mat-label"),e.EFF(4,"Material Name"),e.k0s(),e.j41(5,"mat-select",20),e.DNE(6,O,2,2,"mat-option",11),e.k0s(),e.j41(7,"mat-error",21),e.EFF(8," Material Name is required "),e.k0s()(),e.nrm(9,"div",2),e.j41(10,"mat-form-field")(11,"mat-label"),e.EFF(12,"Quantity"),e.k0s(),e.nrm(13,"input",22),e.j41(14,"mat-error",21),e.EFF(15," Enter Quantity "),e.k0s()(),e.nrm(16,"div",2),e.DNE(17,$,3,0,"button",23),e.k0s(),e.nrm(18,"div",2),e.k0s()),2&t){const r=n.index,a=e.XpG();e.R7$(1),e.Y8G("formGroupName",r),e.R7$(5),e.Y8G("ngForOf",a.materials),e.R7$(1),e.Y8G("hidden",a.f.itemDtl.controls[r].controls.materialId.valid),e.R7$(7),e.Y8G("hidden",a.f.itemDtl.controls[r].controls.orderQty.valid),e.R7$(3),e.Y8G("ngIf",a.f.itemDtl.controls.length>1)}}let E=(()=>{class t{constructor(r,a){this.formBuilder=r,this.service=a,this._snackBar=(0,e.WQX)(b.UG)}ngOnInit(){this.createForm(),this.GetAutoRequestCode(),this.GetUnits(),this.GetMaterials()}GetMaterials(){this.service.GetMaterials().subscribe(r=>{this.materials=r})}GetAutoRequestCode(){this.service.GetAutoRequestNo().subscribe(r=>{this.formGroup.controls.requestNo.setValue(r)})}GetUnits(){this.service.GetUnits().subscribe(r=>{this.units=r})}createForm(){this.formGroup=this.formBuilder.group({requestNo:[null,i.k0.required],requestDate:[null,i.k0.required],unitId:[null,i.k0.required],remark:[null,i.k0.required],itemDtl:this.formBuilder.array([this.initItem()])})}initItem(){return this.formBuilder.group({materialId:["",i.k0.required],orderQty:["",i.k0.required]})}addItem(){this.formGroup.controls.itemDtl.push(this.initItem())}removeItem(r){this.formGroup.controls.itemDtl.removeAt(r)}get f(){return this.formGroup.controls}onSubmit(){this.service.SaveMaterialRequest(this.formGroup.value).subscribe(r=>{this._snackBar.open("Material Request saved.","Success"),this.formGroup.reset(),this.formGroup.controls.purchaseOrderItems.clear()})}static{this.\u0275fac=function(a){return new(a||t)(e.rXU(i.ok),e.rXU(C.b))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-purchase-order"]],decls:46,vars:9,consts:[["novalidate","",1,"container"],[1,"fill-remaining-space"],[2,"padding-top","10px"],[3,"formGroup","ngSubmit"],[1,"example-container"],["matInput","","maxlength","10","formControlName","requestNo"],["matIconSuffix","",3,"for"],["matInput","","formControlName","requestDate",3,"matDatepicker"],["picker2",""],[4,"ngIf"],["formControlName","unitId"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","remark",2,"width","600px","height","100px"],["formArrayName","itemDtl",1,"example-container"],[1,"example-button-row"],["mat-stroked-button","","type","button",3,"click"],["class","example-container",4,"ngFor","ngForOf"],["mat-stroked-button","","type","button",3,"disabled","click"],[3,"value"],[3,"formGroupName"],["formControlName","materialId"],[3,"hidden"],["matInput","","type","text","formControlName","orderQty"],["mat-mini-fab","","aria-label","Delete",3,"click",4,"ngIf"],["mat-mini-fab","","aria-label","Delete",3,"click"]],template:function(a,o){if(1&a&&(e.j41(0,"div",0)(1,"mat-toolbar")(2,"span",1),e.EFF(3,"Material Request"),e.k0s()(),e.nrm(4,"div",2),e.j41(5,"form",3),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(6,"div",4)(7,"mat-form-field")(8,"mat-label"),e.EFF(9,"Request No"),e.k0s(),e.nrm(10,"input",5),e.k0s(),e.nrm(11,"div",2),e.j41(12,"mat-form-field")(13,"mat-label"),e.EFF(14,"Request Date"),e.k0s(),e.nrm(15,"mat-datepicker-toggle",6)(16,"input",7)(17,"mat-datepicker",null,8),e.DNE(19,D,2,0,"mat-error",9),e.k0s(),e.nrm(20,"div",2),e.j41(21,"mat-form-field")(22,"mat-label"),e.EFF(23,"Select Unit"),e.k0s(),e.j41(24,"mat-select",10),e.DNE(25,j,2,2,"mat-option",11),e.k0s(),e.DNE(26,S,2,0,"mat-error",9),e.k0s(),e.nrm(27,"div",2),e.j41(28,"mat-form-field")(29,"mat-label"),e.EFF(30,"Remark"),e.k0s(),e.nrm(31,"textarea",12),e.DNE(32,P,2,0,"mat-error",9),e.k0s()(),e.j41(33,"div",13)(34,"mat-toolbar")(35,"span",1),e.EFF(36,"Enter Material Details:"),e.k0s()(),e.j41(37,"div",14)(38,"button",15),e.bIt("click",function(){return o.addItem()}),e.EFF(39,"Add New Material"),e.k0s()(),e.nrm(40,"div",2),e.DNE(41,T,19,5,"div",16),e.k0s(),e.nrm(42,"div",2),e.j41(43,"div",14)(44,"button",17),e.bIt("click",function(){return o.onSubmit()}),e.EFF(45,"Submit"),e.k0s()()()()),2&a){const s=e.sdS(18);e.R7$(5),e.Y8G("formGroup",o.formGroup),e.R7$(10),e.Y8G("for",s),e.R7$(1),e.Y8G("matDatepicker",s),e.R7$(3),e.Y8G("ngIf",null==o.formGroup.controls.requestDate.errors?null:o.formGroup.controls.requestDate.errors.required),e.R7$(6),e.Y8G("ngForOf",o.units),e.R7$(1),e.Y8G("ngIf",null==o.formGroup.controls.unitId.errors?null:o.formGroup.controls.unitId.errors.required),e.R7$(6),e.Y8G("ngIf",null==o.formGroup.controls.remark.errors?null:o.formGroup.controls.remark.errors.required),e.R7$(9),e.Y8G("ngForOf",o.f.itemDtl.controls),e.R7$(3),e.Y8G("disabled",!o.formGroup.valid)}},dependencies:[p.Sq,p.bT,_.wT,h.$z,h.$0,I.An,v.fg,c.rl,c.nJ,c.TL,c.yw,R.VO,k.KQ,d.Vh,d.bZ,d.bU,i.qT,i.me,i.BC,i.cb,i.tU,i.j4,i.JD,i.$R,i.v8],styles:[".example-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] + mat-form-field[_ngcontent-%COMP%]{margin-left:8px}"]})}}return t})();var y=l(6695),N=l(2042),u=l(9159),g=l(1322),x=l(1802),B=l(5351),q=l(2232),Y=l(4823);function M(t,n){1&t&&(e.j41(0,"mat-header-cell",22),e.EFF(1,"PO Number"),e.k0s())}function Q(t,n){if(1&t&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&t){const r=n.$implicit;e.R7$(1),e.SpI(" ",r.billNo," ")}}function U(t,n){1&t&&(e.j41(0,"mat-header-cell",22),e.EFF(1,"PO Date"),e.k0s())}function L(t,n){if(1&t&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&t){const r=n.$implicit;e.R7$(1),e.SpI(" ",r.poDate," ")}}function X(t,n){1&t&&(e.j41(0,"mat-header-cell",22),e.EFF(1,"Supplier Name"),e.k0s())}function V(t,n){if(1&t&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&t){const r=n.$implicit;e.R7$(1),e.SpI(" ",r.supplierName," ")}}function w(t,n){1&t&&(e.j41(0,"mat-header-cell",22),e.EFF(1,"Delivery Date"),e.k0s())}function A(t,n){if(1&t&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&t){const r=n.$implicit;e.R7$(1),e.SpI(" ",r.deliveryDate," ")}}function z(t,n){1&t&&(e.j41(0,"mat-header-cell",22),e.EFF(1,"delivery Address"),e.k0s())}function J(t,n){if(1&t&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&t){const r=n.$implicit;e.R7$(1),e.SpI(" ",r.deliveryTo," ")}}function K(t,n){1&t&&(e.j41(0,"mat-header-cell",22),e.EFF(1,"Remark"),e.k0s())}function Z(t,n){if(1&t&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&t){const r=n.$implicit;e.R7$(1),e.SpI(" ",r.remark," ")}}function H(t,n){1&t&&(e.j41(0,"th",23),e.EFF(1," Edit "),e.k0s())}function W(t,n){if(1&t){const r=e.RV6();e.j41(0,"td",24)(1,"button",25),e.bIt("click",function(){const s=e.eBV(r).$implicit,m=e.XpG();return e.Njj(m.Edit(s.billNo))}),e.EFF(2,"Edit"),e.k0s()()}}function ee(t,n){1&t&&(e.j41(0,"th",23),e.EFF(1," Remove "),e.k0s())}function te(t,n){if(1&t){const r=e.RV6();e.j41(0,"td",24)(1,"button",26),e.bIt("click",function(){const s=e.eBV(r).$implicit,m=e.XpG();return e.Njj(m.RemovePurchaseOrder(s.billNo))}),e.EFF(2,"Remove"),e.k0s()()}}function re(t,n){1&t&&e.nrm(0,"mat-header-row")}function oe(t,n){1&t&&e.nrm(0,"mat-row")}const ae=function(){return[5,10,25,100]};function ie(t,n){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Enter Request No"),e.k0s())}function se(t,n){if(1&t&&(e.j41(0,"mat-option",14),e.EFF(1),e.k0s()),2&t){const r=n.$implicit;e.Y8G("value",r.id),e.R7$(1),e.JRh(r.name)}}function le(t,n){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Select Receiver"),e.k0s())}function me(t,n){if(1&t&&(e.j41(0,"mat-option",14),e.EFF(1),e.k0s()),2&t){const r=n.$implicit;e.Y8G("value",r.id),e.R7$(1),e.JRh(r.name)}}function ce(t,n){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Select Shipper"),e.k0s())}function ue(t,n){if(1&t&&(e.j41(0,"mat-option",23),e.EFF(1),e.k0s()),2&t){const r=n.$implicit;e.Y8G("value",r.id),e.R7$(1),e.JRh(r.materialName)}}function pe(t,n){if(1&t&&(e.j41(0,"div",4)(1,"div",15)(2,"mat-form-field")(3,"mat-label"),e.EFF(4,"Material Name"),e.k0s(),e.j41(5,"mat-select",16),e.DNE(6,ue,2,2,"mat-option",17),e.k0s()(),e.nrm(7,"div",2),e.j41(8,"mat-form-field")(9,"mat-label"),e.EFF(10,"Order Qty"),e.k0s(),e.nrm(11,"input",18),e.k0s(),e.nrm(12,"div",2),e.j41(13,"mat-form-field")(14,"mat-label"),e.EFF(15,"Issue Qty"),e.k0s(),e.nrm(16,"input",19),e.k0s(),e.nrm(17,"div",2),e.j41(18,"mat-form-field")(19,"mat-label"),e.EFF(20,"Already Received Qty"),e.k0s(),e.nrm(21,"input",20),e.k0s(),e.nrm(22,"div",2),e.j41(23,"mat-form-field")(24,"mat-label"),e.EFF(25,"Receive Qty."),e.k0s(),e.nrm(26,"input",21),e.j41(27,"mat-error",22),e.EFF(28," Enter Receive Quantity "),e.k0s()()(),e.nrm(29,"div",2),e.k0s()),2&t){const r=n.index,a=e.XpG();e.R7$(1),e.Y8G("formGroupName",r),e.R7$(5),e.Y8G("ngForOf",a.materials),e.R7$(21),e.Y8G("hidden",a.f.itemDtl.controls[r].controls.receiveQty.valid)}}function fe(t,n){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Enter PO No"),e.k0s())}function he(t,n){if(1&t&&(e.j41(0,"mat-option",19),e.EFF(1),e.k0s()),2&t){const r=n.$implicit;e.Y8G("value",r.id.toString()),e.R7$(1),e.JRh(r.name)}}function ve(t,n){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Select Authorized By"),e.k0s())}function ke(t,n){if(1&t&&(e.j41(0,"mat-option",19),e.EFF(1),e.k0s()),2&t){const r=n.$implicit;e.Y8G("value",r.shipperCode),e.R7$(1),e.JRh(r.shipperName)}}function Fe(t,n){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Select Shipper"),e.k0s())}function be(t,n){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Enter Receipt No"),e.k0s())}function _e(t,n){1&t&&(e.j41(0,"mat-error"),e.EFF(1,"Select Authorize Date"),e.k0s())}function Re(t,n){if(1&t){const r=e.RV6();e.j41(0,"div",4)(1,"div",20)(2,"mat-form-field",21)(3,"mat-label"),e.EFF(4,"Item Code"),e.k0s(),e.nrm(5,"input",22),e.k0s(),e.j41(6,"mat-form-field",21)(7,"mat-label"),e.EFF(8,"Item Name"),e.k0s(),e.nrm(9,"input",23),e.k0s(),e.j41(10,"mat-form-field",21)(11,"mat-label"),e.EFF(12,"Order Qty."),e.k0s(),e.nrm(13,"input",24),e.k0s(),e.j41(14,"mat-form-field",21)(15,"mat-label"),e.EFF(16,"Received Qty"),e.k0s(),e.nrm(17,"input",25),e.k0s(),e.j41(18,"mat-form-field",21)(19,"mat-label"),e.EFF(20,"Already Returned Qty"),e.k0s(),e.nrm(21,"input",26),e.k0s(),e.j41(22,"mat-form-field",21)(23,"mat-label"),e.EFF(24,"Return Qty."),e.k0s(),e.j41(25,"input",27),e.bIt("change",function(o){const m=e.eBV(r).index,F=e.XpG();return e.Njj(F.setBalance(o.target,m))}),e.k0s(),e.j41(26,"mat-error",28),e.EFF(27," Enter Return Quantity "),e.k0s()(),e.j41(28,"mat-form-field",21)(29,"mat-label"),e.EFF(30,"Select Reason"),e.k0s(),e.j41(31,"mat-select",29)(32,"mat-option",30),e.EFF(33,"Fungas"),e.k0s(),e.j41(34,"mat-option",31),e.EFF(35,"Expiry"),e.k0s(),e.j41(36,"mat-option",32),e.EFF(37,"Break"),e.k0s()(),e.j41(38,"mat-error",28),e.EFF(39,"Select Reason"),e.k0s()()(),e.nrm(40,"div",2),e.k0s()}if(2&t){const r=n.index,a=e.XpG();e.R7$(1),e.Y8G("formGroupName",r),e.R7$(25),e.Y8G("hidden",a.f.purchaseOrderItems.controls[r].controls.qtyReturned.valid),e.R7$(12),e.Y8G("hidden",a.f.purchaseOrderItems.controls[r].controls.returnReason.valid)}}const Ne=[{path:"purchaseorder",component:E},{path:"poorderlist",component:(()=>{class t{constructor(r,a,o,s,m){this._purchaseService=r,this.excelService=a,this.dialog=o,this.snackBarService=s,this.router=m,this.POList=[],this.displayedColumns=["billNo","poDate","supplierName","deliveryDate","deliveryTo","remark","Edit","Remove"]}ngOnInit(){this.bindPurchaseOrders()}bindPurchaseOrders(){this._purchaseService.GetPOList().subscribe(r=>{null!=r&&(this.POList=r,this.dataSource=new u.I6(r),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)})}applyFilter(r){this.dataSource.filter=r.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}Edit(r){this.router.navigate(["/purchaseorder",r])}RemovePurchaseOrder(r){this._purchaseService.DeletePurchaseOrder(r).subscribe(a=>{a?(this.bindPurchaseOrders(),this.snackBarService.show("Purchase Order Deleted","success")):this.snackBarService.show("Error Throwing!","error")})}exportAsXLSX(){this.excelService.exportAsExcelFile(this.POList,"sample")}static{this.\u0275fac=function(a){return new(a||t)(e.rXU(g.z),e.rXU(x.J),e.rXU(B.bZ),e.rXU(q.v),e.rXU(f.Ix))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-po-list"]],viewQuery:function(a,o){if(1&a&&(e.GBs(y.iy,5),e.GBs(N.B4,5)),2&a){let s;e.mGM(s=e.lsd())&&(o.paginator=s.first),e.mGM(s=e.lsd())&&(o.sort=s.first)}},decls:38,vars:5,consts:[[1,"fill-remaining-space"],[2,"padding-top","10px"],[2,"float","left"],["matInput","","placeholder","Search",3,"keyup"],[1,"example-container","mat-elevation-z8"],["mat-stroked-button","","color","primary",3,"click"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","billNo"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","poDate"],["matColumnDef","supplierName"],["matColumnDef","deliveryDate"],["matColumnDef","deliveryTo"],["matColumnDef","remark"],["matColumnDef","Edit"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Remove"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions"],["mat-sort-header",""],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-raised-button","","color","warn","matTooltip","Edit",3,"click"],["mat-raised-button","","color","warn","matTooltip","Remove",3,"click"]],template:function(a,o){1&a&&(e.j41(0,"mat-toolbar")(1,"span",0),e.EFF(2,"Purchase Order List"),e.k0s()(),e.nrm(3,"div",1),e.j41(4,"mat-form-field",2)(5,"input",3),e.bIt("keyup",function(m){return o.applyFilter(m.target.value)}),e.k0s()(),e.j41(6,"div",4)(7,"button",5),e.bIt("click",function(){return o.exportAsXLSX()}),e.EFF(8,"Download Excel"),e.k0s(),e.nrm(9,"div",1),e.j41(10,"table",6),e.qex(11,7),e.DNE(12,M,2,0,"mat-header-cell",8),e.DNE(13,Q,2,1,"mat-cell",9),e.bVm(),e.qex(14,10),e.DNE(15,U,2,0,"mat-header-cell",8),e.DNE(16,L,2,1,"mat-cell",9),e.bVm(),e.qex(17,11),e.DNE(18,X,2,0,"mat-header-cell",8),e.DNE(19,V,2,1,"mat-cell",9),e.bVm(),e.qex(20,12),e.DNE(21,w,2,0,"mat-header-cell",8),e.DNE(22,A,2,1,"mat-cell",9),e.bVm(),e.qex(23,13),e.DNE(24,z,2,0,"mat-header-cell",8),e.DNE(25,J,2,1,"mat-cell",9),e.bVm(),e.qex(26,14),e.DNE(27,K,2,0,"mat-header-cell",8),e.DNE(28,Z,2,1,"mat-cell",9),e.bVm(),e.qex(29,15),e.DNE(30,H,2,0,"th",16),e.DNE(31,W,3,0,"td",17),e.bVm(),e.qex(32,18),e.DNE(33,ee,2,0,"th",16),e.DNE(34,te,3,0,"td",17),e.bVm(),e.DNE(35,re,1,0,"mat-header-row",19),e.DNE(36,oe,1,0,"mat-row",20),e.k0s(),e.nrm(37,"mat-paginator",21),e.k0s()),2&a&&(e.R7$(10),e.Y8G("dataSource",o.dataSource),e.R7$(25),e.Y8G("matHeaderRowDef",o.displayedColumns),e.R7$(1),e.Y8G("matRowDefColumns",o.displayedColumns),e.R7$(1),e.Y8G("pageSizeOptions",e.lJ4(4,ae)))},dependencies:[h.$z,v.fg,c.rl,y.iy,N.B4,N.aE,u.Zl,u.tL,u.ji,u.cC,u.YV,u.iL,u.KS,u.$R,u.YZ,u.NB,k.KQ,Y.oV]})}}return t})()},{path:"purchaseorder/:billno",component:E},{path:"materialreceiptnote",component:(()=>{class t{constructor(r,a,o){this.formBuilder=r,this.service=a,this.route=o,this._snackBar=(0,e.WQX)(b.UG),this.createForm(),this.GetUsers(),this.GetShippers(),this.GetMaterials()}createForm(){this.formGroup=this.formBuilder.group({requestNo:["",i.k0.required],receiverId:["",i.k0.required],shipperId:["",i.k0.required],itemDtl:this.formBuilder.array([this.initItem()])})}initItem(){return this.formBuilder.group({materialId:[""],materialName:[""],orderQty:[""],issuedQty:[""],alreadyReceivedQty:[""],receiveQty:["",i.k0.required]})}GetShippers(){this.service.GetUsers_Shipper("Shipper").subscribe(r=>{this.shippers=r})}GetUsers(){this.service.GetUsers_Shipper("User").subscribe(r=>{this.receivers=r})}GetMaterials(){this.service.GetMaterials().subscribe(r=>{this.materials=r})}show(){this.selectRequestNo=this.formGroup.controls.requestNo.value,this.selectRequestNo&&this.service.GetMaterialIssueData(this.selectRequestNo).subscribe(r=>{if(0==r.length)return void this.openSnackBar("Invalid RequestNo","Close");const a=r.map(s=>this.formBuilder.group({materialId:[{value:s.materialId,disabled:!0}],materialName:[{value:s.materialName,disabled:!0}],orderQty:[{value:s.orderQty,disabled:!0}],issuedQty:[{value:s.issuedQty,disabled:!0}],alreadyReceivedQty:[s.alreadyReceivedQty],receiveQty:[0]})),o=this.formBuilder.array(a);this.formGroup.setControl("itemDtl",o)})}onSubmit(){this.service.SaveMaterialReceive(this.formGroup.getRawValue()).subscribe(a=>{this.openSnackBar("Data Saved","Close")}),this.formGroup.reset(),this.formGroup.controls.itemDtl.clear()}get f(){return this.formGroup.controls}openSnackBar(r,a){this._snackBar.open(r,a)}static{this.\u0275fac=function(a){return new(a||t)(e.rXU(i.ok),e.rXU(C.b),e.rXU(f.nX))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-material-receipt-note"]],decls:39,vars:7,consts:[["novalidate","",1,"container"],[1,"fill-remaining-space"],[2,"padding-top","10px"],[3,"formGroup","ngSubmit"],[1,"example-container"],["matInput","","maxlength","10","formControlName","requestNo"],[4,"ngIf"],[1,"example-button-row"],["mat-stroked-button","","type","button",3,"click"],["formControlName","receiverId"],[3,"value",4,"ngFor","ngForOf"],["formControlName","shipperId"],["formArrayName","itemDtl",1,"example-container"],["class","example-container",4,"ngFor","ngForOf"],[3,"value"],[3,"formGroupName"],["formControlName","materialId","readonly","",2,"background-color","beige","color","black"],["readonly","",3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","readonly","","formControlName","orderQty",2,"background-color","beige","color","black"],["matInput","","type","text","readonly","","formControlName","issuedQty",2,"background-color","beige","color","black"],["matInput","","type","text","readonly","","formControlName","alreadyReceivedQty",2,"background-color","beige","color","black"],["matInput","","type","text","formControlName","receiveQty"],[3,"hidden"],["readonly","",3,"value"]],template:function(a,o){1&a&&(e.j41(0,"div",0)(1,"mat-toolbar")(2,"span",1),e.EFF(3,"Material Receive"),e.k0s()(),e.nrm(4,"div",2),e.j41(5,"form",3),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(6,"div",4)(7,"mat-form-field")(8,"mat-label"),e.EFF(9,"Request No"),e.k0s(),e.nrm(10,"input",5),e.DNE(11,ie,2,0,"mat-error",6),e.k0s(),e.j41(12,"div",7)(13,"button",8),e.bIt("click",function(){return o.show()}),e.EFF(14,"Show Data"),e.k0s()(),e.nrm(15,"div",2),e.j41(16,"mat-form-field")(17,"mat-label"),e.EFF(18,"Select Receiver"),e.k0s(),e.j41(19,"mat-select",9),e.DNE(20,se,2,2,"mat-option",10),e.k0s(),e.DNE(21,le,2,0,"mat-error",6),e.k0s(),e.nrm(22,"div",2),e.j41(23,"mat-form-field")(24,"mat-label"),e.EFF(25,"Select Shipper"),e.k0s(),e.j41(26,"mat-select",11),e.DNE(27,me,2,2,"mat-option",10),e.k0s(),e.DNE(28,ce,2,0,"mat-error",6),e.k0s(),e.nrm(29,"div",2),e.k0s(),e.j41(30,"div",12)(31,"mat-toolbar")(32,"span",1),e.EFF(33,"Enter Material Receive Detail"),e.k0s()(),e.nrm(34,"div",2),e.DNE(35,pe,30,3,"div",13),e.k0s(),e.nrm(36,"br"),e.j41(37,"button",8),e.bIt("click",function(){return o.onSubmit()}),e.EFF(38,"Submit"),e.k0s()()()),2&a&&(e.R7$(5),e.Y8G("formGroup",o.formGroup),e.R7$(6),e.Y8G("ngIf",null==o.formGroup.controls.requestNo.errors?null:o.formGroup.controls.requestNo.errors.required),e.R7$(9),e.Y8G("ngForOf",o.receivers),e.R7$(1),e.Y8G("ngIf",null==o.formGroup.controls.receiverId.errors?null:o.formGroup.controls.receiverId.errors.required),e.R7$(6),e.Y8G("ngForOf",o.shippers),e.R7$(1),e.Y8G("ngIf",null==o.formGroup.controls.shipperId.errors?null:o.formGroup.controls.shipperId.errors.required),e.R7$(7),e.Y8G("ngForOf",o.f.itemDtl.controls))},dependencies:[p.Sq,p.bT,_.wT,h.$z,v.fg,c.rl,c.nJ,c.TL,R.VO,k.KQ,i.qT,i.me,i.BC,i.cb,i.tU,i.j4,i.JD,i.$R,i.v8],styles:[".example-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] + mat-form-field[_ngcontent-%COMP%]{margin-left:8px}"]})}}return t})()},{path:"poreturn",component:(()=>{class t{constructor(r,a,o){this.formBuilder=r,this.service=a,this.route=o,this._snackBar=(0,e.WQX)(b.UG),this.createForm(),this.GetUsers(),this.GetShippers()}createForm(){this.formGroup=this.formBuilder.group({billNo:["",i.k0.required],authorizedBy:["",i.k0.required],shipperCode:["",i.k0.required],receiptNo:["",i.k0.required],authorizedDate:["",i.k0.required],remark:[""],purchaseOrderItems:this.formBuilder.array([this.initItem()])})}openSnackBar(r,a){this._snackBar.open(r,a)}initItem(){return this.formBuilder.group({itemcode:[""],itemName:[""],quantity:[""],alreadyReceived:[""],alreadyReturned:[""],returnReason:[""],qtyReturned:["",i.k0.required]})}GetShippers(){this.service.GetShippers().subscribe(r=>{this.shippers=r})}GetUsers(){this.service.GetUsers().subscribe(r=>{this.receivers=r})}bindPOForID(r){r&&this.service.GetPOReturnByBillNo(r).subscribe(a=>{if(0==a.length)return void this.openSnackBar("Invalid PO No","Close");const o=a.map(m=>this.formBuilder.group({itemcode:[m.itemcode,i.k0.required],itemName:[m.itemName],quantity:[m.quantity],alreadyReceived:[m.alreadyReceived],alreadyReturned:[m.alreadyReturned],returnReason:[m.returnReason],qtyReturned:[0]})),s=this.formBuilder.array(o);this.formGroup.setControl("purchaseOrderItems",s)})}onSubmit(){console.log(JSON.stringify(this.formGroup.value)),this.service.UpdateProductReturn(this.formGroup.value).subscribe(r=>{this.formGroup.reset(),this.formGroup.controls.purchaseOrderItems.clear(),this.openSnackBar("Product Returned","Close")})}onShow(){let r=this.formGroup.controls.billNo.value;""!=r?this.bindPOForID(r):this.openSnackBar("Please Enter Purchase Order No","Close")}get f(){return this.formGroup.controls}setBalance(r,a){const o=this.formGroup.controls.purchaseOrderItems;var s=o.at(a).get("alreadyReturned").value,m=o.at(a).get("alreadyReceived").value;let F=Number(m)-Number(s);return Number(r.value)>0&&Number(r.value)>Number(F)&&(this.openSnackBar("Return Qty cannot greater then "+F,"Close"),o.at(a).get("qtyReturned").setValue(0)),!1}static{this.\u0275fac=function(a){return new(a||t)(e.rXU(i.ok),e.rXU(g.z),e.rXU(f.nX))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-purchase-return"]],decls:57,vars:11,consts:[["novalidate","",1,"container"],[1,"fill-remaining-space"],[2,"padding-top","10px"],[3,"formGroup","ngSubmit"],[1,"example-container"],["matInput","","maxlength","10","formControlName","billNo","placeholder","Purchase Order"],[4,"ngIf"],["mat-stroked-button","","type","button",2,"margin-left","20px",3,"click"],["formControlName","authorizedBy"],[3,"value",4,"ngFor","ngForOf"],["formControlName","shipperCode"],["matInput","","maxlength","10","formControlName","receiptNo"],["matIconSuffix","",3,"for"],["matInput","","formControlName","authorizedDate",3,"matDatepicker"],["picker",""],["matInput","","formControlName","remark"],["formArrayName","purchaseOrderItems",1,"example-container"],["class","example-container",4,"ngFor","ngForOf"],["mat-stroked-button","","type","button",3,"click"],[3,"value"],[3,"formGroupName"],[2,"width","140px"],["matInput","","type","text","readonly","","formControlName","itemcode"],["matInput","","type","text","readonly","","formControlName","itemName"],["matInput","","type","text","readonly","","formControlName","quantity",2,"width","80px"],["matInput","","type","text","readonly","","formControlName","alreadyReceived",2,"width","80px"],["matInput","","type","text","readonly","","formControlName","alreadyReturned",2,"width","80px"],["matInput","","type","text","formControlName","qtyReturned",2,"width","80px",3,"change"],[3,"hidden"],["formControlName","returnReason"],["value","Fungas"],["value","Expiry"],["value","Break"]],template:function(a,o){if(1&a&&(e.j41(0,"div",0)(1,"mat-toolbar")(2,"span",1),e.EFF(3,"Purchase Order Return"),e.k0s()(),e.nrm(4,"div",2),e.j41(5,"form",3),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(6,"div",4)(7,"mat-form-field")(8,"mat-label"),e.EFF(9,"Purchase OrderNo"),e.k0s(),e.nrm(10,"input",5),e.DNE(11,fe,2,0,"mat-error",6),e.k0s(),e.j41(12,"button",7),e.bIt("click",function(){return o.onShow()}),e.EFF(13,"Show"),e.k0s()(),e.nrm(14,"div",2),e.j41(15,"div",4)(16,"mat-form-field")(17,"mat-label"),e.EFF(18,"Select Authorized By"),e.k0s(),e.j41(19,"mat-select",8),e.DNE(20,he,2,2,"mat-option",9),e.k0s(),e.DNE(21,ve,2,0,"mat-error",6),e.k0s(),e.j41(22,"mat-form-field")(23,"mat-label"),e.EFF(24,"Select Shipper"),e.k0s(),e.j41(25,"mat-select",10),e.DNE(26,ke,2,2,"mat-option",9),e.k0s(),e.DNE(27,Fe,2,0,"mat-error",6),e.k0s(),e.j41(28,"mat-form-field")(29,"mat-label"),e.EFF(30,"Enter Receipt No"),e.k0s(),e.nrm(31,"input",11),e.DNE(32,be,2,0,"mat-error",6),e.k0s(),e.j41(33,"mat-form-field")(34,"mat-label"),e.EFF(35,"Authorized Date"),e.k0s(),e.nrm(36,"mat-datepicker-toggle",12)(37,"input",13)(38,"mat-datepicker",null,14),e.DNE(40,_e,2,0,"mat-error",6),e.k0s()(),e.nrm(41,"div",2),e.j41(42,"div",4)(43,"mat-form-field")(44,"mat-label"),e.EFF(45,"Remark"),e.k0s(),e.nrm(46,"textarea",15),e.k0s()(),e.nrm(47,"div",2),e.j41(48,"div",16)(49,"mat-toolbar")(50,"span",1),e.EFF(51,"Enter Item Return Detail"),e.k0s()(),e.nrm(52,"div",2),e.DNE(53,Re,41,3,"div",17),e.k0s(),e.nrm(54,"br"),e.j41(55,"button",18),e.bIt("click",function(){return o.onSubmit()}),e.EFF(56,"Submit"),e.k0s()()()),2&a){const s=e.sdS(39);e.R7$(5),e.Y8G("formGroup",o.formGroup),e.R7$(6),e.Y8G("ngIf",null==o.formGroup.controls.billNo.errors?null:o.formGroup.controls.billNo.errors.required),e.R7$(9),e.Y8G("ngForOf",o.receivers),e.R7$(1),e.Y8G("ngIf",null==o.formGroup.controls.authorizedBy.errors?null:o.formGroup.controls.authorizedBy.errors.required),e.R7$(5),e.Y8G("ngForOf",o.shippers),e.R7$(1),e.Y8G("ngIf",null==o.formGroup.controls.shipperCode.errors?null:o.formGroup.controls.shipperCode.errors.required),e.R7$(5),e.Y8G("ngIf",null==o.formGroup.controls.receiptNo.errors?null:o.formGroup.controls.receiptNo.errors.required),e.R7$(4),e.Y8G("for",s),e.R7$(1),e.Y8G("matDatepicker",s),e.R7$(3),e.Y8G("ngIf",null==o.formGroup.controls.authorizedDate.errors?null:o.formGroup.controls.authorizedDate.errors.required),e.R7$(13),e.Y8G("ngForOf",o.f.purchaseOrderItems.controls)}},dependencies:[p.Sq,p.bT,_.wT,h.$z,v.fg,c.rl,c.nJ,c.TL,c.yw,R.VO,k.KQ,d.Vh,d.bZ,d.bU,i.qT,i.me,i.BC,i.cb,i.tU,i.j4,i.JD,i.$R,i.v8],styles:[".example-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] + mat-form-field[_ngcontent-%COMP%]{margin-left:8px}"]})}}return t})()}];let Ge=(()=>{class t{static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[f.iI.forChild(Ne),f.iI]})}}return t})();var Ce=l(5567),Ee=l(1626);let ye=(()=>{class t{static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[p.MD,Ge,Ce.G,i.X1,i.YN,Ee.q1]})}}return t})()}}]);