"use strict";(self.webpackChunkInventoryAPPN=self.webpackChunkInventoryAPPN||[]).push([[425],{7425:(Re,N,l)=>{l.r(N),l.d(N,{PurchaseModule:()=>_e});var f=l(5743),e=l(7705),n=l(9417),_=l(5416),k=l(1322),d=l(177),R=l(6600),v=l(8834),E=l(9213),F=l(9631),u=l(6467),C=l(2798),b=l(5911),h=l(5084);function I(r,s){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Select Request Date"),e.k0s())}function j(r,s){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Select Supplier"),e.k0s())}function P(r,s){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Enter Remark"),e.k0s())}function S(r,s){if(1&r){const t=e.RV6();e.j41(0,"button",23),e.bIt("click",function(){e.eBV(t);const o=e.XpG().index,i=e.XpG();return e.Njj(i.removeItem(o))}),e.j41(1,"mat-icon"),e.EFF(2,"delete"),e.k0s()()}}function O(r,s){if(1&r){const t=e.RV6();e.j41(0,"div",4)(1,"div",18)(2,"mat-form-field")(3,"mat-label"),e.EFF(4,"Material Name"),e.k0s(),e.j41(5,"mat-select",19),e.bIt("selectionChange",function(o){const m=e.eBV(t).index,c=e.XpG();return e.Njj(c.onItemChange(o.value,m))}),e.j41(6,"mat-option",11),e.EFF(7,"Material 1"),e.k0s(),e.j41(8,"mat-option",11),e.EFF(9,"Material 2"),e.k0s()(),e.j41(10,"mat-error",20),e.EFF(11," Material Name is required "),e.k0s()(),e.nrm(12,"div",2),e.j41(13,"mat-form-field")(14,"mat-label"),e.EFF(15,"Quantity"),e.k0s(),e.j41(16,"input",21),e.bIt("change",function(o){const m=e.eBV(t).index,c=e.XpG();return e.Njj(c.setAmount(o.target,m))}),e.k0s(),e.j41(17,"mat-error",20),e.EFF(18," Enter Quantity "),e.k0s()(),e.nrm(19,"div",2),e.DNE(20,S,3,0,"button",22),e.k0s(),e.nrm(21,"div",2),e.k0s()}if(2&r){const t=s.index,a=e.XpG();e.R7$(1),e.Y8G("formGroupName",t),e.R7$(9),e.Y8G("hidden",a.f.purchaseOrderItems.controls[t].controls.itemcode.valid),e.R7$(7),e.Y8G("hidden",a.f.purchaseOrderItems.controls[t].controls.quantity.valid),e.R7$(3),e.Y8G("ngIf",a.f.purchaseOrderItems.controls.length>1)}}let G=(()=>{class r{constructor(t,a,o){this.formBuilder=t,this.service=a,this.route=o,this._snackBar=(0,e.WQX)(_.UG),this.post="",this.invoiceData={billNo:"PO1003",date:"2025-04-30",supplier:"1",remark:"Test Remark by Brijesh",deliveryDate:"2025-04-30",deliveryTo:"Sagarpur, New Delhi",purchaseOrderItems:[{itemcode:"Item100",quantity:10,unitPrice:100,amount:1e3},{itemcode:"Item101",quantity:20,unitPrice:200,amount:4e3},{itemcode:"Item102",quantity:50,unitPrice:10,amount:500}]}}ngOnInit(){this.createForm(),this.GetItems(),this.GetSuppliers(),this.bindPOForID()}bindPOForID(){let t=this.route.snapshot.paramMap.get("billno");t&&this.service.GetPOByBillNo(t).subscribe(a=>{this.formGroup.patchValue(a);const o=a.purchaseOrderItems.map(m=>this.formBuilder.group({itemcode:[m.itemcode,n.k0.required],quantity:[m.quantity],unitPrice:[m.unitPrice],amount:[m.amount]})),i=this.formBuilder.array(o);this.formGroup.setControl("purchaseOrderItems",i)})}GetSuppliers(){this.service.GetSuppliers().subscribe(t=>{console.log(t),this.suppliers=t})}GetItems(){this.service.GetItems().subscribe(t=>{this.items=t})}createForm(){this.formGroup=this.formBuilder.group({billNo:[null,n.k0.required],date:[null,n.k0.required],supplier:[null,n.k0.required],deliveryDate:[null,n.k0.required],remark:[null,n.k0.required],deliveryTo:[null,n.k0.required],purchaseOrderItems:this.formBuilder.array([this.initItem()])})}initItem(){return this.formBuilder.group({itemcode:["",n.k0.required],quantity:["",n.k0.required],unitPrice:["",n.k0.required],amount:["",n.k0.required]})}addItem(){this.formGroup.controls.purchaseOrderItems.push(this.initItem())}removeItem(t){this.formGroup.controls.purchaseOrderItems.removeAt(t)}get f(){return this.formGroup.controls}onSubmit(){console.log(this.formGroup.value),this.route.snapshot.paramMap.get("billno")?this.service.UpdatePurchaseOrder(this.formGroup.value).subscribe(o=>{this.openSnackBar("Data Updated","Close"),alert("")}):this.service.savePurchaseOrder(this.formGroup.value).subscribe(o=>{this.openSnackBar("Data Saved","Close")}),this.formGroup.reset(),this.formGroup.controls.purchaseOrderItems.clear()}onItemChange(t,a){let o=this.items.filter(m=>m.itemCode==t);this.formGroup.controls.purchaseOrderItems.at(a).get("unitPrice").setValue(o[0].price)}setAmount(t,a){const o=this.formGroup.controls.purchaseOrderItems;var i=o.at(a).get("unitPrice").value;const m=Number(t.value)*Number(i);o.at(a).get("amount").setValue(m)}downloadPdf(){this.service.generateInvoicePdf(this.invoiceData).subscribe(t=>{const a=window.URL.createObjectURL(t),o=document.createElement("a");o.href=a,o.download="invoice.pdf",o.click(),window.URL.revokeObjectURL(a)})}openSnackBar(t,a){this._snackBar.open(t,a)}static{this.\u0275fac=function(a){return new(a||r)(e.rXU(n.ok),e.rXU(k.z),e.rXU(f.nX))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-purchase-order"]],decls:49,vars:8,consts:[["novalidate","",1,"container"],[1,"fill-remaining-space"],[2,"padding-top","10px"],[3,"formGroup","ngSubmit"],[1,"example-container"],["matInput","","maxlength","10","formControlName","billNo"],["matIconSuffix","",3,"for"],["matInput","","formControlName","date",3,"matDatepicker"],["picker2",""],[4,"ngIf"],["formControlName","supplier"],["value","1"],["matInput","","formControlName","remark",2,"width","600px","height","100px"],["formArrayName","purchaseOrderItems",1,"example-container"],[1,"example-button-row"],["mat-stroked-button","","type","button",3,"click"],["class","example-container",4,"ngFor","ngForOf"],["mat-stroked-button","","type","button",3,"disabled","click"],[3,"formGroupName"],["formControlName","itemcode",3,"selectionChange"],[3,"hidden"],["matInput","","type","text","formControlName","quantity",3,"change"],["mat-mini-fab","","aria-label","Delete",3,"click",4,"ngIf"],["mat-mini-fab","","aria-label","Delete",3,"click"]],template:function(a,o){if(1&a&&(e.j41(0,"div",0)(1,"mat-toolbar")(2,"span",1),e.EFF(3,"Material Request Form"),e.k0s()(),e.nrm(4,"div",2),e.j41(5,"form",3),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(6,"div",4)(7,"mat-form-field")(8,"mat-label"),e.EFF(9,"Request No"),e.k0s(),e.nrm(10,"input",5),e.k0s(),e.nrm(11,"div",2),e.j41(12,"mat-form-field")(13,"mat-label"),e.EFF(14,"Request Date"),e.k0s(),e.nrm(15,"mat-datepicker-toggle",6)(16,"input",7)(17,"mat-datepicker",null,8),e.DNE(19,I,2,0,"mat-error",9),e.k0s(),e.nrm(20,"div",2),e.j41(21,"mat-form-field")(22,"mat-label"),e.EFF(23,"Select Machine"),e.k0s(),e.j41(24,"mat-select",10)(25,"mat-option",11),e.EFF(26,"Machine 1"),e.k0s(),e.j41(27,"mat-option",11),e.EFF(28,"Machine 2"),e.k0s()(),e.DNE(29,j,2,0,"mat-error",9),e.k0s(),e.nrm(30,"div",2),e.j41(31,"mat-form-field")(32,"mat-label"),e.EFF(33,"Remark"),e.k0s(),e.nrm(34,"textarea",12),e.DNE(35,P,2,0,"mat-error",9),e.k0s()(),e.j41(36,"div",13)(37,"mat-toolbar")(38,"span",1),e.EFF(39,"Enter Material Details:"),e.k0s()(),e.j41(40,"div",14)(41,"button",15),e.bIt("click",function(){return o.addItem()}),e.EFF(42,"Add New Material"),e.k0s()(),e.nrm(43,"div",2),e.DNE(44,O,22,4,"div",16),e.k0s(),e.nrm(45,"div",2),e.j41(46,"div",14)(47,"button",17),e.bIt("click",function(){return o.onSubmit()}),e.EFF(48,"Submit"),e.k0s()()()()),2&a){const i=e.sdS(18);e.R7$(5),e.Y8G("formGroup",o.formGroup),e.R7$(10),e.Y8G("for",i),e.R7$(1),e.Y8G("matDatepicker",i),e.R7$(3),e.Y8G("ngIf",null==o.formGroup.controls.date.errors?null:o.formGroup.controls.date.errors.required),e.R7$(10),e.Y8G("ngIf",null==o.formGroup.controls.supplier.errors?null:o.formGroup.controls.supplier.errors.required),e.R7$(6),e.Y8G("ngIf",null==o.formGroup.controls.remark.errors?null:o.formGroup.controls.remark.errors.required),e.R7$(9),e.Y8G("ngForOf",o.f.purchaseOrderItems.controls),e.R7$(3),e.Y8G("disabled",!o.formGroup.valid)}},dependencies:[d.Sq,d.bT,R.wT,v.$z,v.$0,E.An,F.fg,u.rl,u.nJ,u.TL,u.yw,C.VO,b.KQ,h.Vh,h.bZ,h.bU,n.qT,n.me,n.BC,n.cb,n.tU,n.j4,n.JD,n.$R,n.v8],styles:[".example-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] + mat-form-field[_ngcontent-%COMP%]{margin-left:8px}"]})}}return r})();var g=l(6695),y=l(2042),p=l(9159),D=l(1802),T=l(5351),x=l(2232),B=l(4823);function $(r,s){1&r&&(e.j41(0,"mat-header-cell",22),e.EFF(1,"PO Number"),e.k0s())}function q(r,s){if(1&r&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&r){const t=s.$implicit;e.R7$(1),e.SpI(" ",t.billNo," ")}}function M(r,s){1&r&&(e.j41(0,"mat-header-cell",22),e.EFF(1,"PO Date"),e.k0s())}function L(r,s){if(1&r&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&r){const t=s.$implicit;e.R7$(1),e.SpI(" ",t.poDate," ")}}function Y(r,s){1&r&&(e.j41(0,"mat-header-cell",22),e.EFF(1,"Supplier Name"),e.k0s())}function U(r,s){if(1&r&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&r){const t=s.$implicit;e.R7$(1),e.SpI(" ",t.supplierName," ")}}function V(r,s){1&r&&(e.j41(0,"mat-header-cell",22),e.EFF(1,"Delivery Date"),e.k0s())}function X(r,s){if(1&r&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&r){const t=s.$implicit;e.R7$(1),e.SpI(" ",t.deliveryDate," ")}}function w(r,s){1&r&&(e.j41(0,"mat-header-cell",22),e.EFF(1,"delivery Address"),e.k0s())}function Q(r,s){if(1&r&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&r){const t=s.$implicit;e.R7$(1),e.SpI(" ",t.deliveryTo," ")}}function z(r,s){1&r&&(e.j41(0,"mat-header-cell",22),e.EFF(1,"Remark"),e.k0s())}function A(r,s){if(1&r&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&r){const t=s.$implicit;e.R7$(1),e.SpI(" ",t.remark," ")}}function J(r,s){1&r&&(e.j41(0,"th",23),e.EFF(1," Edit "),e.k0s())}function K(r,s){if(1&r){const t=e.RV6();e.j41(0,"td",24)(1,"button",25),e.bIt("click",function(){const i=e.eBV(t).$implicit,m=e.XpG();return e.Njj(m.Edit(i.billNo))}),e.EFF(2,"Edit"),e.k0s()()}}function Z(r,s){1&r&&(e.j41(0,"th",23),e.EFF(1," Remove "),e.k0s())}function H(r,s){if(1&r){const t=e.RV6();e.j41(0,"td",24)(1,"button",26),e.bIt("click",function(){const i=e.eBV(t).$implicit,m=e.XpG();return e.Njj(m.RemovePurchaseOrder(i.billNo))}),e.EFF(2,"Remove"),e.k0s()()}}function W(r,s){1&r&&e.nrm(0,"mat-header-row")}function ee(r,s){1&r&&e.nrm(0,"mat-row")}const te=function(){return[5,10,25,100]};function oe(r,s){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Enter Request No"),e.k0s())}function ae(r,s){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Select Receiver"),e.k0s())}function ne(r,s){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Select Shipper"),e.k0s())}function ie(r,s){if(1&r){const t=e.RV6();e.j41(0,"div",4)(1,"div",15)(2,"mat-form-field")(3,"mat-label"),e.EFF(4,"Material Code"),e.k0s(),e.nrm(5,"input",16),e.k0s(),e.nrm(6,"div",2),e.j41(7,"mat-form-field")(8,"mat-label"),e.EFF(9,"Material Name"),e.k0s(),e.nrm(10,"input",17),e.k0s(),e.nrm(11,"div",2),e.j41(12,"mat-form-field")(13,"mat-label"),e.EFF(14,"Order Qty"),e.k0s(),e.nrm(15,"input",18),e.k0s(),e.nrm(16,"div",2),e.j41(17,"mat-form-field")(18,"mat-label"),e.EFF(19,"Already Received Qty"),e.k0s(),e.nrm(20,"input",19),e.k0s(),e.nrm(21,"div",2),e.j41(22,"mat-form-field")(23,"mat-label"),e.EFF(24,"Receive Qty."),e.k0s(),e.j41(25,"input",20),e.bIt("change",function(o){const m=e.eBV(t).index,c=e.XpG();return e.Njj(c.setBalance(o.target,m))}),e.k0s(),e.j41(26,"mat-error",21),e.EFF(27," Enter Receive Quantity "),e.k0s()()(),e.nrm(28,"div",2),e.k0s()}if(2&r){const t=s.index,a=e.XpG();e.R7$(1),e.Y8G("formGroupName",t),e.R7$(25),e.Y8G("hidden",a.f.purchaseOrderItems.controls[t].controls.qtyReceived.valid)}}function me(r,s){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Enter PO No"),e.k0s())}function le(r,s){if(1&r&&(e.j41(0,"mat-option",19),e.EFF(1),e.k0s()),2&r){const t=s.$implicit;e.Y8G("value",t.id.toString()),e.R7$(1),e.JRh(t.name)}}function ce(r,s){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Select Authorized By"),e.k0s())}function ue(r,s){if(1&r&&(e.j41(0,"mat-option",19),e.EFF(1),e.k0s()),2&r){const t=s.$implicit;e.Y8G("value",t.shipperCode),e.R7$(1),e.JRh(t.shipperName)}}function pe(r,s){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Select Shipper"),e.k0s())}function de(r,s){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Enter Receipt No"),e.k0s())}function fe(r,s){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Select Authorize Date"),e.k0s())}function he(r,s){if(1&r){const t=e.RV6();e.j41(0,"div",4)(1,"div",20)(2,"mat-form-field",21)(3,"mat-label"),e.EFF(4,"Item Code"),e.k0s(),e.nrm(5,"input",22),e.k0s(),e.j41(6,"mat-form-field",21)(7,"mat-label"),e.EFF(8,"Item Name"),e.k0s(),e.nrm(9,"input",23),e.k0s(),e.j41(10,"mat-form-field",21)(11,"mat-label"),e.EFF(12,"Order Qty."),e.k0s(),e.nrm(13,"input",24),e.k0s(),e.j41(14,"mat-form-field",21)(15,"mat-label"),e.EFF(16,"Received Qty"),e.k0s(),e.nrm(17,"input",25),e.k0s(),e.j41(18,"mat-form-field",21)(19,"mat-label"),e.EFF(20,"Already Returned Qty"),e.k0s(),e.nrm(21,"input",26),e.k0s(),e.j41(22,"mat-form-field",21)(23,"mat-label"),e.EFF(24,"Return Qty."),e.k0s(),e.j41(25,"input",27),e.bIt("change",function(o){const m=e.eBV(t).index,c=e.XpG();return e.Njj(c.setBalance(o.target,m))}),e.k0s(),e.j41(26,"mat-error",28),e.EFF(27," Enter Return Quantity "),e.k0s()(),e.j41(28,"mat-form-field",21)(29,"mat-label"),e.EFF(30,"Select Reason"),e.k0s(),e.j41(31,"mat-select",29)(32,"mat-option",30),e.EFF(33,"Fungas"),e.k0s(),e.j41(34,"mat-option",31),e.EFF(35,"Expiry"),e.k0s(),e.j41(36,"mat-option",32),e.EFF(37,"Break"),e.k0s()(),e.j41(38,"mat-error",28),e.EFF(39,"Select Reason"),e.k0s()()(),e.nrm(40,"div",2),e.k0s()}if(2&r){const t=s.index,a=e.XpG();e.R7$(1),e.Y8G("formGroupName",t),e.R7$(25),e.Y8G("hidden",a.f.purchaseOrderItems.controls[t].controls.qtyReturned.valid),e.R7$(12),e.Y8G("hidden",a.f.purchaseOrderItems.controls[t].controls.returnReason.valid)}}const ve=[{path:"purchaseorder",component:G},{path:"poorderlist",component:(()=>{class r{constructor(t,a,o,i,m){this._purchaseService=t,this.excelService=a,this.dialog=o,this.snackBarService=i,this.router=m,this.POList=[],this.displayedColumns=["billNo","poDate","supplierName","deliveryDate","deliveryTo","remark","Edit","Remove"]}ngOnInit(){this.bindPurchaseOrders()}bindPurchaseOrders(){this._purchaseService.GetPOList().subscribe(t=>{null!=t&&(this.POList=t,this.dataSource=new p.I6(t),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)})}applyFilter(t){this.dataSource.filter=t.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}Edit(t){this.router.navigate(["/purchaseorder",t])}RemovePurchaseOrder(t){this._purchaseService.DeletePurchaseOrder(t).subscribe(a=>{a?(this.bindPurchaseOrders(),this.snackBarService.show("Purchase Order Deleted","success")):this.snackBarService.show("Error Throwing!","error")})}exportAsXLSX(){this.excelService.exportAsExcelFile(this.POList,"sample")}static{this.\u0275fac=function(a){return new(a||r)(e.rXU(k.z),e.rXU(D.J),e.rXU(T.bZ),e.rXU(x.v),e.rXU(f.Ix))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-po-list"]],viewQuery:function(a,o){if(1&a&&(e.GBs(g.iy,5),e.GBs(y.B4,5)),2&a){let i;e.mGM(i=e.lsd())&&(o.paginator=i.first),e.mGM(i=e.lsd())&&(o.sort=i.first)}},decls:38,vars:5,consts:[[1,"fill-remaining-space"],[2,"padding-top","10px"],[2,"float","left"],["matInput","","placeholder","Search",3,"keyup"],[1,"example-container","mat-elevation-z8"],["mat-stroked-button","","color","primary",3,"click"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","billNo"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","poDate"],["matColumnDef","supplierName"],["matColumnDef","deliveryDate"],["matColumnDef","deliveryTo"],["matColumnDef","remark"],["matColumnDef","Edit"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Remove"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions"],["mat-sort-header",""],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-raised-button","","color","warn","matTooltip","Edit",3,"click"],["mat-raised-button","","color","warn","matTooltip","Remove",3,"click"]],template:function(a,o){1&a&&(e.j41(0,"mat-toolbar")(1,"span",0),e.EFF(2,"Purchase Order List"),e.k0s()(),e.nrm(3,"div",1),e.j41(4,"mat-form-field",2)(5,"input",3),e.bIt("keyup",function(m){return o.applyFilter(m.target.value)}),e.k0s()(),e.j41(6,"div",4)(7,"button",5),e.bIt("click",function(){return o.exportAsXLSX()}),e.EFF(8,"Download Excel"),e.k0s(),e.nrm(9,"div",1),e.j41(10,"table",6),e.qex(11,7),e.DNE(12,$,2,0,"mat-header-cell",8),e.DNE(13,q,2,1,"mat-cell",9),e.bVm(),e.qex(14,10),e.DNE(15,M,2,0,"mat-header-cell",8),e.DNE(16,L,2,1,"mat-cell",9),e.bVm(),e.qex(17,11),e.DNE(18,Y,2,0,"mat-header-cell",8),e.DNE(19,U,2,1,"mat-cell",9),e.bVm(),e.qex(20,12),e.DNE(21,V,2,0,"mat-header-cell",8),e.DNE(22,X,2,1,"mat-cell",9),e.bVm(),e.qex(23,13),e.DNE(24,w,2,0,"mat-header-cell",8),e.DNE(25,Q,2,1,"mat-cell",9),e.bVm(),e.qex(26,14),e.DNE(27,z,2,0,"mat-header-cell",8),e.DNE(28,A,2,1,"mat-cell",9),e.bVm(),e.qex(29,15),e.DNE(30,J,2,0,"th",16),e.DNE(31,K,3,0,"td",17),e.bVm(),e.qex(32,18),e.DNE(33,Z,2,0,"th",16),e.DNE(34,H,3,0,"td",17),e.bVm(),e.DNE(35,W,1,0,"mat-header-row",19),e.DNE(36,ee,1,0,"mat-row",20),e.k0s(),e.nrm(37,"mat-paginator",21),e.k0s()),2&a&&(e.R7$(10),e.Y8G("dataSource",o.dataSource),e.R7$(25),e.Y8G("matHeaderRowDef",o.displayedColumns),e.R7$(1),e.Y8G("matRowDefColumns",o.displayedColumns),e.R7$(1),e.Y8G("pageSizeOptions",e.lJ4(4,te)))},dependencies:[v.$z,F.fg,u.rl,g.iy,y.B4,y.aE,p.Zl,p.tL,p.ji,p.cC,p.YV,p.iL,p.KS,p.$R,p.YZ,p.NB,b.KQ,B.oV]})}}return r})()},{path:"purchaseorder/:billno",component:G},{path:"materialreceiptnote",component:(()=>{class r{constructor(t,a,o){this.formBuilder=t,this.service=a,this.route=o,this._snackBar=(0,e.WQX)(_.UG),this.createForm(),this.GetUsers(),this.GetShippers()}createForm(){this.formGroup=this.formBuilder.group({billNo:["",n.k0.required],receiverCode:["",n.k0.required],shipperCode:["",n.k0.required],comment:[""],purchaseOrderItems:this.formBuilder.array([this.initItem()])})}initItem(){return this.formBuilder.group({itemcode:[""],itemName:[""],quantity:[""],alreadyReceived:[""],qtyReceived:["",n.k0.required]})}GetShippers(){this.service.GetShippers().subscribe(t=>{this.shippers=t})}GetUsers(){this.service.GetUsers().subscribe(t=>{this.receivers=t})}bindPOForID(t){if(t){const o=[{itemcode:"001",itemName:"Material 1",quantity:"3",alreadyReceived:"0",qtyReceived:"0"},{itemcode:"002",itemName:"Material 2",quantity:"4",alreadyReceived:"0",qtyReceived:"0"}].map(m=>this.formBuilder.group({itemcode:[m.itemcode,n.k0.required],itemName:[m.itemName],quantity:[m.quantity],qtyReceived:[0],alreadyReceived:[m.alreadyReceived]})),i=this.formBuilder.array(o);this.formGroup.setControl("purchaseOrderItems",i)}}onSubmit(){console.log(JSON.stringify(this.formGroup.value)),this.service.UpdateProductReceive(this.formGroup.value).subscribe(t=>{this.formGroup.reset(),this.formGroup.controls.purchaseOrderItems.clear(),this.openSnackBar("Product Received","Close")})}onShow(){this.bindPOForID(this.formGroup.controls.billNo.value)}get f(){return this.formGroup.controls}setBalance(t,a){const o=this.formGroup.controls.purchaseOrderItems;var i=o.at(a).get("quantity").value,m=o.at(a).get("alreadyReceived").value;let c=Number(i)-Number(m);return Number(t.value)>0&&Number(t.value)>Number(c)&&(this.openSnackBar("Receive Qty cannot greater then "+c,"Close"),o.at(a).get("qtyReceived").setValue(0)),!1}openSnackBar(t,a){this._snackBar.open(t,a)}static{this.\u0275fac=function(a){return new(a||r)(e.rXU(n.ok),e.rXU(k.z),e.rXU(f.nX))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-material-receipt-note"]],decls:44,vars:5,consts:[["novalidate","",1,"container"],[1,"fill-remaining-space"],[2,"padding-top","10px"],[3,"formGroup","ngSubmit"],[1,"example-container"],["matInput","","maxlength","10","formControlName","billNo"],[4,"ngIf"],["mat-stroked-button","","type","button",2,"margin-left","20px",3,"click"],["formControlName","receiverCode"],["value","1"],["value","2"],["formControlName","shipperCode"],["formArrayName","purchaseOrderItems",1,"example-container"],["class","example-container",4,"ngFor","ngForOf"],["mat-stroked-button","","type","button",3,"click"],[3,"formGroupName"],["matInput","","type","text","readonly","","formControlName","itemcode"],["matInput","","type","text","readonly","","formControlName","itemName",2,"background-color","green"],["matInput","","type","text","readonly","","formControlName","quantity",2,"background-color","green"],["matInput","","type","text","readonly","","formControlName","alreadyReceived",2,"background-color","green"],["matInput","","type","text","formControlName","qtyReceived",3,"change"],[3,"hidden"]],template:function(a,o){1&a&&(e.j41(0,"div",0)(1,"mat-toolbar")(2,"span",1),e.EFF(3,"Material Receive"),e.k0s()(),e.nrm(4,"div",2),e.j41(5,"form",3),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(6,"div",4)(7,"mat-form-field")(8,"mat-label"),e.EFF(9,"Request No"),e.k0s(),e.nrm(10,"input",5),e.DNE(11,oe,2,0,"mat-error",6),e.k0s(),e.j41(12,"button",7),e.bIt("click",function(){return o.onShow()}),e.EFF(13,"Show"),e.k0s(),e.nrm(14,"div",2),e.j41(15,"mat-form-field")(16,"mat-label"),e.EFF(17,"Select Receiver"),e.k0s(),e.j41(18,"mat-select",8)(19,"mat-option",9),e.EFF(20,"Brijesh"),e.k0s(),e.j41(21,"mat-option",10),e.EFF(22,"Rajesh"),e.k0s()(),e.DNE(23,ae,2,0,"mat-error",6),e.k0s(),e.nrm(24,"div",2),e.j41(25,"mat-form-field")(26,"mat-label"),e.EFF(27,"Select Shipper"),e.k0s(),e.j41(28,"mat-select",11)(29,"mat-option",9),e.EFF(30,"Shipper 1"),e.k0s(),e.j41(31,"mat-option",10),e.EFF(32,"Shipper 2"),e.k0s()(),e.DNE(33,ne,2,0,"mat-error",6),e.k0s(),e.nrm(34,"div",2),e.k0s(),e.j41(35,"div",12)(36,"mat-toolbar")(37,"span",1),e.EFF(38,"Enter Material Receive Detail"),e.k0s()(),e.nrm(39,"div",2),e.DNE(40,ie,29,2,"div",13),e.k0s(),e.nrm(41,"br"),e.j41(42,"button",14),e.bIt("click",function(){return o.onSubmit()}),e.EFF(43,"Submit"),e.k0s()()()),2&a&&(e.R7$(5),e.Y8G("formGroup",o.formGroup),e.R7$(6),e.Y8G("ngIf",null==o.formGroup.controls.billNo.errors?null:o.formGroup.controls.billNo.errors.required),e.R7$(12),e.Y8G("ngIf",null==o.formGroup.controls.receiverCode.errors?null:o.formGroup.controls.receiverCode.errors.required),e.R7$(10),e.Y8G("ngIf",null==o.formGroup.controls.shipperCode.errors?null:o.formGroup.controls.shipperCode.errors.required),e.R7$(7),e.Y8G("ngForOf",o.f.purchaseOrderItems.controls))},dependencies:[d.Sq,d.bT,R.wT,v.$z,F.fg,u.rl,u.nJ,u.TL,C.VO,b.KQ,n.qT,n.me,n.BC,n.cb,n.tU,n.j4,n.JD,n.$R,n.v8],styles:[".example-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] + mat-form-field[_ngcontent-%COMP%]{margin-left:8px}"]})}}return r})()},{path:"poreturn",component:(()=>{class r{constructor(t,a,o){this.formBuilder=t,this.service=a,this.route=o,this._snackBar=(0,e.WQX)(_.UG),this.createForm(),this.GetUsers(),this.GetShippers()}createForm(){this.formGroup=this.formBuilder.group({billNo:["",n.k0.required],authorizedBy:["",n.k0.required],shipperCode:["",n.k0.required],receiptNo:["",n.k0.required],authorizedDate:["",n.k0.required],remark:[""],purchaseOrderItems:this.formBuilder.array([this.initItem()])})}openSnackBar(t,a){this._snackBar.open(t,a)}initItem(){return this.formBuilder.group({itemcode:[""],itemName:[""],quantity:[""],alreadyReceived:[""],alreadyReturned:[""],returnReason:[""],qtyReturned:["",n.k0.required]})}GetShippers(){this.service.GetShippers().subscribe(t=>{this.shippers=t})}GetUsers(){this.service.GetUsers().subscribe(t=>{this.receivers=t})}bindPOForID(t){t&&this.service.GetPOReturnByBillNo(t).subscribe(a=>{if(0==a.length)return void this.openSnackBar("Invalid PO No","Close");const o=a.map(m=>this.formBuilder.group({itemcode:[m.itemcode,n.k0.required],itemName:[m.itemName],quantity:[m.quantity],alreadyReceived:[m.alreadyReceived],alreadyReturned:[m.alreadyReturned],returnReason:[m.returnReason],qtyReturned:[0]})),i=this.formBuilder.array(o);this.formGroup.setControl("purchaseOrderItems",i)})}onSubmit(){console.log(JSON.stringify(this.formGroup.value)),this.service.UpdateProductReturn(this.formGroup.value).subscribe(t=>{this.formGroup.reset(),this.formGroup.controls.purchaseOrderItems.clear(),this.openSnackBar("Product Returned","Close")})}onShow(){let t=this.formGroup.controls.billNo.value;""!=t?this.bindPOForID(t):this.openSnackBar("Please Enter Purchase Order No","Close")}get f(){return this.formGroup.controls}setBalance(t,a){const o=this.formGroup.controls.purchaseOrderItems;var i=o.at(a).get("alreadyReturned").value,m=o.at(a).get("alreadyReceived").value;let c=Number(m)-Number(i);return Number(t.value)>0&&Number(t.value)>Number(c)&&(this.openSnackBar("Return Qty cannot greater then "+c,"Close"),o.at(a).get("qtyReturned").setValue(0)),!1}static{this.\u0275fac=function(a){return new(a||r)(e.rXU(n.ok),e.rXU(k.z),e.rXU(f.nX))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-purchase-return"]],decls:57,vars:11,consts:[["novalidate","",1,"container"],[1,"fill-remaining-space"],[2,"padding-top","10px"],[3,"formGroup","ngSubmit"],[1,"example-container"],["matInput","","maxlength","10","formControlName","billNo","placeholder","Purchase Order"],[4,"ngIf"],["mat-stroked-button","","type","button",2,"margin-left","20px",3,"click"],["formControlName","authorizedBy"],[3,"value",4,"ngFor","ngForOf"],["formControlName","shipperCode"],["matInput","","maxlength","10","formControlName","receiptNo"],["matIconSuffix","",3,"for"],["matInput","","formControlName","authorizedDate",3,"matDatepicker"],["picker",""],["matInput","","formControlName","remark"],["formArrayName","purchaseOrderItems",1,"example-container"],["class","example-container",4,"ngFor","ngForOf"],["mat-stroked-button","","type","button",3,"click"],[3,"value"],[3,"formGroupName"],[2,"width","140px"],["matInput","","type","text","readonly","","formControlName","itemcode"],["matInput","","type","text","readonly","","formControlName","itemName"],["matInput","","type","text","readonly","","formControlName","quantity",2,"width","80px"],["matInput","","type","text","readonly","","formControlName","alreadyReceived",2,"width","80px"],["matInput","","type","text","readonly","","formControlName","alreadyReturned",2,"width","80px"],["matInput","","type","text","formControlName","qtyReturned",2,"width","80px",3,"change"],[3,"hidden"],["formControlName","returnReason"],["value","Fungas"],["value","Expiry"],["value","Break"]],template:function(a,o){if(1&a&&(e.j41(0,"div",0)(1,"mat-toolbar")(2,"span",1),e.EFF(3,"Purchase Order Return"),e.k0s()(),e.nrm(4,"div",2),e.j41(5,"form",3),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(6,"div",4)(7,"mat-form-field")(8,"mat-label"),e.EFF(9,"Purchase OrderNo"),e.k0s(),e.nrm(10,"input",5),e.DNE(11,me,2,0,"mat-error",6),e.k0s(),e.j41(12,"button",7),e.bIt("click",function(){return o.onShow()}),e.EFF(13,"Show"),e.k0s()(),e.nrm(14,"div",2),e.j41(15,"div",4)(16,"mat-form-field")(17,"mat-label"),e.EFF(18,"Select Authorized By"),e.k0s(),e.j41(19,"mat-select",8),e.DNE(20,le,2,2,"mat-option",9),e.k0s(),e.DNE(21,ce,2,0,"mat-error",6),e.k0s(),e.j41(22,"mat-form-field")(23,"mat-label"),e.EFF(24,"Select Shipper"),e.k0s(),e.j41(25,"mat-select",10),e.DNE(26,ue,2,2,"mat-option",9),e.k0s(),e.DNE(27,pe,2,0,"mat-error",6),e.k0s(),e.j41(28,"mat-form-field")(29,"mat-label"),e.EFF(30,"Enter Receipt No"),e.k0s(),e.nrm(31,"input",11),e.DNE(32,de,2,0,"mat-error",6),e.k0s(),e.j41(33,"mat-form-field")(34,"mat-label"),e.EFF(35,"Authorized Date"),e.k0s(),e.nrm(36,"mat-datepicker-toggle",12)(37,"input",13)(38,"mat-datepicker",null,14),e.DNE(40,fe,2,0,"mat-error",6),e.k0s()(),e.nrm(41,"div",2),e.j41(42,"div",4)(43,"mat-form-field")(44,"mat-label"),e.EFF(45,"Remark"),e.k0s(),e.nrm(46,"textarea",15),e.k0s()(),e.nrm(47,"div",2),e.j41(48,"div",16)(49,"mat-toolbar")(50,"span",1),e.EFF(51,"Enter Item Return Detail"),e.k0s()(),e.nrm(52,"div",2),e.DNE(53,he,41,3,"div",17),e.k0s(),e.nrm(54,"br"),e.j41(55,"button",18),e.bIt("click",function(){return o.onSubmit()}),e.EFF(56,"Submit"),e.k0s()()()),2&a){const i=e.sdS(39);e.R7$(5),e.Y8G("formGroup",o.formGroup),e.R7$(6),e.Y8G("ngIf",null==o.formGroup.controls.billNo.errors?null:o.formGroup.controls.billNo.errors.required),e.R7$(9),e.Y8G("ngForOf",o.receivers),e.R7$(1),e.Y8G("ngIf",null==o.formGroup.controls.authorizedBy.errors?null:o.formGroup.controls.authorizedBy.errors.required),e.R7$(5),e.Y8G("ngForOf",o.shippers),e.R7$(1),e.Y8G("ngIf",null==o.formGroup.controls.shipperCode.errors?null:o.formGroup.controls.shipperCode.errors.required),e.R7$(5),e.Y8G("ngIf",null==o.formGroup.controls.receiptNo.errors?null:o.formGroup.controls.receiptNo.errors.required),e.R7$(4),e.Y8G("for",i),e.R7$(1),e.Y8G("matDatepicker",i),e.R7$(3),e.Y8G("ngIf",null==o.formGroup.controls.authorizedDate.errors?null:o.formGroup.controls.authorizedDate.errors.required),e.R7$(13),e.Y8G("ngForOf",o.f.purchaseOrderItems.controls)}},dependencies:[d.Sq,d.bT,R.wT,v.$z,F.fg,u.rl,u.nJ,u.TL,u.yw,C.VO,b.KQ,h.Vh,h.bZ,h.bU,n.qT,n.me,n.BC,n.cb,n.tU,n.j4,n.JD,n.$R,n.v8],styles:[".example-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] + mat-form-field[_ngcontent-%COMP%]{margin-left:8px}"]})}}return r})()}];let ke=(()=>{class r{static{this.\u0275fac=function(a){return new(a||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({imports:[f.iI.forChild(ve),f.iI]})}}return r})();var Fe=l(1472),be=l(1626);let _e=(()=>{class r{static{this.\u0275fac=function(a){return new(a||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({imports:[d.MD,ke,Fe.G,n.X1,n.YN,be.q1]})}}return r})()}}]);