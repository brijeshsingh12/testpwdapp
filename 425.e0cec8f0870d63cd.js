"use strict";(self.webpackChunkInventoryAPPN=self.webpackChunkInventoryAPPN||[]).push([[425],{7425:(ge,y,l)=>{l.r(y),l.d(y,{PurchaseModule:()=>Ee});var f=l(5743),e=l(7705),a=l(9417),b=l(5416),v=l(1322),d=l(177),C=l(6600),k=l(8834),g=l(9213),F=l(9631),u=l(6467),R=l(2798),_=l(5911),h=l(5084);function I(r,i){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Select PO Date"),e.k0s())}function P(r,i){if(1&r&&(e.j41(0,"mat-option",21),e.EFF(1),e.k0s()),2&r){const t=i.$implicit;e.Y8G("value",t.id),e.R7$(1),e.JRh(t.supplierName)}}function j(r,i){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Select Supplier"),e.k0s())}function O(r,i){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Select Delivery Date"),e.k0s())}function D(r,i){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Enter Remark"),e.k0s())}function S(r,i){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Enter Delivery To"),e.k0s())}function T(r,i){if(1&r&&(e.j41(0,"mat-option",21),e.EFF(1),e.k0s()),2&r){const t=i.$implicit;e.Y8G("value",t.itemCode),e.R7$(1),e.JRh(t.itemName)}}function $(r,i){if(1&r){const t=e.RV6();e.j41(0,"button",29),e.bIt("click",function(){e.eBV(t);const o=e.XpG().index,s=e.XpG();return e.Njj(s.removeItem(o))}),e.j41(1,"mat-icon"),e.EFF(2,"delete"),e.k0s()()}}function B(r,i){if(1&r){const t=e.RV6();e.j41(0,"div",4)(1,"div",22)(2,"mat-form-field")(3,"mat-label"),e.EFF(4,"Item Code"),e.k0s(),e.j41(5,"mat-select",23),e.bIt("selectionChange",function(o){const m=e.eBV(t).index,c=e.XpG();return e.Njj(c.onItemChange(o.value,m))}),e.DNE(6,T,2,2,"mat-option",11),e.k0s(),e.j41(7,"mat-error",24),e.EFF(8," Item code is required "),e.k0s()(),e.j41(9,"mat-form-field")(10,"mat-label"),e.EFF(11,"Quantity"),e.k0s(),e.j41(12,"input",25),e.bIt("change",function(o){const m=e.eBV(t).index,c=e.XpG();return e.Njj(c.setAmount(o.target,m))}),e.k0s(),e.j41(13,"mat-error",24),e.EFF(14," Enter Quantity "),e.k0s()(),e.j41(15,"mat-form-field")(16,"mat-label"),e.EFF(17,"Unit Price"),e.k0s(),e.nrm(18,"input",26),e.k0s(),e.j41(19,"mat-form-field")(20,"mat-label"),e.EFF(21,"Amount"),e.k0s(),e.nrm(22,"input",27),e.j41(23,"mat-error",24),e.EFF(24," Enter Amount "),e.k0s()(),e.DNE(25,$,3,0,"button",28),e.k0s(),e.nrm(26,"div",2),e.k0s()}if(2&r){const t=i.index,n=e.XpG();e.R7$(1),e.Y8G("formGroupName",t),e.R7$(5),e.Y8G("ngForOf",n.items),e.R7$(1),e.Y8G("hidden",n.f.purchaseOrderItems.controls[t].controls.itemcode.valid),e.R7$(6),e.Y8G("hidden",n.f.purchaseOrderItems.controls[t].controls.quantity.valid),e.R7$(10),e.Y8G("hidden",n.f.purchaseOrderItems.controls[t].controls.amount.valid),e.R7$(2),e.Y8G("ngIf",n.f.purchaseOrderItems.controls.length>1)}}let G=(()=>{class r{constructor(t,n,o){this.formBuilder=t,this.service=n,this.route=o,this._snackBar=(0,e.WQX)(b.UG),this.post="",this.invoiceData={billNo:"PO1003",date:"2025-04-30",supplier:"1",remark:"Test Remark by Brijesh",deliveryDate:"2025-04-30",deliveryTo:"Sagarpur, New Delhi",purchaseOrderItems:[{itemcode:"Item100",quantity:10,unitPrice:100,amount:1e3},{itemcode:"Item101",quantity:20,unitPrice:200,amount:4e3},{itemcode:"Item102",quantity:50,unitPrice:10,amount:500}]}}ngOnInit(){this.createForm(),this.GetItems(),this.GetSuppliers(),this.bindPOForID()}bindPOForID(){let t=this.route.snapshot.paramMap.get("billno");t&&this.service.GetPOByBillNo(t).subscribe(n=>{this.formGroup.patchValue(n);const o=n.purchaseOrderItems.map(m=>this.formBuilder.group({itemcode:[m.itemcode,a.k0.required],quantity:[m.quantity],unitPrice:[m.unitPrice],amount:[m.amount]})),s=this.formBuilder.array(o);this.formGroup.setControl("purchaseOrderItems",s)})}GetSuppliers(){this.service.GetSuppliers().subscribe(t=>{console.log(t),this.suppliers=t})}GetItems(){this.service.GetItems().subscribe(t=>{this.items=t})}createForm(){this.formGroup=this.formBuilder.group({billNo:[null,a.k0.required],date:[null,a.k0.required],supplier:[null,a.k0.required],deliveryDate:[null,a.k0.required],remark:[null,a.k0.required],deliveryTo:[null,a.k0.required],purchaseOrderItems:this.formBuilder.array([this.initItem()])})}initItem(){return this.formBuilder.group({itemcode:["",a.k0.required],quantity:["",a.k0.required],unitPrice:["",a.k0.required],amount:["",a.k0.required]})}addItem(){this.formGroup.controls.purchaseOrderItems.push(this.initItem())}removeItem(t){this.formGroup.controls.purchaseOrderItems.removeAt(t)}get f(){return this.formGroup.controls}onSubmit(){console.log(this.formGroup.value),this.route.snapshot.paramMap.get("billno")?this.service.UpdatePurchaseOrder(this.formGroup.value).subscribe(o=>{this.openSnackBar("Data Updated","Close"),alert("")}):this.service.savePurchaseOrder(this.formGroup.value).subscribe(o=>{this.openSnackBar("Data Saved","Close")}),this.formGroup.reset(),this.formGroup.controls.purchaseOrderItems.clear()}onItemChange(t,n){let o=this.items.filter(m=>m.itemCode==t);this.formGroup.controls.purchaseOrderItems.at(n).get("unitPrice").setValue(o[0].price)}setAmount(t,n){const o=this.formGroup.controls.purchaseOrderItems;var s=o.at(n).get("unitPrice").value;const m=Number(t.value)*Number(s);o.at(n).get("amount").setValue(m)}downloadPdf(){this.service.generateInvoicePdf(this.invoiceData).subscribe(t=>{const n=window.URL.createObjectURL(t),o=document.createElement("a");o.href=n,o.download="invoice.pdf",o.click(),window.URL.revokeObjectURL(n)})}openSnackBar(t,n){this._snackBar.open(t,n)}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(a.ok),e.rXU(v.z),e.rXU(f.nX))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-purchase-order"]],decls:61,vars:13,consts:[["novalidate","",1,"container"],[1,"fill-remaining-space"],[2,"padding-top","10px"],[3,"formGroup","ngSubmit"],[1,"example-container"],["matInput","","maxlength","10","formControlName","billNo"],["matIconSuffix","",3,"for"],["matInput","","formControlName","date",3,"matDatepicker"],["picker2",""],[4,"ngIf"],["formControlName","supplier"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","deliveryDate",3,"matDatepicker"],["picker",""],["matInput","","formControlName","remark",2,"width","600px","height","100px"],["matInput","","formControlName","deliveryTo",2,"width","600px","height","100px"],["formArrayName","purchaseOrderItems",1,"example-container"],[1,"example-button-row"],["mat-stroked-button","","type","button",3,"click"],["class","example-container",4,"ngFor","ngForOf"],["mat-stroked-button","","type","button",3,"disabled","click"],[3,"value"],[3,"formGroupName"],["formControlName","itemcode",3,"selectionChange"],[3,"hidden"],["matInput","","type","text","formControlName","quantity",3,"change"],["matInput","","readonly","","type","text","formControlName","unitPrice"],["matInput","","type","text","formControlName","amount"],["mat-mini-fab","","aria-label","Delete",3,"click",4,"ngIf"],["mat-mini-fab","","aria-label","Delete",3,"click"]],template:function(n,o){if(1&n&&(e.j41(0,"div",0)(1,"mat-toolbar")(2,"span",1),e.EFF(3,"Purchase Order"),e.k0s()(),e.nrm(4,"div",2),e.j41(5,"form",3),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(6,"div",4)(7,"mat-form-field")(8,"mat-label"),e.EFF(9,"Purchase OrderNo"),e.k0s(),e.nrm(10,"input",5),e.k0s(),e.j41(11,"mat-form-field")(12,"mat-label"),e.EFF(13,"PO Date"),e.k0s(),e.nrm(14,"mat-datepicker-toggle",6)(15,"input",7)(16,"mat-datepicker",null,8),e.DNE(18,I,2,0,"mat-error",9),e.k0s(),e.j41(19,"mat-form-field")(20,"mat-label"),e.EFF(21,"Select Supplier"),e.k0s(),e.j41(22,"mat-select",10),e.DNE(23,P,2,2,"mat-option",11),e.k0s(),e.DNE(24,j,2,0,"mat-error",9),e.k0s(),e.j41(25,"mat-form-field")(26,"mat-label"),e.EFF(27,"Delivery Date"),e.k0s(),e.nrm(28,"mat-datepicker-toggle",6)(29,"input",12)(30,"mat-datepicker",null,13),e.DNE(32,O,2,0,"mat-error",9),e.k0s()(),e.nrm(33,"div",2),e.j41(34,"div",4)(35,"mat-form-field")(36,"mat-label"),e.EFF(37,"Remark"),e.k0s(),e.nrm(38,"textarea",14),e.DNE(39,D,2,0,"mat-error",9),e.k0s(),e.j41(40,"mat-form-field")(41,"mat-label"),e.EFF(42,"Delivery To"),e.k0s(),e.nrm(43,"textarea",15),e.DNE(44,S,2,0,"mat-error",9),e.k0s()(),e.nrm(45,"div",2),e.j41(46,"div",16)(47,"mat-toolbar")(48,"span",1),e.EFF(49,"Enter Item Details:"),e.k0s()(),e.j41(50,"div",17)(51,"button",18),e.bIt("click",function(){return o.addItem()}),e.EFF(52,"Add New Item"),e.k0s()(),e.nrm(53,"div",2),e.DNE(54,B,27,6,"div",19),e.k0s(),e.nrm(55,"br"),e.j41(56,"div",17)(57,"button",20),e.bIt("click",function(){return o.onSubmit()}),e.EFF(58,"Submit"),e.k0s(),e.j41(59,"button",18),e.bIt("click",function(){return o.downloadPdf()}),e.EFF(60,"Download Invoice PDF"),e.k0s()()()()),2&n){const s=e.sdS(17),m=e.sdS(31);e.R7$(5),e.Y8G("formGroup",o.formGroup),e.R7$(9),e.Y8G("for",s),e.R7$(1),e.Y8G("matDatepicker",s),e.R7$(3),e.Y8G("ngIf",null==o.formGroup.controls.date.errors?null:o.formGroup.controls.date.errors.required),e.R7$(5),e.Y8G("ngForOf",o.suppliers),e.R7$(1),e.Y8G("ngIf",null==o.formGroup.controls.supplier.errors?null:o.formGroup.controls.supplier.errors.required),e.R7$(4),e.Y8G("for",m),e.R7$(1),e.Y8G("matDatepicker",m),e.R7$(3),e.Y8G("ngIf",null==o.formGroup.controls.deliveryDate.errors?null:o.formGroup.controls.deliveryDate.errors.required),e.R7$(7),e.Y8G("ngIf",null==o.formGroup.controls.remark.errors?null:o.formGroup.controls.remark.errors.required),e.R7$(5),e.Y8G("ngIf",null==o.formGroup.controls.deliveryTo.errors?null:o.formGroup.controls.deliveryTo.errors.required),e.R7$(10),e.Y8G("ngForOf",o.f.purchaseOrderItems.controls),e.R7$(3),e.Y8G("disabled",!o.formGroup.valid)}},dependencies:[d.Sq,d.bT,C.wT,k.$z,k.$0,g.An,F.fg,u.rl,u.nJ,u.TL,u.yw,R.VO,_.KQ,h.Vh,h.bZ,h.bU,a.qT,a.me,a.BC,a.cb,a.tU,a.j4,a.JD,a.$R,a.v8],styles:[".example-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] + mat-form-field[_ngcontent-%COMP%]{margin-left:8px}"]})}}return r})();var E=l(6695),N=l(2042),p=l(9159),x=l(1802),q=l(5351),Y=l(2232),L=l(4823);function U(r,i){1&r&&(e.j41(0,"mat-header-cell",22),e.EFF(1,"PO Number"),e.k0s())}function V(r,i){if(1&r&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&r){const t=i.$implicit;e.R7$(1),e.SpI(" ",t.billNo," ")}}function X(r,i){1&r&&(e.j41(0,"mat-header-cell",22),e.EFF(1,"PO Date"),e.k0s())}function w(r,i){if(1&r&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&r){const t=i.$implicit;e.R7$(1),e.SpI(" ",t.poDate," ")}}function M(r,i){1&r&&(e.j41(0,"mat-header-cell",22),e.EFF(1,"Supplier Name"),e.k0s())}function Q(r,i){if(1&r&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&r){const t=i.$implicit;e.R7$(1),e.SpI(" ",t.supplierName," ")}}function A(r,i){1&r&&(e.j41(0,"mat-header-cell",22),e.EFF(1,"Delivery Date"),e.k0s())}function z(r,i){if(1&r&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&r){const t=i.$implicit;e.R7$(1),e.SpI(" ",t.deliveryDate," ")}}function J(r,i){1&r&&(e.j41(0,"mat-header-cell",22),e.EFF(1,"delivery Address"),e.k0s())}function K(r,i){if(1&r&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&r){const t=i.$implicit;e.R7$(1),e.SpI(" ",t.deliveryTo," ")}}function Z(r,i){1&r&&(e.j41(0,"mat-header-cell",22),e.EFF(1,"Remark"),e.k0s())}function H(r,i){if(1&r&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&r){const t=i.$implicit;e.R7$(1),e.SpI(" ",t.remark," ")}}function W(r,i){1&r&&(e.j41(0,"th",23),e.EFF(1," Edit "),e.k0s())}function ee(r,i){if(1&r){const t=e.RV6();e.j41(0,"td",24)(1,"button",25),e.bIt("click",function(){const s=e.eBV(t).$implicit,m=e.XpG();return e.Njj(m.Edit(s.billNo))}),e.EFF(2,"Edit"),e.k0s()()}}function te(r,i){1&r&&(e.j41(0,"th",23),e.EFF(1," Remove "),e.k0s())}function re(r,i){if(1&r){const t=e.RV6();e.j41(0,"td",24)(1,"button",26),e.bIt("click",function(){const s=e.eBV(t).$implicit,m=e.XpG();return e.Njj(m.RemovePurchaseOrder(s.billNo))}),e.EFF(2,"Remove"),e.k0s()()}}function oe(r,i){1&r&&e.nrm(0,"mat-header-row")}function ne(r,i){1&r&&e.nrm(0,"mat-row")}const ae=function(){return[5,10,25,100]};function se(r,i){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Enter PO No"),e.k0s())}function me(r,i){if(1&r&&(e.j41(0,"mat-option",15),e.EFF(1),e.k0s()),2&r){const t=i.$implicit;e.Y8G("value",t.id.toString()),e.R7$(1),e.JRh(t.name)}}function le(r,i){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Select Receiver"),e.k0s())}function ce(r,i){if(1&r&&(e.j41(0,"mat-option",15),e.EFF(1),e.k0s()),2&r){const t=i.$implicit;e.Y8G("value",t.shipperCode),e.R7$(1),e.JRh(t.shipperName)}}function ue(r,i){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Select Shipper"),e.k0s())}function pe(r,i){if(1&r){const t=e.RV6();e.j41(0,"div",4)(1,"div",16)(2,"mat-form-field")(3,"mat-label"),e.EFF(4,"Item Code"),e.k0s(),e.nrm(5,"input",17),e.k0s(),e.j41(6,"mat-form-field")(7,"mat-label"),e.EFF(8,"Item Name"),e.k0s(),e.nrm(9,"input",18),e.k0s(),e.j41(10,"mat-form-field")(11,"mat-label"),e.EFF(12,"Order Qty"),e.k0s(),e.nrm(13,"input",19),e.k0s(),e.j41(14,"mat-form-field")(15,"mat-label"),e.EFF(16,"Already Received Qty"),e.k0s(),e.nrm(17,"input",20),e.k0s(),e.j41(18,"mat-form-field")(19,"mat-label"),e.EFF(20,"Receive Qty."),e.k0s(),e.j41(21,"input",21),e.bIt("change",function(o){const m=e.eBV(t).index,c=e.XpG();return e.Njj(c.setBalance(o.target,m))}),e.k0s(),e.j41(22,"mat-error",22),e.EFF(23," Enter Receive Quantity "),e.k0s()()(),e.nrm(24,"div",2),e.k0s()}if(2&r){const t=i.index,n=e.XpG();e.R7$(1),e.Y8G("formGroupName",t),e.R7$(21),e.Y8G("hidden",n.f.purchaseOrderItems.controls[t].controls.qtyReceived.valid)}}function fe(r,i){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Enter PO No"),e.k0s())}function he(r,i){if(1&r&&(e.j41(0,"mat-option",19),e.EFF(1),e.k0s()),2&r){const t=i.$implicit;e.Y8G("value",t.id.toString()),e.R7$(1),e.JRh(t.name)}}function ke(r,i){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Select Authorized By"),e.k0s())}function ve(r,i){if(1&r&&(e.j41(0,"mat-option",19),e.EFF(1),e.k0s()),2&r){const t=i.$implicit;e.Y8G("value",t.shipperCode),e.R7$(1),e.JRh(t.shipperName)}}function Fe(r,i){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Select Shipper"),e.k0s())}function _e(r,i){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Enter Receipt No"),e.k0s())}function be(r,i){1&r&&(e.j41(0,"mat-error"),e.EFF(1,"Select Authorize Date"),e.k0s())}function Ce(r,i){if(1&r){const t=e.RV6();e.j41(0,"div",4)(1,"div",20)(2,"mat-form-field",21)(3,"mat-label"),e.EFF(4,"Item Code"),e.k0s(),e.nrm(5,"input",22),e.k0s(),e.j41(6,"mat-form-field",21)(7,"mat-label"),e.EFF(8,"Item Name"),e.k0s(),e.nrm(9,"input",23),e.k0s(),e.j41(10,"mat-form-field",21)(11,"mat-label"),e.EFF(12,"Order Qty."),e.k0s(),e.nrm(13,"input",24),e.k0s(),e.j41(14,"mat-form-field",21)(15,"mat-label"),e.EFF(16,"Received Qty"),e.k0s(),e.nrm(17,"input",25),e.k0s(),e.j41(18,"mat-form-field",21)(19,"mat-label"),e.EFF(20,"Already Returned Qty"),e.k0s(),e.nrm(21,"input",26),e.k0s(),e.j41(22,"mat-form-field",21)(23,"mat-label"),e.EFF(24,"Return Qty."),e.k0s(),e.j41(25,"input",27),e.bIt("change",function(o){const m=e.eBV(t).index,c=e.XpG();return e.Njj(c.setBalance(o.target,m))}),e.k0s(),e.j41(26,"mat-error",28),e.EFF(27," Enter Return Quantity "),e.k0s()(),e.j41(28,"mat-form-field",21)(29,"mat-label"),e.EFF(30,"Select Reason"),e.k0s(),e.j41(31,"mat-select",29)(32,"mat-option",30),e.EFF(33,"Fungas"),e.k0s(),e.j41(34,"mat-option",31),e.EFF(35,"Expiry"),e.k0s(),e.j41(36,"mat-option",32),e.EFF(37,"Break"),e.k0s()(),e.j41(38,"mat-error",28),e.EFF(39,"Select Reason"),e.k0s()()(),e.nrm(40,"div",2),e.k0s()}if(2&r){const t=i.index,n=e.XpG();e.R7$(1),e.Y8G("formGroupName",t),e.R7$(25),e.Y8G("hidden",n.f.purchaseOrderItems.controls[t].controls.qtyReturned.valid),e.R7$(12),e.Y8G("hidden",n.f.purchaseOrderItems.controls[t].controls.returnReason.valid)}}const Re=[{path:"purchaseorder",component:G},{path:"poorderlist",component:(()=>{class r{constructor(t,n,o,s,m){this._purchaseService=t,this.excelService=n,this.dialog=o,this.snackBarService=s,this.router=m,this.POList=[],this.displayedColumns=["billNo","poDate","supplierName","deliveryDate","deliveryTo","remark","Edit","Remove"]}ngOnInit(){this.bindPurchaseOrders()}bindPurchaseOrders(){this._purchaseService.GetPOList().subscribe(t=>{null!=t&&(this.POList=t,this.dataSource=new p.I6(t),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)})}applyFilter(t){this.dataSource.filter=t.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}Edit(t){this.router.navigate(["/purchaseorder",t])}RemovePurchaseOrder(t){this._purchaseService.DeletePurchaseOrder(t).subscribe(n=>{n?(this.bindPurchaseOrders(),this.snackBarService.show("Purchase Order Deleted","success")):this.snackBarService.show("Error Throwing!","error")})}exportAsXLSX(){this.excelService.exportAsExcelFile(this.POList,"sample")}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(v.z),e.rXU(x.J),e.rXU(q.bZ),e.rXU(Y.v),e.rXU(f.Ix))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-po-list"]],viewQuery:function(n,o){if(1&n&&(e.GBs(E.iy,5),e.GBs(N.B4,5)),2&n){let s;e.mGM(s=e.lsd())&&(o.paginator=s.first),e.mGM(s=e.lsd())&&(o.sort=s.first)}},decls:38,vars:5,consts:[[1,"fill-remaining-space"],[2,"padding-top","10px"],[2,"float","left"],["matInput","","placeholder","Search",3,"keyup"],[1,"example-container","mat-elevation-z8"],["mat-stroked-button","","color","primary",3,"click"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","billNo"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","poDate"],["matColumnDef","supplierName"],["matColumnDef","deliveryDate"],["matColumnDef","deliveryTo"],["matColumnDef","remark"],["matColumnDef","Edit"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Remove"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions"],["mat-sort-header",""],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-raised-button","","color","warn","matTooltip","Edit",3,"click"],["mat-raised-button","","color","warn","matTooltip","Remove",3,"click"]],template:function(n,o){1&n&&(e.j41(0,"mat-toolbar")(1,"span",0),e.EFF(2,"Purchase Order List"),e.k0s()(),e.nrm(3,"div",1),e.j41(4,"mat-form-field",2)(5,"input",3),e.bIt("keyup",function(m){return o.applyFilter(m.target.value)}),e.k0s()(),e.j41(6,"div",4)(7,"button",5),e.bIt("click",function(){return o.exportAsXLSX()}),e.EFF(8,"Download Excel"),e.k0s(),e.nrm(9,"div",1),e.j41(10,"table",6),e.qex(11,7),e.DNE(12,U,2,0,"mat-header-cell",8),e.DNE(13,V,2,1,"mat-cell",9),e.bVm(),e.qex(14,10),e.DNE(15,X,2,0,"mat-header-cell",8),e.DNE(16,w,2,1,"mat-cell",9),e.bVm(),e.qex(17,11),e.DNE(18,M,2,0,"mat-header-cell",8),e.DNE(19,Q,2,1,"mat-cell",9),e.bVm(),e.qex(20,12),e.DNE(21,A,2,0,"mat-header-cell",8),e.DNE(22,z,2,1,"mat-cell",9),e.bVm(),e.qex(23,13),e.DNE(24,J,2,0,"mat-header-cell",8),e.DNE(25,K,2,1,"mat-cell",9),e.bVm(),e.qex(26,14),e.DNE(27,Z,2,0,"mat-header-cell",8),e.DNE(28,H,2,1,"mat-cell",9),e.bVm(),e.qex(29,15),e.DNE(30,W,2,0,"th",16),e.DNE(31,ee,3,0,"td",17),e.bVm(),e.qex(32,18),e.DNE(33,te,2,0,"th",16),e.DNE(34,re,3,0,"td",17),e.bVm(),e.DNE(35,oe,1,0,"mat-header-row",19),e.DNE(36,ne,1,0,"mat-row",20),e.k0s(),e.nrm(37,"mat-paginator",21),e.k0s()),2&n&&(e.R7$(10),e.Y8G("dataSource",o.dataSource),e.R7$(25),e.Y8G("matHeaderRowDef",o.displayedColumns),e.R7$(1),e.Y8G("matRowDefColumns",o.displayedColumns),e.R7$(1),e.Y8G("pageSizeOptions",e.lJ4(4,ae)))},dependencies:[k.$z,F.fg,u.rl,E.iy,N.B4,N.aE,p.Zl,p.tL,p.ji,p.cC,p.YV,p.iL,p.KS,p.$R,p.YZ,p.NB,_.KQ,L.oV]})}}return r})()},{path:"purchaseorder/:billno",component:G},{path:"materialreceiptnote",component:(()=>{class r{constructor(t,n,o){this.formBuilder=t,this.service=n,this.route=o,this._snackBar=(0,e.WQX)(b.UG),this.createForm(),this.GetUsers(),this.GetShippers()}createForm(){this.formGroup=this.formBuilder.group({billNo:["",a.k0.required],receiverCode:["",a.k0.required],shipperCode:["",a.k0.required],comment:[""],purchaseOrderItems:this.formBuilder.array([this.initItem()])})}initItem(){return this.formBuilder.group({itemcode:[""],itemName:[""],quantity:[""],alreadyReceived:[""],qtyReceived:["",a.k0.required]})}GetShippers(){this.service.GetShippers().subscribe(t=>{this.shippers=t})}GetUsers(){this.service.GetUsers().subscribe(t=>{this.receivers=t})}bindPOForID(t){t&&this.service.GetPOReceiveByBillNo(t).subscribe(n=>{const o=n.map(m=>this.formBuilder.group({itemcode:[m.itemcode,a.k0.required],itemName:[m.itemName],quantity:[m.quantity],qtyReceived:[0],alreadyReceived:[m.alreadyReceived]})),s=this.formBuilder.array(o);this.formGroup.setControl("purchaseOrderItems",s)})}onSubmit(){console.log(JSON.stringify(this.formGroup.value)),this.service.UpdateProductReceive(this.formGroup.value).subscribe(t=>{this.formGroup.reset(),this.formGroup.controls.purchaseOrderItems.clear(),this.openSnackBar("Product Received","Close")})}onShow(){let t=this.formGroup.controls.billNo.value;""!=t?this.bindPOForID(t):this.openSnackBar("Please Enter Purchase Order No","Close")}get f(){return this.formGroup.controls}setBalance(t,n){const o=this.formGroup.controls.purchaseOrderItems;var s=o.at(n).get("quantity").value,m=o.at(n).get("alreadyReceived").value;let c=Number(s)-Number(m);return Number(t.value)>0&&Number(t.value)>Number(c)&&(this.openSnackBar("Receive Qty cannot greater then "+c,"Close"),o.at(n).get("qtyReceived").setValue(0)),!1}openSnackBar(t,n){this._snackBar.open(t,n)}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(a.ok),e.rXU(v.z),e.rXU(f.nX))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-material-receipt-note"]],decls:42,vars:7,consts:[["novalidate","",1,"container"],[1,"fill-remaining-space"],[2,"padding-top","10px"],[3,"formGroup","ngSubmit"],[1,"example-container"],["matInput","","maxlength","10","formControlName","billNo"],[4,"ngIf"],["mat-stroked-button","","type","button",2,"margin-left","20px",3,"click"],["formControlName","receiverCode"],[3,"value",4,"ngFor","ngForOf"],["formControlName","shipperCode"],["matInput","","formControlName","comment",2,"width","600px"],["formArrayName","purchaseOrderItems",1,"example-container"],["class","example-container",4,"ngFor","ngForOf"],["mat-stroked-button","","type","button",3,"click"],[3,"value"],[3,"formGroupName"],["matInput","","type","text","readonly","","formControlName","itemcode"],["matInput","","type","text","readonly","","formControlName","itemName"],["matInput","","type","text","readonly","","formControlName","quantity"],["matInput","","type","text","readonly","","formControlName","alreadyReceived"],["matInput","","type","text","formControlName","qtyReceived",3,"change"],[3,"hidden"]],template:function(n,o){1&n&&(e.j41(0,"div",0)(1,"mat-toolbar")(2,"span",1),e.EFF(3,"Material Receipt Note Entry"),e.k0s()(),e.nrm(4,"div",2),e.j41(5,"form",3),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(6,"div",4)(7,"mat-form-field")(8,"mat-label"),e.EFF(9,"Purchase OrderNo"),e.k0s(),e.nrm(10,"input",5),e.DNE(11,se,2,0,"mat-error",6),e.k0s(),e.j41(12,"button",7),e.bIt("click",function(){return o.onShow()}),e.EFF(13,"Show"),e.k0s()(),e.nrm(14,"div",2),e.j41(15,"div",4)(16,"mat-form-field")(17,"mat-label"),e.EFF(18,"Select Receiver"),e.k0s(),e.j41(19,"mat-select",8),e.DNE(20,me,2,2,"mat-option",9),e.k0s(),e.DNE(21,le,2,0,"mat-error",6),e.k0s(),e.j41(22,"mat-form-field")(23,"mat-label"),e.EFF(24,"Select Shipper"),e.k0s(),e.j41(25,"mat-select",10),e.DNE(26,ce,2,2,"mat-option",9),e.k0s(),e.DNE(27,ue,2,0,"mat-error",6),e.k0s(),e.j41(28,"mat-form-field")(29,"mat-label"),e.EFF(30,"Remark"),e.k0s(),e.nrm(31,"textarea",11),e.k0s()(),e.nrm(32,"div",2),e.j41(33,"div",12)(34,"mat-toolbar")(35,"span",1),e.EFF(36,"Enter Item Receive Detail"),e.k0s()(),e.nrm(37,"div",2),e.DNE(38,pe,25,2,"div",13),e.k0s(),e.nrm(39,"br"),e.j41(40,"button",14),e.bIt("click",function(){return o.onSubmit()}),e.EFF(41,"Submit"),e.k0s()()()),2&n&&(e.R7$(5),e.Y8G("formGroup",o.formGroup),e.R7$(6),e.Y8G("ngIf",null==o.formGroup.controls.billNo.errors?null:o.formGroup.controls.billNo.errors.required),e.R7$(9),e.Y8G("ngForOf",o.receivers),e.R7$(1),e.Y8G("ngIf",null==o.formGroup.controls.receiverCode.errors?null:o.formGroup.controls.receiverCode.errors.required),e.R7$(5),e.Y8G("ngForOf",o.shippers),e.R7$(1),e.Y8G("ngIf",null==o.formGroup.controls.shipperCode.errors?null:o.formGroup.controls.shipperCode.errors.required),e.R7$(11),e.Y8G("ngForOf",o.f.purchaseOrderItems.controls))},dependencies:[d.Sq,d.bT,C.wT,k.$z,F.fg,u.rl,u.nJ,u.TL,R.VO,_.KQ,a.qT,a.me,a.BC,a.cb,a.tU,a.j4,a.JD,a.$R,a.v8],styles:[".example-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] + mat-form-field[_ngcontent-%COMP%]{margin-left:8px}"]})}}return r})()},{path:"poreturn",component:(()=>{class r{constructor(t,n,o){this.formBuilder=t,this.service=n,this.route=o,this._snackBar=(0,e.WQX)(b.UG),this.createForm(),this.GetUsers(),this.GetShippers()}createForm(){this.formGroup=this.formBuilder.group({billNo:["",a.k0.required],authorizedBy:["",a.k0.required],shipperCode:["",a.k0.required],receiptNo:["",a.k0.required],authorizedDate:["",a.k0.required],remark:[""],purchaseOrderItems:this.formBuilder.array([this.initItem()])})}openSnackBar(t,n){this._snackBar.open(t,n)}initItem(){return this.formBuilder.group({itemcode:[""],itemName:[""],quantity:[""],alreadyReceived:[""],alreadyReturned:[""],returnReason:[""],qtyReturned:["",a.k0.required]})}GetShippers(){this.service.GetShippers().subscribe(t=>{this.shippers=t})}GetUsers(){this.service.GetUsers().subscribe(t=>{this.receivers=t})}bindPOForID(t){t&&this.service.GetPOReturnByBillNo(t).subscribe(n=>{if(0==n.length)return void this.openSnackBar("Invalid PO No","Close");const o=n.map(m=>this.formBuilder.group({itemcode:[m.itemcode,a.k0.required],itemName:[m.itemName],quantity:[m.quantity],alreadyReceived:[m.alreadyReceived],alreadyReturned:[m.alreadyReturned],returnReason:[m.returnReason],qtyReturned:[0]})),s=this.formBuilder.array(o);this.formGroup.setControl("purchaseOrderItems",s)})}onSubmit(){console.log(JSON.stringify(this.formGroup.value)),this.service.UpdateProductReturn(this.formGroup.value).subscribe(t=>{this.formGroup.reset(),this.formGroup.controls.purchaseOrderItems.clear(),this.openSnackBar("Product Returned","Close")})}onShow(){let t=this.formGroup.controls.billNo.value;""!=t?this.bindPOForID(t):this.openSnackBar("Please Enter Purchase Order No","Close")}get f(){return this.formGroup.controls}setBalance(t,n){const o=this.formGroup.controls.purchaseOrderItems;var s=o.at(n).get("alreadyReturned").value,m=o.at(n).get("alreadyReceived").value;let c=Number(m)-Number(s);return Number(t.value)>0&&Number(t.value)>Number(c)&&(this.openSnackBar("Return Qty cannot greater then "+c,"Close"),o.at(n).get("qtyReturned").setValue(0)),!1}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(a.ok),e.rXU(v.z),e.rXU(f.nX))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-purchase-return"]],decls:57,vars:11,consts:[["novalidate","",1,"container"],[1,"fill-remaining-space"],[2,"padding-top","10px"],[3,"formGroup","ngSubmit"],[1,"example-container"],["matInput","","maxlength","10","formControlName","billNo","placeholder","Purchase Order"],[4,"ngIf"],["mat-stroked-button","","type","button",2,"margin-left","20px",3,"click"],["formControlName","authorizedBy"],[3,"value",4,"ngFor","ngForOf"],["formControlName","shipperCode"],["matInput","","maxlength","10","formControlName","receiptNo"],["matIconSuffix","",3,"for"],["matInput","","formControlName","authorizedDate",3,"matDatepicker"],["picker",""],["matInput","","formControlName","remark"],["formArrayName","purchaseOrderItems",1,"example-container"],["class","example-container",4,"ngFor","ngForOf"],["mat-stroked-button","","type","button",3,"click"],[3,"value"],[3,"formGroupName"],[2,"width","140px"],["matInput","","type","text","readonly","","formControlName","itemcode"],["matInput","","type","text","readonly","","formControlName","itemName"],["matInput","","type","text","readonly","","formControlName","quantity",2,"width","80px"],["matInput","","type","text","readonly","","formControlName","alreadyReceived",2,"width","80px"],["matInput","","type","text","readonly","","formControlName","alreadyReturned",2,"width","80px"],["matInput","","type","text","formControlName","qtyReturned",2,"width","80px",3,"change"],[3,"hidden"],["formControlName","returnReason"],["value","Fungas"],["value","Expiry"],["value","Break"]],template:function(n,o){if(1&n&&(e.j41(0,"div",0)(1,"mat-toolbar")(2,"span",1),e.EFF(3,"Purchase Order Return"),e.k0s()(),e.nrm(4,"div",2),e.j41(5,"form",3),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(6,"div",4)(7,"mat-form-field")(8,"mat-label"),e.EFF(9,"Purchase OrderNo"),e.k0s(),e.nrm(10,"input",5),e.DNE(11,fe,2,0,"mat-error",6),e.k0s(),e.j41(12,"button",7),e.bIt("click",function(){return o.onShow()}),e.EFF(13,"Show"),e.k0s()(),e.nrm(14,"div",2),e.j41(15,"div",4)(16,"mat-form-field")(17,"mat-label"),e.EFF(18,"Select Authorized By"),e.k0s(),e.j41(19,"mat-select",8),e.DNE(20,he,2,2,"mat-option",9),e.k0s(),e.DNE(21,ke,2,0,"mat-error",6),e.k0s(),e.j41(22,"mat-form-field")(23,"mat-label"),e.EFF(24,"Select Shipper"),e.k0s(),e.j41(25,"mat-select",10),e.DNE(26,ve,2,2,"mat-option",9),e.k0s(),e.DNE(27,Fe,2,0,"mat-error",6),e.k0s(),e.j41(28,"mat-form-field")(29,"mat-label"),e.EFF(30,"Enter Receipt No"),e.k0s(),e.nrm(31,"input",11),e.DNE(32,_e,2,0,"mat-error",6),e.k0s(),e.j41(33,"mat-form-field")(34,"mat-label"),e.EFF(35,"Authorized Date"),e.k0s(),e.nrm(36,"mat-datepicker-toggle",12)(37,"input",13)(38,"mat-datepicker",null,14),e.DNE(40,be,2,0,"mat-error",6),e.k0s()(),e.nrm(41,"div",2),e.j41(42,"div",4)(43,"mat-form-field")(44,"mat-label"),e.EFF(45,"Remark"),e.k0s(),e.nrm(46,"textarea",15),e.k0s()(),e.nrm(47,"div",2),e.j41(48,"div",16)(49,"mat-toolbar")(50,"span",1),e.EFF(51,"Enter Item Return Detail"),e.k0s()(),e.nrm(52,"div",2),e.DNE(53,Ce,41,3,"div",17),e.k0s(),e.nrm(54,"br"),e.j41(55,"button",18),e.bIt("click",function(){return o.onSubmit()}),e.EFF(56,"Submit"),e.k0s()()()),2&n){const s=e.sdS(39);e.R7$(5),e.Y8G("formGroup",o.formGroup),e.R7$(6),e.Y8G("ngIf",null==o.formGroup.controls.billNo.errors?null:o.formGroup.controls.billNo.errors.required),e.R7$(9),e.Y8G("ngForOf",o.receivers),e.R7$(1),e.Y8G("ngIf",null==o.formGroup.controls.authorizedBy.errors?null:o.formGroup.controls.authorizedBy.errors.required),e.R7$(5),e.Y8G("ngForOf",o.shippers),e.R7$(1),e.Y8G("ngIf",null==o.formGroup.controls.shipperCode.errors?null:o.formGroup.controls.shipperCode.errors.required),e.R7$(5),e.Y8G("ngIf",null==o.formGroup.controls.receiptNo.errors?null:o.formGroup.controls.receiptNo.errors.required),e.R7$(4),e.Y8G("for",s),e.R7$(1),e.Y8G("matDatepicker",s),e.R7$(3),e.Y8G("ngIf",null==o.formGroup.controls.authorizedDate.errors?null:o.formGroup.controls.authorizedDate.errors.required),e.R7$(13),e.Y8G("ngForOf",o.f.purchaseOrderItems.controls)}},dependencies:[d.Sq,d.bT,C.wT,k.$z,F.fg,u.rl,u.nJ,u.TL,u.yw,R.VO,_.KQ,h.Vh,h.bZ,h.bU,a.qT,a.me,a.BC,a.cb,a.tU,a.j4,a.JD,a.$R,a.v8],styles:[".example-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] + mat-form-field[_ngcontent-%COMP%]{margin-left:8px}"]})}}return r})()}];let Ne=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({imports:[f.iI.forChild(Re),f.iI]})}}return r})();var ye=l(1472),Ge=l(1626);let Ee=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({imports:[d.MD,Ne,ye.G,a.X1,a.YN,Ge.q1]})}}return r})()}}]);