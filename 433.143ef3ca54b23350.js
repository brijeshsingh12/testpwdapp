"use strict";(self.webpackChunkInventoryAPPN=self.webpackChunkInventoryAPPN||[]).push([[433],{5433:(zt,C,s)=>{s.r(C),s.d(C,{SaleModule:()=>wt});var c=s(177),D=s(7534),i=s(9417),S=s(1626),k=s(5743),t=s(7705),v=s(5416),y=s(3574),b=s(6600),h=s(8834),E=s(9213),_=s(9631),p=s(6467),G=s(2798),F=s(5911),d=s(5084);function O(r,a){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Select Delivery Date"),t.k0s())}function $(r,a){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Enter Remark"),t.k0s())}function T(r,a){if(1&r&&(t.j41(0,"mat-option",24),t.EFF(1),t.k0s()),2&r){const e=a.$implicit;t.Y8G("value",e.id),t.R7$(1),t.JRh(e.materialName)}}function B(r,a){if(1&r){const e=t.RV6();t.j41(0,"button",25),t.bIt("click",function(){t.eBV(e);const o=t.XpG().index,l=t.XpG(2);return t.Njj(l.removeItem(o))}),t.j41(1,"mat-icon"),t.EFF(2,"delete"),t.k0s()()}}function U(r,a){if(1&r&&(t.j41(0,"div",4)(1,"div",17)(2,"mat-form-field")(3,"mat-label"),t.EFF(4,"Material Name"),t.k0s(),t.j41(5,"mat-select",18),t.DNE(6,T,2,2,"mat-option",19),t.k0s(),t.j41(7,"mat-error",20),t.EFF(8," Material is required "),t.k0s()(),t.nrm(9,"div",2),t.j41(10,"mat-form-field")(11,"mat-label"),t.EFF(12,"Order Quantity"),t.k0s(),t.nrm(13,"input",21),t.j41(14,"mat-error",20),t.EFF(15," Enter Order Quantity "),t.k0s()(),t.nrm(16,"div",2),t.j41(17,"mat-form-field")(18,"mat-label"),t.EFF(19,"Deliver Quantity"),t.k0s(),t.nrm(20,"input",22),t.j41(21,"mat-error",20),t.EFF(22," Enter Quantity "),t.k0s()(),t.nrm(23,"div",2),t.DNE(24,B,3,0,"button",23),t.k0s(),t.nrm(25,"div",2),t.k0s()),2&r){const e=a.index,n=t.XpG(2);t.R7$(1),t.Y8G("formGroupName",e),t.R7$(5),t.Y8G("ngForOf",n.materials),t.R7$(1),t.Y8G("hidden",n.f.itemDtl.controls[e].controls.materialId.valid),t.R7$(7),t.Y8G("hidden",n.f.itemDtl.controls[e].controls.orderQty.valid),t.R7$(7),t.Y8G("hidden",n.f.itemDtl.controls[e].controls.deliverQty.valid),t.R7$(3),t.Y8G("ngIf",n.f.itemDtl.controls.length>1)}}function Y(r,a){if(1&r){const e=t.RV6();t.j41(0,"div",15)(1,"mat-toolbar")(2,"span",1),t.EFF(3,"Enter Material Details:"),t.k0s()(),t.j41(4,"div",6)(5,"button",7),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.addItem())}),t.EFF(6,"Add New Item"),t.k0s()(),t.nrm(7,"div",2),t.DNE(8,U,26,6,"div",16),t.k0s()}if(2&r){const e=t.XpG();t.R7$(8),t.Y8G("ngForOf",e.f.itemDtl.controls)}}let R=(()=>{class r{constructor(e,n,o){this.formBuilder=e,this.service=n,this.route=o,this._snackBar=(0,t.WQX)(v.UG)}ngOnInit(){this.createForm(),this.GetMaterials()}GetMaterials(){this.service.GetMaterials().subscribe(e=>{this.materials=e})}show(){this.selectRequestNo=this.formGroup.controls.requestNo.value,this.selectRequestNo&&this.service.GetMaterialRequestByOrderNo(this.selectRequestNo).subscribe(e=>{if(0==e.length)return void this.openSnackBar("Invalid RequestNo","Close");const n=e.map(l=>this.formBuilder.group({materialId:[{value:l.materialId,disabled:!0}],materialName:[{value:l.materialName,disabled:!0}],orderQty:[{value:l.orderQty,disabled:!0}],deliverQty:[l.alreadyIssuedQty]})),o=this.formBuilder.array(n);this.formGroup.setControl("itemDtl",o)})}createForm(){this.formGroup=this.formBuilder.group({requestNo:[null,i.k0.required],deliveryDate:[null,i.k0.required],remark:[null,i.k0.required],itemDtl:this.formBuilder.array([this.initItem()])})}initItem(){return this.formBuilder.group({materialId:["",i.k0.required],materialName:["",i.k0.required],orderQty:["",i.k0.required],deliverQty:["",i.k0.required]})}addItem(){this.formGroup.controls.itemDtl.push(this.initItem())}removeItem(e){this.formGroup.controls.itemDtl.removeAt(e)}get f(){return this.formGroup.controls}onSubmit(){this.service.SaveMaterialIssue(this.formGroup.getRawValue()).subscribe(n=>{this.openSnackBar("Data Saved","Close")}),this.formGroup.reset(),this.formGroup.controls.itemDtl.clear()}openSnackBar(e,n){this._snackBar.open(e,n)}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(i.ok),t.rXU(y.b),t.rXU(k.nX))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-sale-order"]],decls:37,vars:7,consts:[["novalidate","",1,"container"],[1,"fill-remaining-space"],[2,"padding-top","10px"],[3,"formGroup","ngSubmit"],[1,"example-container"],["matInput","","maxlength","10","formControlName","requestNo"],[1,"example-button-row"],["mat-stroked-button","","type","button",3,"click"],["matIconSuffix","",3,"for"],["matInput","","formControlName","deliveryDate",3,"matDatepicker"],["picker",""],[4,"ngIf"],["matInput","","formControlName","remark",2,"width","600px","height","100px"],["class","example-container","formArrayName","itemDtl",4,"ngIf"],["mat-stroked-button","","type","button",3,"disabled","click"],["formArrayName","itemDtl",1,"example-container"],["class","example-container",4,"ngFor","ngForOf"],[3,"formGroupName"],["formControlName","materialId","readonly","",2,"background-color","beige","color","black"],["readonly","",3,"value",4,"ngFor","ngForOf"],[3,"hidden"],["matInput","","type","text","readonly","","formControlName","orderQty",2,"background-color","beige","color","black"],["matInput","","type","text","formControlName","deliverQty"],["mat-mini-fab","","aria-label","Delete",3,"click",4,"ngIf"],["readonly","",3,"value"],["mat-mini-fab","","aria-label","Delete",3,"click"]],template:function(n,o){if(1&n&&(t.j41(0,"div",0)(1,"mat-toolbar")(2,"span",1),t.EFF(3,"Material Issue by Site"),t.k0s()(),t.nrm(4,"div",2),t.j41(5,"form",3),t.bIt("ngSubmit",function(){return o.onSubmit()}),t.j41(6,"div",4)(7,"mat-form-field")(8,"mat-label"),t.EFF(9,"Request No"),t.k0s(),t.nrm(10,"input",5),t.k0s(),t.j41(11,"div",6)(12,"button",7),t.bIt("click",function(){return o.show()}),t.EFF(13,"Show Data"),t.k0s()(),t.nrm(14,"div",2),t.j41(15,"mat-form-field")(16,"mat-label"),t.EFF(17,"Delivery Date"),t.k0s(),t.nrm(18,"mat-datepicker-toggle",8)(19,"input",9)(20,"mat-datepicker",null,10),t.DNE(22,O,2,0,"mat-error",11),t.k0s(),t.nrm(23,"div",2),t.k0s(),t.nrm(24,"div",2),t.j41(25,"div",4)(26,"mat-form-field")(27,"mat-label"),t.EFF(28,"Remark"),t.k0s(),t.nrm(29,"textarea",12),t.DNE(30,$,2,0,"mat-error",11),t.k0s(),t.nrm(31,"div",2),t.k0s(),t.DNE(32,Y,9,1,"div",13),t.nrm(33,"br"),t.j41(34,"div",6)(35,"button",14),t.bIt("click",function(){return o.onSubmit()}),t.EFF(36,"Submit"),t.k0s()()()()),2&n){const l=t.sdS(21);t.R7$(5),t.Y8G("formGroup",o.formGroup),t.R7$(13),t.Y8G("for",l),t.R7$(1),t.Y8G("matDatepicker",l),t.R7$(3),t.Y8G("ngIf",null==o.formGroup.controls.deliveryDate.errors?null:o.formGroup.controls.deliveryDate.errors.required),t.R7$(8),t.Y8G("ngIf",null==o.formGroup.controls.remark.errors?null:o.formGroup.controls.remark.errors.required),t.R7$(2),t.Y8G("ngIf",o.selectRequestNo),t.R7$(3),t.Y8G("disabled",!o.formGroup.valid)}},dependencies:[c.Sq,c.bT,b.wT,h.$z,h.$0,E.An,_.fg,p.rl,p.nJ,p.TL,p.yw,G.VO,F.KQ,d.Vh,d.bZ,d.bU,i.qT,i.me,i.BC,i.cb,i.tU,i.j4,i.JD,i.$R,i.v8],styles:[".example-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] + mat-form-field[_ngcontent-%COMP%]{margin-left:8px}"]})}}return r})();var I=s(6695),N=s(2042),u=s(9159),x=s(5312);let g=(()=>{class r{constructor(e){this.http=e,this.rootAPIPath=x.c.baseApiUrl}GetSOList(){return this.http.get(`${this.rootAPIPath}/Sale/SaleOrderList`)}GetCustomers(){return this.http.get(`${this.rootAPIPath}/Sale/GetCustomers`)}GetShippers(){return this.http.get(`${this.rootAPIPath}/Sale/GetShippers`)}GetUsers(){return this.http.get(`${this.rootAPIPath}/Sale/GetUsers`)}GetSuppliers(){return this.http.get(`${this.rootAPIPath}/Sale/GetSuppliers`)}GetSOByBillNo(e){return this.http.get(`${this.rootAPIPath}/Sale/GetSOByBillNo/${e}`)}GetSODetailsForShipped(e){return this.http.get(`${this.rootAPIPath}/Sale/GetSODetailsForShipped/${e}`)}GetSOReturnByBillNo(e){return this.http.get(`${this.rootAPIPath}/Sale/GetSOReturn/${e}`)}saveSaleOrder(e){const n={headers:new S.Lr({"Content-Type":"application/json"})};return this.http.post(`${this.rootAPIPath}/Sale/SaveOrder`,JSON.stringify(e),n)}UpdateSaleOrder(e){const n={headers:new S.Lr({"Content-Type":"application/json"})};return this.http.post(`${this.rootAPIPath}/Sale/UpdateOrder`,JSON.stringify(e),n)}DeleteSaleOrder(e){return this.http.delete(`${this.rootAPIPath}/Sale/DeleteSaleOrder/${e}`)}generateInvoicePdf(e){return this.http.post(`${this.rootAPIPath}/Sale/SOReport_PDF`,e,{responseType:"blob"})}UpdateProductShipped(e){const n={headers:new S.Lr({"Content-Type":"application/json"})};return this.http.post(`${this.rootAPIPath}/Sale/SaveSOShipped`,JSON.stringify(e),n)}UpdateProductReturn(e){const n={headers:new S.Lr({"Content-Type":"application/json"})};return this.http.post(`${this.rootAPIPath}/Sale/SaveSOReturn`,JSON.stringify(e),n)}static{this.\u0275fac=function(n){return new(n||r)(t.KVO(S.Qq))}}static{this.\u0275prov=t.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var q=s(1802),M=s(5351),P=s(2232),Q=s(4823);function A(r,a){1&r&&(t.j41(0,"mat-header-cell",22),t.EFF(1,"SO Number"),t.k0s())}function X(r,a){if(1&r&&(t.j41(0,"mat-cell"),t.EFF(1),t.k0s()),2&r){const e=a.$implicit;t.R7$(1),t.SpI(" ",e.billNo," ")}}function L(r,a){1&r&&(t.j41(0,"mat-header-cell",22),t.EFF(1,"SO Date"),t.k0s())}function V(r,a){if(1&r&&(t.j41(0,"mat-cell"),t.EFF(1),t.k0s()),2&r){const e=a.$implicit;t.R7$(1),t.SpI(" ",e.soDate," ")}}function w(r,a){1&r&&(t.j41(0,"mat-header-cell",22),t.EFF(1,"Customer"),t.k0s())}function z(r,a){if(1&r&&(t.j41(0,"mat-cell"),t.EFF(1),t.k0s()),2&r){const e=a.$implicit;t.R7$(1),t.SpI(" ",e.partyName," ")}}function J(r,a){1&r&&(t.j41(0,"mat-header-cell",22),t.EFF(1,"Delivery Date"),t.k0s())}function W(r,a){if(1&r&&(t.j41(0,"mat-cell"),t.EFF(1),t.k0s()),2&r){const e=a.$implicit;t.R7$(1),t.SpI(" ",e.deliveryDate," ")}}function K(r,a){1&r&&(t.j41(0,"mat-header-cell",22),t.EFF(1,"delivery Address"),t.k0s())}function Z(r,a){if(1&r&&(t.j41(0,"mat-cell"),t.EFF(1),t.k0s()),2&r){const e=a.$implicit;t.R7$(1),t.SpI(" ",e.deliveryTo," ")}}function H(r,a){1&r&&(t.j41(0,"mat-header-cell",22),t.EFF(1,"Remark"),t.k0s())}function tt(r,a){if(1&r&&(t.j41(0,"mat-cell"),t.EFF(1),t.k0s()),2&r){const e=a.$implicit;t.R7$(1),t.SpI(" ",e.remark," ")}}function et(r,a){1&r&&(t.j41(0,"th",23),t.EFF(1," Edit "),t.k0s())}function rt(r,a){if(1&r){const e=t.RV6();t.j41(0,"td",24)(1,"button",25),t.bIt("click",function(){const l=t.eBV(e).$implicit,m=t.XpG();return t.Njj(m.Edit(l.billNo))}),t.EFF(2,"Edit"),t.k0s()()}}function ot(r,a){1&r&&(t.j41(0,"th",23),t.EFF(1," Remove "),t.k0s())}function nt(r,a){if(1&r){const e=t.RV6();t.j41(0,"td",24)(1,"button",26),t.bIt("click",function(){const l=t.eBV(e).$implicit,m=t.XpG();return t.Njj(m.RemoveSaleOrder(l.billNo))}),t.EFF(2,"Remove"),t.k0s()()}}function it(r,a){1&r&&t.nrm(0,"mat-header-row")}function at(r,a){1&r&&t.nrm(0,"mat-row")}const lt=function(){return[5,10,25,100]};let st=(()=>{class r{constructor(e,n,o,l,m){this._saleService=e,this.excelService=n,this.dialog=o,this.snackBarService=l,this.router=m,this.SOList=[],this.displayedColumns=["billNo","soDate","partyName","deliveryDate","deliveryTo","remark","Edit","Remove"]}ngOnInit(){this.bindSaleOrders()}bindSaleOrders(){this._saleService.GetSOList().subscribe(e=>{null!=e&&(this.SOList=e,this.dataSource=new u.I6(e),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)})}applyFilter(e){this.dataSource.filter=e.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}Edit(e){this.router.navigate(["/sale-order",e])}RemoveSaleOrder(e){this._saleService.DeleteSaleOrder(e).subscribe(n=>{n?(this.bindSaleOrders(),this.snackBarService.show("Sale Order Deleted","success")):this.snackBarService.show("Error Throwing!","error")})}exportAsXLSX(){this.excelService.exportAsExcelFile(this.SOList,"sample")}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(g),t.rXU(q.J),t.rXU(M.bZ),t.rXU(P.v),t.rXU(k.Ix))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-sale-list"]],viewQuery:function(n,o){if(1&n&&(t.GBs(I.iy,5),t.GBs(N.B4,5)),2&n){let l;t.mGM(l=t.lsd())&&(o.paginator=l.first),t.mGM(l=t.lsd())&&(o.sort=l.first)}},decls:38,vars:5,consts:[[1,"fill-remaining-space"],[2,"padding-top","10px"],[2,"float","left"],["matInput","","placeholder","Search",3,"keyup"],[1,"example-container","mat-elevation-z8"],["mat-stroked-button","","color","primary",3,"click"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","billNo"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","soDate"],["matColumnDef","partyName"],["matColumnDef","deliveryDate"],["matColumnDef","deliveryTo"],["matColumnDef","remark"],["matColumnDef","Edit"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Remove"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions"],["mat-sort-header",""],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-raised-button","","color","warn","matTooltip","Edit",3,"click"],["mat-raised-button","","color","warn","matTooltip","Remove",3,"click"]],template:function(n,o){1&n&&(t.j41(0,"mat-toolbar")(1,"span",0),t.EFF(2,"Sale Order List"),t.k0s()(),t.nrm(3,"div",1),t.j41(4,"mat-form-field",2)(5,"input",3),t.bIt("keyup",function(m){return o.applyFilter(m.target.value)}),t.k0s()(),t.j41(6,"div",4)(7,"button",5),t.bIt("click",function(){return o.exportAsXLSX()}),t.EFF(8,"Download Excel"),t.k0s(),t.nrm(9,"div",1),t.j41(10,"table",6),t.qex(11,7),t.DNE(12,A,2,0,"mat-header-cell",8),t.DNE(13,X,2,1,"mat-cell",9),t.bVm(),t.qex(14,10),t.DNE(15,L,2,0,"mat-header-cell",8),t.DNE(16,V,2,1,"mat-cell",9),t.bVm(),t.qex(17,11),t.DNE(18,w,2,0,"mat-header-cell",8),t.DNE(19,z,2,1,"mat-cell",9),t.bVm(),t.qex(20,12),t.DNE(21,J,2,0,"mat-header-cell",8),t.DNE(22,W,2,1,"mat-cell",9),t.bVm(),t.qex(23,13),t.DNE(24,K,2,0,"mat-header-cell",8),t.DNE(25,Z,2,1,"mat-cell",9),t.bVm(),t.qex(26,14),t.DNE(27,H,2,0,"mat-header-cell",8),t.DNE(28,tt,2,1,"mat-cell",9),t.bVm(),t.qex(29,15),t.DNE(30,et,2,0,"th",16),t.DNE(31,rt,3,0,"td",17),t.bVm(),t.qex(32,18),t.DNE(33,ot,2,0,"th",16),t.DNE(34,nt,3,0,"td",17),t.bVm(),t.DNE(35,it,1,0,"mat-header-row",19),t.DNE(36,at,1,0,"mat-row",20),t.k0s(),t.nrm(37,"mat-paginator",21),t.k0s()),2&n&&(t.R7$(10),t.Y8G("dataSource",o.dataSource),t.R7$(25),t.Y8G("matHeaderRowDef",o.displayedColumns),t.R7$(1),t.Y8G("matRowDefColumns",o.displayedColumns),t.R7$(1),t.Y8G("pageSizeOptions",t.lJ4(4,lt)))},dependencies:[h.$z,_.fg,p.rl,I.iy,N.B4,N.aE,u.Zl,u.tL,u.ji,u.cC,u.YV,u.iL,u.KS,u.$R,u.YZ,u.NB,F.KQ,Q.oV]})}}return r})();var j=s(1322);function mt(r,a){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Enter PO No"),t.k0s())}function pt(r,a){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Enter Receipt No"),t.k0s())}function ct(r,a){if(1&r&&(t.j41(0,"mat-option",16),t.EFF(1),t.k0s()),2&r){const e=a.$implicit;t.Y8G("value",e.id.toString()),t.R7$(1),t.JRh(e.name)}}function ut(r,a){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Select User"),t.k0s())}function dt(r,a){if(1&r&&(t.j41(0,"mat-option",16),t.EFF(1),t.k0s()),2&r){const e=a.$implicit;t.Y8G("value",e.shipperCode),t.R7$(1),t.JRh(e.shipperName)}}function ft(r,a){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Select Shipper"),t.k0s())}function ht(r,a){if(1&r){const e=t.RV6();t.j41(0,"div",4)(1,"div",17)(2,"mat-form-field")(3,"mat-label"),t.EFF(4,"Item Code"),t.k0s(),t.nrm(5,"input",18),t.k0s(),t.j41(6,"mat-form-field")(7,"mat-label"),t.EFF(8,"Item Name"),t.k0s(),t.nrm(9,"input",19),t.k0s(),t.j41(10,"mat-form-field")(11,"mat-label"),t.EFF(12,"Order Qty"),t.k0s(),t.nrm(13,"input",20),t.k0s(),t.j41(14,"mat-form-field")(15,"mat-label"),t.EFF(16,"Already Received Qty"),t.k0s(),t.nrm(17,"input",21),t.k0s(),t.j41(18,"mat-form-field")(19,"mat-label"),t.EFF(20,"Receive Qty."),t.k0s(),t.j41(21,"input",22),t.bIt("change",function(o){const m=t.eBV(e).index,f=t.XpG();return t.Njj(f.setBalance(o.target,m))}),t.k0s(),t.j41(22,"mat-error",23),t.EFF(23," Enter Shipped Quantity "),t.k0s()()(),t.nrm(24,"div",2),t.k0s()}if(2&r){const e=a.index,n=t.XpG();t.R7$(1),t.Y8G("formGroupName",e),t.R7$(21),t.Y8G("hidden",n.f.saleOrderItems.controls[e].controls.qtyShipped.valid)}}let kt=(()=>{class r{constructor(e,n,o,l){this.formBuilder=e,this.service=n,this.purchaseService=o,this.route=l,this._snackBar=(0,t.WQX)(v.UG),this.createForm(),this.GetUsers(),this.GetShippers()}createForm(){this.formGroup=this.formBuilder.group({billNo:["",i.k0.required],agentCode:["",i.k0.required],shipperCode:["",i.k0.required],receiptNo:["",i.k0.required],remark:[""],saleOrderItems:this.formBuilder.array([this.initItem()])})}initItem(){return this.formBuilder.group({itemcode:[""],itemName:[""],quantity:[""],alreadyShipped:[""],qtyShipped:["",i.k0.required]})}GetShippers(){this.purchaseService.GetShippers().subscribe(e=>{this.shippers=e})}GetUsers(){this.purchaseService.GetUsers().subscribe(e=>{this.users=e})}bindSOForID(e){e&&this.service.GetSODetailsForShipped(e).subscribe(n=>{const o=n.map(m=>this.formBuilder.group({itemcode:[m.itemcode,i.k0.required],itemName:[m.itemName],quantity:[m.quantity],qtyShipped:[0],alreadyShipped:[m.alreadyShipped]})),l=this.formBuilder.array(o);this.formGroup.setControl("saleOrderItems",l)})}onSubmit(){this.service.UpdateProductShipped(this.formGroup.value).subscribe(e=>{this.formGroup.reset(),this.formGroup.controls.saleOrderItems.clear(),this.openSnackBar("Product Shipped","Close")})}onShow(){let e=this.formGroup.controls.billNo.value;""!=e?this.bindSOForID(e):this.openSnackBar("Please Enter Sale Order No","Close")}get f(){return this.formGroup.controls}setBalance(e,n){const o=this.formGroup.controls.saleOrderItems;var l=o.at(n).get("quantity").value,m=o.at(n).get("alreadyShipped").value;let f=Number(l)-Number(m);return Number(e.value)>0&&Number(e.value)>Number(f)&&(this.openSnackBar("Shipped Qty cannot greater then "+f,"Close"),o.at(n).get("qtyShipped").setValue(0)),!1}openSnackBar(e,n){this._snackBar.open(e,n)}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(i.ok),t.rXU(g),t.rXU(j.z),t.rXU(k.nX))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-product-shipping"]],decls:47,vars:8,consts:[["novalidate","",1,"container"],[1,"fill-remaining-space"],[2,"padding-top","10px"],[3,"formGroup","ngSubmit"],[1,"example-container"],["matInput","","maxlength","10","formControlName","billNo"],[4,"ngIf"],["mat-stroked-button","","type","button",2,"margin-left","20px",3,"click"],["matInput","","maxlength","10","formControlName","receiptNo"],["formControlName","agentCode"],[3,"value",4,"ngFor","ngForOf"],["formControlName","shipperCode"],["matInput","","formControlName","remark",2,"width","600px"],["formArrayName","saleOrderItems",1,"example-container"],["class","example-container",4,"ngFor","ngForOf"],["mat-stroked-button","","type","button",3,"click"],[3,"value"],[3,"formGroupName"],["matInput","","type","text","readonly","","formControlName","itemcode"],["matInput","","type","text","readonly","","formControlName","itemName"],["matInput","","type","text","readonly","","formControlName","quantity"],["matInput","","type","text","readonly","","formControlName","alreadyShipped"],["matInput","","type","text","formControlName","qtyShipped",3,"change"],[3,"hidden"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"mat-toolbar")(2,"span",1),t.EFF(3,"Product Shipping"),t.k0s()(),t.nrm(4,"div",2),t.j41(5,"form",3),t.bIt("ngSubmit",function(){return o.onSubmit()}),t.j41(6,"div",4)(7,"mat-form-field")(8,"mat-label"),t.EFF(9,"Sale OrderNo"),t.k0s(),t.nrm(10,"input",5),t.DNE(11,mt,2,0,"mat-error",6),t.k0s(),t.j41(12,"button",7),t.bIt("click",function(){return o.onShow()}),t.EFF(13,"Show"),t.k0s()(),t.nrm(14,"div",2),t.j41(15,"div",4)(16,"mat-form-field")(17,"mat-label"),t.EFF(18,"Receipt No"),t.k0s(),t.nrm(19,"input",8),t.DNE(20,pt,2,0,"mat-error",6),t.k0s(),t.j41(21,"mat-form-field")(22,"mat-label"),t.EFF(23,"Select User"),t.k0s(),t.j41(24,"mat-select",9),t.DNE(25,ct,2,2,"mat-option",10),t.k0s(),t.DNE(26,ut,2,0,"mat-error",6),t.k0s(),t.j41(27,"mat-form-field")(28,"mat-label"),t.EFF(29,"Select Shipper"),t.k0s(),t.j41(30,"mat-select",11),t.DNE(31,dt,2,2,"mat-option",10),t.k0s(),t.DNE(32,ft,2,0,"mat-error",6),t.k0s(),t.j41(33,"mat-form-field")(34,"mat-label"),t.EFF(35,"Remark"),t.k0s(),t.nrm(36,"textarea",12),t.k0s()(),t.nrm(37,"div",2),t.j41(38,"div",13)(39,"mat-toolbar")(40,"span",1),t.EFF(41,"Enter Item Shipped Detail"),t.k0s()(),t.nrm(42,"div",2),t.DNE(43,ht,25,2,"div",14),t.k0s(),t.nrm(44,"br"),t.j41(45,"button",15),t.bIt("click",function(){return o.onSubmit()}),t.EFF(46,"Submit"),t.k0s()()()),2&n&&(t.R7$(5),t.Y8G("formGroup",o.formGroup),t.R7$(6),t.Y8G("ngIf",null==o.formGroup.controls.billNo.errors?null:o.formGroup.controls.billNo.errors.required),t.R7$(9),t.Y8G("ngIf",null==o.formGroup.controls.receiptNo.errors?null:o.formGroup.controls.receiptNo.errors.required),t.R7$(5),t.Y8G("ngForOf",o.users),t.R7$(1),t.Y8G("ngIf",null==o.formGroup.controls.agentCode.errors?null:o.formGroup.controls.agentCode.errors.required),t.R7$(5),t.Y8G("ngForOf",o.shippers),t.R7$(1),t.Y8G("ngIf",null==o.formGroup.controls.shipperCode.errors?null:o.formGroup.controls.shipperCode.errors.required),t.R7$(11),t.Y8G("ngForOf",o.f.saleOrderItems.controls))},dependencies:[c.Sq,c.bT,b.wT,h.$z,_.fg,p.rl,p.nJ,p.TL,G.VO,F.KQ,i.qT,i.me,i.BC,i.cb,i.tU,i.j4,i.JD,i.$R,i.v8],styles:[".example-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] + mat-form-field[_ngcontent-%COMP%]{margin-left:8px}"]})}}return r})();function St(r,a){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Enter SO No"),t.k0s())}function _t(r,a){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Enter Receipt No"),t.k0s())}function Ft(r,a){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Enter Authorize No"),t.k0s())}function vt(r,a){if(1&r&&(t.j41(0,"mat-option",20),t.EFF(1),t.k0s()),2&r){const e=a.$implicit;t.Y8G("value",e.id.toString()),t.R7$(1),t.JRh(e.name)}}function bt(r,a){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Select Authorized By"),t.k0s())}function Gt(r,a){if(1&r&&(t.j41(0,"mat-option",20),t.EFF(1),t.k0s()),2&r){const e=a.$implicit;t.Y8G("value",e.shipperCode),t.R7$(1),t.JRh(e.shipperName)}}function yt(r,a){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Select Shipper"),t.k0s())}function Nt(r,a){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Enter Receipt No"),t.k0s())}function gt(r,a){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Select Authorize Date"),t.k0s())}function Ct(r,a){if(1&r){const e=t.RV6();t.j41(0,"div",4)(1,"div",21)(2,"mat-form-field",22)(3,"mat-label"),t.EFF(4,"Item Code"),t.k0s(),t.nrm(5,"input",23),t.k0s(),t.j41(6,"mat-form-field",22)(7,"mat-label"),t.EFF(8,"Item Name"),t.k0s(),t.nrm(9,"input",24),t.k0s(),t.j41(10,"mat-form-field",22)(11,"mat-label"),t.EFF(12,"Order Qty."),t.k0s(),t.nrm(13,"input",25),t.k0s(),t.j41(14,"mat-form-field",22)(15,"mat-label"),t.EFF(16,"Shipped Qty"),t.k0s(),t.nrm(17,"input",26),t.k0s(),t.j41(18,"mat-form-field",22)(19,"mat-label"),t.EFF(20,"Already Returned Qty"),t.k0s(),t.nrm(21,"input",27),t.k0s(),t.j41(22,"mat-form-field",22)(23,"mat-label"),t.EFF(24,"Return Qty."),t.k0s(),t.j41(25,"input",28),t.bIt("change",function(o){const m=t.eBV(e).index,f=t.XpG();return t.Njj(f.setBalance(o.target,m))}),t.k0s(),t.j41(26,"mat-error",29),t.EFF(27," Enter Return Quantity "),t.k0s()(),t.j41(28,"mat-form-field",22)(29,"mat-label"),t.EFF(30,"Select Reason"),t.k0s(),t.j41(31,"mat-select",30)(32,"mat-option",31),t.EFF(33,"Fungas"),t.k0s(),t.j41(34,"mat-option",32),t.EFF(35,"Expiry"),t.k0s(),t.j41(36,"mat-option",33),t.EFF(37,"Break"),t.k0s()(),t.j41(38,"mat-error",29),t.EFF(39,"Select Reason"),t.k0s()()(),t.nrm(40,"div",2),t.k0s()}if(2&r){const e=a.index,n=t.XpG();t.R7$(1),t.Y8G("formGroupName",e),t.R7$(25),t.Y8G("hidden",n.f.saleOrderItems.controls[e].controls.qtyReturned.valid),t.R7$(12),t.Y8G("hidden",n.f.saleOrderItems.controls[e].controls.returnReason.valid)}}let Et=(()=>{class r{constructor(e,n,o,l){this.formBuilder=e,this.service=n,this.purchaseService=o,this.route=l,this._snackBar=(0,t.WQX)(v.UG),this.createForm(),this.GetUsers(),this.GetShippers()}createForm(){this.formGroup=this.formBuilder.group({billNo:["",i.k0.required],authorizedBy:["",i.k0.required],shipperCode:["",i.k0.required],receiptNo:["",i.k0.required],authorizedNo:["",i.k0.required],authorizedDate:["",i.k0.required],remark:[""],saleOrderItems:this.formBuilder.array([this.initItem()])})}openSnackBar(e,n){this._snackBar.open(e,n)}initItem(){return this.formBuilder.group({itemcode:[""],itemName:[""],quantity:[""],alreadyShipped:[""],alreadyReturned:[""],returnReason:[""],qtyReturned:["",i.k0.required]})}GetShippers(){this.purchaseService.GetShippers().subscribe(e=>{this.shippers=e})}GetUsers(){this.purchaseService.GetUsers().subscribe(e=>{this.users=e})}bindSOForID(e){e&&this.service.GetSOReturnByBillNo(e).subscribe(n=>{if(0==n.length)return void this.openSnackBar("Invalid SO No","Close");const o=n.map(m=>this.formBuilder.group({itemcode:[m.itemcode,i.k0.required],itemName:[m.itemName],quantity:[m.quantity],alreadyShipped:[m.alreadyShipped],alreadyReturned:[m.alreadyReturned],returnReason:[m.returnReason],qtyReturned:[0]})),l=this.formBuilder.array(o);this.formGroup.setControl("saleOrderItems",l)})}onSubmit(){console.log(JSON.stringify(this.formGroup.value)),this.service.UpdateProductReturn(this.formGroup.value).subscribe(e=>{this.formGroup.reset(),this.formGroup.controls.saleOrderItems.clear(),this.openSnackBar("Product Returned","Close")})}onShow(){let e=this.formGroup.controls.billNo.value;""!=e?this.bindSOForID(e):this.openSnackBar("Please Enter Sale Order No","Close")}get f(){return this.formGroup.controls}setBalance(e,n){const o=this.formGroup.controls.saleOrderItems;var l=o.at(n).get("alreadyReturned").value,m=o.at(n).get("alreadyShipped").value;let f=Number(m)-Number(l);return Number(e.value)>0&&Number(e.value)>Number(f)&&(this.openSnackBar("Return Qty cannot greater then "+f,"Close"),o.at(n).get("qtyReturned").setValue(0)),!1}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(i.ok),t.rXU(g),t.rXU(j.z),t.rXU(k.nX))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-sale-return"]],decls:66,vars:13,consts:[["novalidate","",1,"container"],[1,"fill-remaining-space"],[2,"padding-top","10px"],[3,"formGroup","ngSubmit"],[1,"example-container"],["matInput","","maxlength","10","formControlName","billNo","placeholder","Sale Order No"],[4,"ngIf"],["mat-stroked-button","","type","button",2,"margin-left","20px",3,"click"],["matInput","","maxlength","10","formControlName","receiptNo"],["matInput","","maxlength","10","formControlName","authorizedNo"],["formControlName","authorizedBy"],[3,"value",4,"ngFor","ngForOf"],["formControlName","shipperCode"],["matIconSuffix","",3,"for"],["matInput","","formControlName","authorizedDate",3,"matDatepicker"],["picker",""],["matInput","","formControlName","remark"],["formArrayName","saleOrderItems",1,"example-container"],["class","example-container",4,"ngFor","ngForOf"],["mat-stroked-button","","type","button",3,"click"],[3,"value"],[3,"formGroupName"],[2,"width","140px"],["matInput","","type","text","readonly","","formControlName","itemcode"],["matInput","","type","text","readonly","","formControlName","itemName"],["matInput","","type","text","readonly","","formControlName","quantity",2,"width","80px"],["matInput","","type","text","readonly","","formControlName","alreadyShipped",2,"width","80px"],["matInput","","type","text","readonly","","formControlName","alreadyReturned",2,"width","80px"],["matInput","","type","text","formControlName","qtyReturned",2,"width","80px",3,"change"],[3,"hidden"],["formControlName","returnReason"],["value","Fungas"],["value","Expiry"],["value","Break"]],template:function(n,o){if(1&n&&(t.j41(0,"div",0)(1,"mat-toolbar")(2,"span",1),t.EFF(3,"Sale Order Return"),t.k0s()(),t.nrm(4,"div",2),t.j41(5,"form",3),t.bIt("ngSubmit",function(){return o.onSubmit()}),t.j41(6,"div",4)(7,"mat-form-field")(8,"mat-label"),t.EFF(9,"Sale OrderNo"),t.k0s(),t.nrm(10,"input",5),t.DNE(11,St,2,0,"mat-error",6),t.k0s(),t.j41(12,"button",7),t.bIt("click",function(){return o.onShow()}),t.EFF(13,"Show"),t.k0s()(),t.nrm(14,"div",2),t.j41(15,"div",4)(16,"mat-form-field")(17,"mat-label"),t.EFF(18,"Receipt No"),t.k0s(),t.nrm(19,"input",8),t.DNE(20,_t,2,0,"mat-error",6),t.k0s(),t.j41(21,"mat-form-field")(22,"mat-label"),t.EFF(23,"Authorize No"),t.k0s(),t.nrm(24,"input",9),t.DNE(25,Ft,2,0,"mat-error",6),t.k0s(),t.j41(26,"mat-form-field")(27,"mat-label"),t.EFF(28,"Select Authorized By"),t.k0s(),t.j41(29,"mat-select",10),t.DNE(30,vt,2,2,"mat-option",11),t.k0s(),t.DNE(31,bt,2,0,"mat-error",6),t.k0s(),t.j41(32,"mat-form-field")(33,"mat-label"),t.EFF(34,"Select Shipper"),t.k0s(),t.j41(35,"mat-select",12),t.DNE(36,Gt,2,2,"mat-option",11),t.k0s(),t.DNE(37,yt,2,0,"mat-error",6),t.k0s(),t.j41(38,"mat-form-field")(39,"mat-label"),t.EFF(40,"Enter Receipt No"),t.k0s(),t.nrm(41,"input",8),t.DNE(42,Nt,2,0,"mat-error",6),t.k0s(),t.nrm(43,"div",2),t.j41(44,"mat-form-field")(45,"mat-label"),t.EFF(46,"Authorized Date"),t.k0s(),t.nrm(47,"mat-datepicker-toggle",13)(48,"input",14)(49,"mat-datepicker",null,15),t.DNE(51,gt,2,0,"mat-error",6),t.k0s(),t.j41(52,"mat-form-field")(53,"mat-label"),t.EFF(54,"Remark"),t.k0s(),t.nrm(55,"textarea",16),t.k0s()(),t.nrm(56,"div",2),t.j41(57,"div",17)(58,"mat-toolbar")(59,"span",1),t.EFF(60,"Enter Item Return Detail"),t.k0s()(),t.nrm(61,"div",2),t.DNE(62,Ct,41,3,"div",18),t.k0s(),t.nrm(63,"br"),t.j41(64,"button",19),t.bIt("click",function(){return o.onSubmit()}),t.EFF(65,"Submit"),t.k0s()()()),2&n){const l=t.sdS(50);t.R7$(5),t.Y8G("formGroup",o.formGroup),t.R7$(6),t.Y8G("ngIf",null==o.formGroup.controls.billNo.errors?null:o.formGroup.controls.billNo.errors.required),t.R7$(9),t.Y8G("ngIf",null==o.formGroup.controls.receiptNo.errors?null:o.formGroup.controls.receiptNo.errors.required),t.R7$(5),t.Y8G("ngIf",null==o.formGroup.controls.authorizedNo.errors?null:o.formGroup.controls.authorizedNo.errors.required),t.R7$(5),t.Y8G("ngForOf",o.users),t.R7$(1),t.Y8G("ngIf",null==o.formGroup.controls.authorizedBy.errors?null:o.formGroup.controls.authorizedBy.errors.required),t.R7$(5),t.Y8G("ngForOf",o.shippers),t.R7$(1),t.Y8G("ngIf",null==o.formGroup.controls.shipperCode.errors?null:o.formGroup.controls.shipperCode.errors.required),t.R7$(5),t.Y8G("ngIf",null==o.formGroup.controls.receiptNo.errors?null:o.formGroup.controls.receiptNo.errors.required),t.R7$(5),t.Y8G("for",l),t.R7$(1),t.Y8G("matDatepicker",l),t.R7$(3),t.Y8G("ngIf",null==o.formGroup.controls.authorizedDate.errors?null:o.formGroup.controls.authorizedDate.errors.required),t.R7$(11),t.Y8G("ngForOf",o.f.saleOrderItems.controls)}},dependencies:[c.Sq,c.bT,b.wT,h.$z,_.fg,p.rl,p.nJ,p.TL,p.yw,G.VO,F.KQ,d.Vh,d.bZ,d.bU,i.qT,i.me,i.BC,i.cb,i.tU,i.j4,i.JD,i.$R,i.v8],styles:[".example-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] + mat-form-field[_ngcontent-%COMP%]{margin-left:8px}"]})}}return r})();function Rt(r,a){if(1&r&&(t.j41(0,"mat-option",18),t.EFF(1),t.k0s()),2&r){const e=a.$implicit;t.Y8G("value",e.id),t.R7$(1),t.JRh(e.siteName)}}function It(r,a){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Select Site"),t.k0s())}function jt(r,a){if(1&r&&(t.j41(0,"mat-option",18),t.EFF(1),t.k0s()),2&r){const e=a.$implicit;t.Y8G("value",e.id),t.R7$(1),t.JRh(e.unitName)}}function Dt(r,a){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Select Unit"),t.k0s())}function Ot(r,a){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Select Challan Date"),t.k0s())}function $t(r,a){if(1&r&&(t.j41(0,"mat-option",18),t.EFF(1),t.k0s()),2&r){const e=a.$implicit;t.Y8G("value",e.id),t.R7$(1),t.JRh(e.materialName)}}function Tt(r,a){if(1&r){const e=t.RV6();t.j41(0,"button",24),t.bIt("click",function(){t.eBV(e);const o=t.XpG().index,l=t.XpG();return t.Njj(l.removeItem(o))}),t.j41(1,"mat-icon"),t.EFF(2,"delete"),t.k0s()()}}function Bt(r,a){if(1&r&&(t.j41(0,"div",4)(1,"div",19)(2,"mat-form-field")(3,"mat-label"),t.EFF(4,"Material Name"),t.k0s(),t.j41(5,"mat-select",20),t.DNE(6,$t,2,2,"mat-option",7),t.k0s(),t.j41(7,"mat-error",21),t.EFF(8," Material is required "),t.k0s()(),t.nrm(9,"div",2),t.j41(10,"mat-form-field")(11,"mat-label"),t.EFF(12,"Deliver Quantity"),t.k0s(),t.nrm(13,"input",22),t.j41(14,"mat-error",21),t.EFF(15," Enter Quantity "),t.k0s()(),t.nrm(16,"div",2),t.DNE(17,Tt,3,0,"button",23),t.k0s(),t.nrm(18,"div",2),t.k0s()),2&r){const e=a.index,n=t.XpG();t.R7$(1),t.Y8G("formGroupName",e),t.R7$(5),t.Y8G("ngForOf",n.materials),t.R7$(1),t.Y8G("hidden",n.f.itemDtl.controls[e].controls.materialId.valid),t.R7$(7),t.Y8G("hidden",n.f.itemDtl.controls[e].controls.deliverQty.valid),t.R7$(3),t.Y8G("ngIf",n.f.itemDtl.controls.length>1)}}function Yt(r,a){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Enter Challan No"),t.k0s())}function xt(r,a){if(1&r&&(t.j41(0,"mat-option",15),t.EFF(1),t.k0s()),2&r){const e=a.$implicit;t.Y8G("value",e.id),t.R7$(1),t.JRh(e.name)}}function qt(r,a){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Select Receiver"),t.k0s())}function Mt(r,a){if(1&r&&(t.j41(0,"mat-option",15),t.EFF(1),t.k0s()),2&r){const e=a.$implicit;t.Y8G("value",e.id),t.R7$(1),t.JRh(e.name)}}function Pt(r,a){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Select Shipper"),t.k0s())}function Qt(r,a){if(1&r&&(t.j41(0,"mat-option",15),t.EFF(1),t.k0s()),2&r){const e=a.$implicit;t.Y8G("value",e.id),t.R7$(1),t.JRh(e.unitName)}}function At(r,a){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Select Unit"),t.k0s())}function Xt(r,a){if(1&r&&(t.j41(0,"div",4)(1,"div",16)(2,"mat-form-field")(3,"mat-label"),t.EFF(4,"Material Code"),t.k0s(),t.nrm(5,"input",17),t.k0s(),t.nrm(6,"div",2),t.j41(7,"mat-form-field")(8,"mat-label"),t.EFF(9,"Material Name"),t.k0s(),t.nrm(10,"input",18),t.k0s(),t.nrm(11,"div",2),t.j41(12,"mat-form-field")(13,"mat-label"),t.EFF(14,"Order Qty"),t.k0s(),t.nrm(15,"input",19),t.k0s(),t.nrm(16,"div",2),t.j41(17,"mat-form-field")(18,"mat-label"),t.EFF(19,"Already Received Qty"),t.k0s(),t.nrm(20,"input",20),t.k0s(),t.nrm(21,"div",2),t.j41(22,"mat-form-field")(23,"mat-label"),t.EFF(24,"Receive Qty."),t.k0s(),t.nrm(25,"input",21),t.j41(26,"mat-error",22),t.EFF(27," Enter Receive Quantity "),t.k0s()()(),t.nrm(28,"div",2),t.k0s()),2&r){const e=a.index,n=t.XpG();t.R7$(1),t.Y8G("formGroupName",e),t.R7$(25),t.Y8G("hidden",n.f.itemDtl.controls[e].controls.receiveQty.valid)}}const Lt=[{path:"sale-order",component:R},{path:"send-material-to-unit",component:(()=>{class r{constructor(e,n){this.formBuilder=e,this.service=n,this._snackBar=(0,t.WQX)(v.UG)}ngOnInit(){this.createForm(),this.GetAutoChallanCode(),this.GetSites(),this.GetUnits(),this.GetMaterials()}GetMaterials(){this.service.GetMaterials().subscribe(e=>{this.materials=e})}GetAutoChallanCode(){this.service.GetAutoChallanNo().subscribe(e=>{this.formGroup.controls.challanNo.setValue(e)})}GetUnits(){this.service.GetUnits().subscribe(e=>{this.units=e})}GetSites(){this.service.GetSites().subscribe(e=>{this.sites=e})}createForm(){this.formGroup=this.formBuilder.group({challanNo:[null,i.k0.required],challanDate:[null,i.k0.required],unitId:[null,i.k0.required],siteId:[null,i.k0.required],itemDtl:this.formBuilder.array([this.initItem()])})}initItem(){return this.formBuilder.group({materialId:["",i.k0.required],deliverQty:["",i.k0.required]})}addItem(){this.formGroup.controls.itemDtl.push(this.initItem())}removeItem(e){this.formGroup.controls.itemDtl.removeAt(e)}get f(){return this.formGroup.controls}onSubmit(){this.service.SaveMaterialSendToWorkshop(this.formGroup.value).subscribe(e=>{this._snackBar.open("Data saved.","Success"),this.formGroup.reset(),this.formGroup.controls.itemDtl.clear()})}openSnackBar(e,n){this._snackBar.open(e,n)}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(i.ok),t.rXU(y.b))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-send-material-to-unit"]],decls:48,vars:10,consts:[["novalidate","",1,"container"],[1,"fill-remaining-space"],[2,"padding-top","10px"],[3,"formGroup","ngSubmit"],[1,"example-container"],["matInput","","maxlength","10","formControlName","challanNo"],["formControlName","siteId"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["formControlName","unitId"],["matIconSuffix","",3,"for"],["matInput","","formControlName","challanDate",3,"matDatepicker"],["picker",""],["formArrayName","itemDtl",1,"example-container"],[1,"example-button-row"],["mat-stroked-button","","type","button",3,"click"],["class","example-container",4,"ngFor","ngForOf"],["mat-stroked-button","","type","button",3,"disabled","click"],[3,"value"],[3,"formGroupName"],["formControlName","materialId"],[3,"hidden"],["matInput","","type","text","formControlName","deliverQty"],["mat-mini-fab","","aria-label","Delete",3,"click",4,"ngIf"],["mat-mini-fab","","aria-label","Delete",3,"click"]],template:function(n,o){if(1&n&&(t.j41(0,"div",0)(1,"mat-toolbar")(2,"span",1),t.EFF(3,"Send Material to Workshop"),t.k0s()(),t.nrm(4,"div",2),t.j41(5,"form",3),t.bIt("ngSubmit",function(){return o.onSubmit()}),t.j41(6,"div",4)(7,"mat-form-field")(8,"mat-label"),t.EFF(9,"Challan No"),t.k0s(),t.nrm(10,"input",5),t.k0s(),t.nrm(11,"div",2),t.j41(12,"mat-form-field")(13,"mat-label"),t.EFF(14,"Select Site"),t.k0s(),t.j41(15,"mat-select",6),t.DNE(16,Rt,2,2,"mat-option",7),t.k0s(),t.DNE(17,It,2,0,"mat-error",8),t.k0s(),t.nrm(18,"div",2),t.j41(19,"mat-form-field")(20,"mat-label"),t.EFF(21,"Select Unit"),t.k0s(),t.j41(22,"mat-select",9),t.DNE(23,jt,2,2,"mat-option",7),t.k0s(),t.DNE(24,Dt,2,0,"mat-error",8),t.k0s(),t.nrm(25,"div",2)(26,"div",2),t.j41(27,"mat-form-field")(28,"mat-label"),t.EFF(29,"Challan Date"),t.k0s(),t.nrm(30,"mat-datepicker-toggle",10)(31,"input",11)(32,"mat-datepicker",null,12),t.DNE(34,Ot,2,0,"mat-error",8),t.k0s()(),t.j41(35,"div",13)(36,"mat-toolbar")(37,"span",1),t.EFF(38,"Enter Material Details:"),t.k0s()(),t.j41(39,"div",14)(40,"button",15),t.bIt("click",function(){return o.addItem()}),t.EFF(41,"Add New Item"),t.k0s()(),t.nrm(42,"div",2),t.DNE(43,Bt,19,5,"div",16),t.k0s(),t.nrm(44,"br"),t.j41(45,"div",14)(46,"button",17),t.bIt("click",function(){return o.onSubmit()}),t.EFF(47,"Submit"),t.k0s()()()()),2&n){const l=t.sdS(33);t.R7$(5),t.Y8G("formGroup",o.formGroup),t.R7$(11),t.Y8G("ngForOf",o.sites),t.R7$(1),t.Y8G("ngIf",null==o.formGroup.controls.siteId.errors?null:o.formGroup.controls.siteId.errors.required),t.R7$(6),t.Y8G("ngForOf",o.units),t.R7$(1),t.Y8G("ngIf",null==o.formGroup.controls.unitId.errors?null:o.formGroup.controls.unitId.errors.required),t.R7$(6),t.Y8G("for",l),t.R7$(1),t.Y8G("matDatepicker",l),t.R7$(3),t.Y8G("ngIf",null==o.formGroup.controls.challanDate.errors?null:o.formGroup.controls.challanDate.errors.required),t.R7$(9),t.Y8G("ngForOf",o.f.itemDtl.controls),t.R7$(3),t.Y8G("disabled",!o.formGroup.valid)}},dependencies:[c.Sq,c.bT,b.wT,h.$z,h.$0,E.An,_.fg,p.rl,p.nJ,p.TL,p.yw,G.VO,F.KQ,d.Vh,d.bZ,d.bU,i.qT,i.me,i.BC,i.cb,i.tU,i.j4,i.JD,i.$R,i.v8],styles:[".example-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] + mat-form-field[_ngcontent-%COMP%]{margin-left:8px}"]})}}return r})()},{path:"material-receipt-by-unit",component:(()=>{class r{constructor(e,n,o){this.formBuilder=e,this.service=n,this.route=o,this._snackBar=(0,t.WQX)(v.UG),this.createForm(),this.GetUsers(),this.GetShippers(),this.GetUnits(),this.GetMaterials()}createForm(){this.formGroup=this.formBuilder.group({challanNo:["",i.k0.required],receiverId:["",i.k0.required],shipperId:["",i.k0.required],unitId:["",i.k0.required],itemDtl:this.formBuilder.array([this.initItem()])})}initItem(){return this.formBuilder.group({materialId:[""],materialName:[""],orderQty:[""],issuedQty:[""],alreadyReceivedQty:[""],receiveQty:["",i.k0.required]})}GetShippers(){this.service.GetUsers_Shipper("Shipper").subscribe(e=>{this.shippers=e})}GetUnits(){this.service.GetUnits().subscribe(e=>{this.units=e})}GetUsers(){this.service.GetUsers_Shipper("User").subscribe(e=>{this.receivers=e})}GetMaterials(){this.service.GetMaterials().subscribe(e=>{this.materials=e})}show(){this.selectChallanNo=this.formGroup.controls.challanNo.value,this.selectChallanNo&&this.service.GetWorkShopMaterialItemData(this.selectChallanNo).subscribe(e=>{if(0==e.length)return void this.openSnackBar("Invalid Challan No","Close");const n=e.map(l=>this.formBuilder.group({materialId:[{value:l.materialId,disabled:!0}],materialName:[{value:l.materialName,disabled:!0}],orderQty:[{value:l.deliverQty,disabled:!0}],alreadyReceiveQty:[l.alreadyReceiveQty],receiveQty:[0]})),o=this.formBuilder.array(n);this.formGroup.setControl("itemDtl",o)})}onSubmit(){this.service.SaveReceiveMaterialByWorkshop(this.formGroup.getRawValue()).subscribe(n=>{this.openSnackBar("Data Saved","Close")}),this.formGroup.reset(),this.formGroup.controls.itemDtl.clear()}get f(){return this.formGroup.controls}openSnackBar(e,n){this._snackBar.open(e,n)}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(i.ok),t.rXU(y.b),t.rXU(k.nX))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-receipt-material-by-unit"]],decls:45,vars:9,consts:[["novalidate","",1,"container"],[1,"fill-remaining-space"],[2,"padding-top","10px"],[3,"formGroup","ngSubmit"],[1,"example-container"],["matInput","","maxlength","10","formControlName","challanNo"],[4,"ngIf"],["mat-stroked-button","","type","button",2,"margin-left","20px",3,"click"],["formControlName","receiverId"],[3,"value",4,"ngFor","ngForOf"],["formControlName","shipperId"],["formControlName","unitId"],["formArrayName","itemDtl",1,"example-container"],["class","example-container",4,"ngFor","ngForOf"],["mat-stroked-button","","type","button",3,"click"],[3,"value"],[3,"formGroupName"],["matInput","","type","text","readonly","","formControlName","materialId"],["matInput","","type","text","readonly","","formControlName","materialName",2,"background-color","beige","color","black"],["matInput","","type","text","readonly","","formControlName","orderQty",2,"background-color","beige","color","black"],["matInput","","type","text","readonly","","formControlName","alreadyReceiveQty",2,"background-color","beige","color","black"],["matInput","","type","text","formControlName","receiveQty"],[3,"hidden"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"mat-toolbar")(2,"span",1),t.EFF(3,"Material Receive by Unit"),t.k0s()(),t.nrm(4,"div",2),t.j41(5,"form",3),t.bIt("ngSubmit",function(){return o.onSubmit()}),t.j41(6,"div",4)(7,"mat-form-field")(8,"mat-label"),t.EFF(9,"Challan No"),t.k0s(),t.nrm(10,"input",5),t.DNE(11,Yt,2,0,"mat-error",6),t.k0s(),t.j41(12,"button",7),t.bIt("click",function(){return o.show()}),t.EFF(13,"Show"),t.k0s(),t.nrm(14,"div",2),t.j41(15,"mat-form-field")(16,"mat-label"),t.EFF(17,"Select Receiver"),t.k0s(),t.j41(18,"mat-select",8),t.DNE(19,xt,2,2,"mat-option",9),t.k0s(),t.DNE(20,qt,2,0,"mat-error",6),t.k0s(),t.nrm(21,"div",2),t.j41(22,"mat-form-field")(23,"mat-label"),t.EFF(24,"Select Shipper"),t.k0s(),t.j41(25,"mat-select",10),t.DNE(26,Mt,2,2,"mat-option",9),t.k0s(),t.DNE(27,Pt,2,0,"mat-error",6),t.k0s(),t.nrm(28,"div",2),t.j41(29,"mat-form-field")(30,"mat-label"),t.EFF(31,"Select Unit"),t.k0s(),t.j41(32,"mat-select",11),t.DNE(33,Qt,2,2,"mat-option",9),t.k0s(),t.DNE(34,At,2,0,"mat-error",6),t.k0s(),t.nrm(35,"div",2),t.k0s(),t.j41(36,"div",12)(37,"mat-toolbar")(38,"span",1),t.EFF(39,"Enter Material Receive Detail"),t.k0s()(),t.nrm(40,"div",2),t.DNE(41,Xt,29,2,"div",13),t.k0s(),t.nrm(42,"br"),t.j41(43,"button",14),t.bIt("click",function(){return o.onSubmit()}),t.EFF(44,"Submit"),t.k0s()()()),2&n&&(t.R7$(5),t.Y8G("formGroup",o.formGroup),t.R7$(6),t.Y8G("ngIf",null==o.formGroup.controls.challanNo.errors?null:o.formGroup.controls.challanNo.errors.required),t.R7$(8),t.Y8G("ngForOf",o.receivers),t.R7$(1),t.Y8G("ngIf",null==o.formGroup.controls.receiverId.errors?null:o.formGroup.controls.receiverId.errors.required),t.R7$(6),t.Y8G("ngForOf",o.shippers),t.R7$(1),t.Y8G("ngIf",null==o.formGroup.controls.shipperId.errors?null:o.formGroup.controls.shipperId.errors.required),t.R7$(6),t.Y8G("ngForOf",o.units),t.R7$(1),t.Y8G("ngIf",null==o.formGroup.controls.unitId.errors?null:o.formGroup.controls.unitId.errors.required),t.R7$(7),t.Y8G("ngForOf",o.f.itemDtl.controls))},dependencies:[c.Sq,c.bT,b.wT,h.$z,_.fg,p.rl,p.nJ,p.TL,G.VO,F.KQ,i.qT,i.me,i.BC,i.cb,i.tU,i.j4,i.JD,i.$R,i.v8],styles:[".example-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] + mat-form-field[_ngcontent-%COMP%]{margin-left:8px}"]})}}return r})()},{path:"sale-order-list",component:st},{path:"sale-order/:billno",component:R},{path:"product-shipping",component:kt},{path:"so-return",component:Et}];let Vt=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=t.$C({type:r})}static{this.\u0275inj=t.G2t({imports:[k.iI.forChild(Lt),k.iI]})}}return r})(),wt=(()=>{class r{constructor(){console.log("sale module")}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=t.$C({type:r})}static{this.\u0275inj=t.G2t({imports:[c.MD,Vt,D.G,i.X1,i.YN,S.q1]})}}return r})()}}]);