"use strict";(self.webpackChunkInventoryAPPN=self.webpackChunkInventoryAPPN||[]).push([[433],{5433:(xe,N,m)=>{m.r(N),m.d(N,{SaleModule:()=>Ue});var p=m(177),j=m(1472),i=m(9417),S=m(1626),h=m(5743),e=m(7705),F=m(5416),O=m(5312);let _=(()=>{class o{constructor(t){this.http=t,this.rootAPIPath=O.c.baseApiUrl}GetSOList(){return this.http.get(`${this.rootAPIPath}/Sale/SaleOrderList`)}GetCustomers(){return this.http.get(`${this.rootAPIPath}/Sale/GetCustomers`)}GetShippers(){return this.http.get(`${this.rootAPIPath}/Sale/GetShippers`)}GetUsers(){return this.http.get(`${this.rootAPIPath}/Sale/GetUsers`)}GetSuppliers(){return this.http.get(`${this.rootAPIPath}/Sale/GetSuppliers`)}GetSOByBillNo(t){return this.http.get(`${this.rootAPIPath}/Sale/GetSOByBillNo/${t}`)}GetSODetailsForShipped(t){return this.http.get(`${this.rootAPIPath}/Sale/GetSODetailsForShipped/${t}`)}GetSOReturnByBillNo(t){return this.http.get(`${this.rootAPIPath}/Sale/GetSOReturn/${t}`)}saveSaleOrder(t){const n={headers:new S.Lr({"Content-Type":"application/json"})};return this.http.post(`${this.rootAPIPath}/Sale/SaveOrder`,JSON.stringify(t),n)}UpdateSaleOrder(t){const n={headers:new S.Lr({"Content-Type":"application/json"})};return this.http.post(`${this.rootAPIPath}/Sale/UpdateOrder`,JSON.stringify(t),n)}DeleteSaleOrder(t){return this.http.delete(`${this.rootAPIPath}/Sale/DeleteSaleOrder/${t}`)}generateInvoicePdf(t){return this.http.post(`${this.rootAPIPath}/Sale/SOReport_PDF`,t,{responseType:"blob"})}UpdateProductShipped(t){const n={headers:new S.Lr({"Content-Type":"application/json"})};return this.http.post(`${this.rootAPIPath}/Sale/SaveSOShipped`,JSON.stringify(t),n)}UpdateProductReturn(t){const n={headers:new S.Lr({"Content-Type":"application/json"})};return this.http.post(`${this.rootAPIPath}/Sale/SaveSOReturn`,JSON.stringify(t),n)}static{this.\u0275fac=function(n){return new(n||o)(e.KVO(S.Qq))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var y=m(1322),g=m(6600),k=m(8834),I=m(9213),v=m(9631),u=m(6467),C=m(2798),b=m(5911),f=m(5084);function D(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"Select Delivery Date"),e.k0s())}function T(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"Enter Remark"),e.k0s())}function B(o,s){if(1&o){const t=e.RV6();e.j41(0,"button",24),e.bIt("click",function(){e.eBV(t);const r=e.XpG().index,a=e.XpG();return e.Njj(a.removeItem(r))}),e.j41(1,"mat-icon"),e.EFF(2,"delete"),e.k0s()()}}function $(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",4)(1,"div",16)(2,"mat-form-field")(3,"mat-label"),e.EFF(4,"Material Name"),e.k0s(),e.j41(5,"mat-select",17),e.bIt("selectionChange",function(r){const l=e.eBV(t).index,c=e.XpG();return e.Njj(c.onItemChange(r.value,l))}),e.j41(6,"mat-option",18),e.EFF(7,"Material 1"),e.k0s(),e.j41(8,"mat-option",19),e.EFF(9,"Material 2"),e.k0s()(),e.j41(10,"mat-error",20),e.EFF(11," Material is required "),e.k0s()(),e.nrm(12,"div",2),e.j41(13,"mat-form-field")(14,"mat-label"),e.EFF(15,"Order Quantity"),e.k0s(),e.nrm(16,"input",21),e.j41(17,"mat-error",20),e.EFF(18," Enter Order Quantity "),e.k0s()(),e.nrm(19,"div",2),e.j41(20,"mat-form-field")(21,"mat-label"),e.EFF(22,"Deliver Quantity"),e.k0s(),e.j41(23,"input",22),e.bIt("change",function(r){const l=e.eBV(t).index,c=e.XpG();return e.Njj(c.setAmount(r.target,l))}),e.k0s(),e.j41(24,"mat-error",20),e.EFF(25," Enter Quantity "),e.k0s()(),e.nrm(26,"div",2),e.DNE(27,B,3,0,"button",23),e.k0s(),e.nrm(28,"div",2),e.k0s()}if(2&o){const t=s.index,n=e.XpG();e.R7$(1),e.Y8G("formGroupName",t),e.R7$(9),e.Y8G("hidden",n.f.saleOrderItems.controls[t].controls.itemcode.valid),e.R7$(7),e.Y8G("hidden",n.f.saleOrderItems.controls[t].controls.unitPrice.valid),e.R7$(7),e.Y8G("hidden",n.f.saleOrderItems.controls[t].controls.quantity.valid),e.R7$(3),e.Y8G("ngIf",n.f.saleOrderItems.controls.length>1)}}let E=(()=>{class o{constructor(t,n,r,a){this.formBuilder=t,this.service=n,this.purchaseService=r,this.route=a,this._snackBar=(0,e.WQX)(F.UG),this.post="",this.invoiceData={billNo:"PO1003",date:"2025-04-30",customer:"1",remark:"Test Remark by Brijesh",deliveryDate:"2025-04-30",deliveryTo:"Sagarpur, New Delhi",saleOrderItems:[{itemcode:"Item100",quantity:10,unitPrice:100,amount:1e3},{itemcode:"Item101",quantity:20,unitPrice:200,amount:4e3},{itemcode:"Item102",quantity:50,unitPrice:10,amount:500}]}}ngOnInit(){this.createForm(),this.GetItems(),this.GetCustomers(),this.bindSOForID()}bindSOForID(){let t=this.route.snapshot.paramMap.get("billno");t&&this.service.GetSOByBillNo(t).subscribe(n=>{this.formGroup.patchValue(n);const r=n.saleOrderItems.map(l=>this.formBuilder.group({itemcode:[l.itemcode,i.k0.required],quantity:[l.quantity],unitPrice:[l.unitPrice],amount:[l.amount]})),a=this.formBuilder.array(r);this.formGroup.setControl("saleOrderItems",a)})}GetCustomers(){this.service.GetCustomers().subscribe(t=>{console.log(t),this.customers=t})}GetItems(){this.purchaseService.GetItems().subscribe(t=>{this.items=t})}createForm(){this.formGroup=this.formBuilder.group({billNo:[null,i.k0.required],date:[null,i.k0.required],customer:[null,i.k0.required],deliveryDate:[null,i.k0.required],remark:[null,i.k0.required],deliveryTo:[null,i.k0.required],saleOrderItems:this.formBuilder.array([this.initItem()])})}initItem(){return this.formBuilder.group({itemcode:["",i.k0.required],quantity:["",i.k0.required],unitPrice:["",i.k0.required],amount:["",i.k0.required]})}addItem(){this.formGroup.controls.saleOrderItems.push(this.initItem())}removeItem(t){this.formGroup.controls.saleOrderItems.removeAt(t)}get f(){return this.formGroup.controls}onSubmit(){console.log(this.formGroup.value),this.route.snapshot.paramMap.get("billno")?this.service.UpdateSaleOrder(this.formGroup.value).subscribe(r=>{this.openSnackBar("Data Updated","Close")}):this.service.saveSaleOrder(this.formGroup.value).subscribe(r=>{this.openSnackBar("Data Saved","Close")}),this.formGroup.reset(),this.formGroup.controls.saleOrderItems.clear()}onItemChange(t,n){let r=this.items.filter(l=>l.itemCode==t);this.formGroup.controls.saleOrderItems.at(n).get("unitPrice").setValue(r[0].price)}setAmount(t,n){const r=this.formGroup.controls.saleOrderItems;var a=r.at(n).get("unitPrice").value;const l=Number(t.value)*Number(a);r.at(n).get("amount").setValue(l)}downloadPdf(){this.service.generateInvoicePdf(this.invoiceData).subscribe(t=>{const n=window.URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="invoice.pdf",r.click(),window.URL.revokeObjectURL(n)})}openSnackBar(t,n){this._snackBar.open(t,n)}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(i.ok),e.rXU(_),e.rXU(y.z),e.rXU(h.nX))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-sale-order"]],decls:42,vars:7,consts:[["novalidate","",1,"container"],[1,"fill-remaining-space"],[2,"padding-top","10px"],[3,"formGroup","ngSubmit"],[1,"example-container"],["matInput","","maxlength","10","formControlName","billNo"],["matIconSuffix","",3,"for"],["matInput","","formControlName","deliveryDate",3,"matDatepicker"],["picker",""],[4,"ngIf"],["matInput","","formControlName","remark",2,"width","600px","height","100px"],["formArrayName","saleOrderItems",1,"example-container"],[1,"example-button-row"],["mat-stroked-button","","type","button",3,"click"],["class","example-container",4,"ngFor","ngForOf"],["mat-stroked-button","","type","button",3,"disabled","click"],[3,"formGroupName"],["formControlName","itemcode",3,"selectionChange"],["value","1"],["value","2"],[3,"hidden"],["matInput","","type","text","formControlName","unitPrice"],["matInput","","type","text","formControlName","quantity",3,"change"],["mat-mini-fab","","aria-label","Delete",3,"click",4,"ngIf"],["mat-mini-fab","","aria-label","Delete",3,"click"]],template:function(n,r){if(1&n&&(e.j41(0,"div",0)(1,"mat-toolbar")(2,"span",1),e.EFF(3,"Material Issue by Site"),e.k0s()(),e.nrm(4,"div",2),e.j41(5,"form",3),e.bIt("ngSubmit",function(){return r.onSubmit()}),e.j41(6,"div",4)(7,"mat-form-field")(8,"mat-label"),e.EFF(9,"Request No"),e.k0s(),e.nrm(10,"input",5),e.k0s(),e.nrm(11,"div",2),e.j41(12,"mat-form-field")(13,"mat-label"),e.EFF(14,"Delivery Date"),e.k0s(),e.nrm(15,"mat-datepicker-toggle",6)(16,"input",7)(17,"mat-datepicker",null,8),e.DNE(19,D,2,0,"mat-error",9),e.k0s(),e.nrm(20,"div",2),e.k0s(),e.nrm(21,"div",2),e.j41(22,"div",4)(23,"mat-form-field")(24,"mat-label"),e.EFF(25,"Remark"),e.k0s(),e.nrm(26,"textarea",10),e.DNE(27,T,2,0,"mat-error",9),e.k0s(),e.nrm(28,"div",2),e.k0s(),e.j41(29,"div",11)(30,"mat-toolbar")(31,"span",1),e.EFF(32,"Enter Material Details:"),e.k0s()(),e.j41(33,"div",12)(34,"button",13),e.bIt("click",function(){return r.addItem()}),e.EFF(35,"Add New Item"),e.k0s()(),e.nrm(36,"div",2),e.DNE(37,$,29,5,"div",14),e.k0s(),e.nrm(38,"br"),e.j41(39,"div",12)(40,"button",15),e.bIt("click",function(){return r.onSubmit()}),e.EFF(41,"Submit"),e.k0s()()()()),2&n){const a=e.sdS(18);e.R7$(5),e.Y8G("formGroup",r.formGroup),e.R7$(10),e.Y8G("for",a),e.R7$(1),e.Y8G("matDatepicker",a),e.R7$(3),e.Y8G("ngIf",null==r.formGroup.controls.deliveryDate.errors?null:r.formGroup.controls.deliveryDate.errors.required),e.R7$(8),e.Y8G("ngIf",null==r.formGroup.controls.remark.errors?null:r.formGroup.controls.remark.errors.required),e.R7$(10),e.Y8G("ngForOf",r.f.saleOrderItems.controls),e.R7$(3),e.Y8G("disabled",!r.formGroup.valid)}},dependencies:[p.Sq,p.bT,g.wT,k.$z,k.$0,I.An,v.fg,u.rl,u.nJ,u.TL,u.yw,C.VO,b.KQ,f.Vh,f.bZ,f.bU,i.qT,i.me,i.BC,i.cb,i.tU,i.j4,i.JD,i.$R,i.v8],styles:[".example-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] + mat-form-field[_ngcontent-%COMP%]{margin-left:8px}"]})}}return o})();var R=m(6695),G=m(2042),d=m(9159),q=m(1802),P=m(5351),U=m(2232),x=m(4823);function M(o,s){1&o&&(e.j41(0,"mat-header-cell",22),e.EFF(1,"SO Number"),e.k0s())}function Y(o,s){if(1&o&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&o){const t=s.$implicit;e.R7$(1),e.SpI(" ",t.billNo," ")}}function X(o,s){1&o&&(e.j41(0,"mat-header-cell",22),e.EFF(1,"SO Date"),e.k0s())}function L(o,s){if(1&o&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&o){const t=s.$implicit;e.R7$(1),e.SpI(" ",t.soDate," ")}}function V(o,s){1&o&&(e.j41(0,"mat-header-cell",22),e.EFF(1,"Customer"),e.k0s())}function w(o,s){if(1&o&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&o){const t=s.$implicit;e.R7$(1),e.SpI(" ",t.partyName," ")}}function A(o,s){1&o&&(e.j41(0,"mat-header-cell",22),e.EFF(1,"Delivery Date"),e.k0s())}function Q(o,s){if(1&o&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&o){const t=s.$implicit;e.R7$(1),e.SpI(" ",t.deliveryDate," ")}}function z(o,s){1&o&&(e.j41(0,"mat-header-cell",22),e.EFF(1,"delivery Address"),e.k0s())}function J(o,s){if(1&o&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&o){const t=s.$implicit;e.R7$(1),e.SpI(" ",t.deliveryTo," ")}}function K(o,s){1&o&&(e.j41(0,"mat-header-cell",22),e.EFF(1,"Remark"),e.k0s())}function W(o,s){if(1&o&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&o){const t=s.$implicit;e.R7$(1),e.SpI(" ",t.remark," ")}}function Z(o,s){1&o&&(e.j41(0,"th",23),e.EFF(1," Edit "),e.k0s())}function H(o,s){if(1&o){const t=e.RV6();e.j41(0,"td",24)(1,"button",25),e.bIt("click",function(){const a=e.eBV(t).$implicit,l=e.XpG();return e.Njj(l.Edit(a.billNo))}),e.EFF(2,"Edit"),e.k0s()()}}function ee(o,s){1&o&&(e.j41(0,"th",23),e.EFF(1," Remove "),e.k0s())}function te(o,s){if(1&o){const t=e.RV6();e.j41(0,"td",24)(1,"button",26),e.bIt("click",function(){const a=e.eBV(t).$implicit,l=e.XpG();return e.Njj(l.RemoveSaleOrder(a.billNo))}),e.EFF(2,"Remove"),e.k0s()()}}function re(o,s){1&o&&e.nrm(0,"mat-header-row")}function oe(o,s){1&o&&e.nrm(0,"mat-row")}const ne=function(){return[5,10,25,100]};let ie=(()=>{class o{constructor(t,n,r,a,l){this._saleService=t,this.excelService=n,this.dialog=r,this.snackBarService=a,this.router=l,this.SOList=[],this.displayedColumns=["billNo","soDate","partyName","deliveryDate","deliveryTo","remark","Edit","Remove"]}ngOnInit(){this.bindSaleOrders()}bindSaleOrders(){this._saleService.GetSOList().subscribe(t=>{null!=t&&(this.SOList=t,this.dataSource=new d.I6(t),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)})}applyFilter(t){this.dataSource.filter=t.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}Edit(t){this.router.navigate(["/sale-order",t])}RemoveSaleOrder(t){this._saleService.DeleteSaleOrder(t).subscribe(n=>{n?(this.bindSaleOrders(),this.snackBarService.show("Sale Order Deleted","success")):this.snackBarService.show("Error Throwing!","error")})}exportAsXLSX(){this.excelService.exportAsExcelFile(this.SOList,"sample")}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(_),e.rXU(q.J),e.rXU(P.bZ),e.rXU(U.v),e.rXU(h.Ix))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-sale-list"]],viewQuery:function(n,r){if(1&n&&(e.GBs(R.iy,5),e.GBs(G.B4,5)),2&n){let a;e.mGM(a=e.lsd())&&(r.paginator=a.first),e.mGM(a=e.lsd())&&(r.sort=a.first)}},decls:38,vars:5,consts:[[1,"fill-remaining-space"],[2,"padding-top","10px"],[2,"float","left"],["matInput","","placeholder","Search",3,"keyup"],[1,"example-container","mat-elevation-z8"],["mat-stroked-button","","color","primary",3,"click"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","billNo"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","soDate"],["matColumnDef","partyName"],["matColumnDef","deliveryDate"],["matColumnDef","deliveryTo"],["matColumnDef","remark"],["matColumnDef","Edit"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Remove"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions"],["mat-sort-header",""],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-raised-button","","color","warn","matTooltip","Edit",3,"click"],["mat-raised-button","","color","warn","matTooltip","Remove",3,"click"]],template:function(n,r){1&n&&(e.j41(0,"mat-toolbar")(1,"span",0),e.EFF(2,"Sale Order List"),e.k0s()(),e.nrm(3,"div",1),e.j41(4,"mat-form-field",2)(5,"input",3),e.bIt("keyup",function(l){return r.applyFilter(l.target.value)}),e.k0s()(),e.j41(6,"div",4)(7,"button",5),e.bIt("click",function(){return r.exportAsXLSX()}),e.EFF(8,"Download Excel"),e.k0s(),e.nrm(9,"div",1),e.j41(10,"table",6),e.qex(11,7),e.DNE(12,M,2,0,"mat-header-cell",8),e.DNE(13,Y,2,1,"mat-cell",9),e.bVm(),e.qex(14,10),e.DNE(15,X,2,0,"mat-header-cell",8),e.DNE(16,L,2,1,"mat-cell",9),e.bVm(),e.qex(17,11),e.DNE(18,V,2,0,"mat-header-cell",8),e.DNE(19,w,2,1,"mat-cell",9),e.bVm(),e.qex(20,12),e.DNE(21,A,2,0,"mat-header-cell",8),e.DNE(22,Q,2,1,"mat-cell",9),e.bVm(),e.qex(23,13),e.DNE(24,z,2,0,"mat-header-cell",8),e.DNE(25,J,2,1,"mat-cell",9),e.bVm(),e.qex(26,14),e.DNE(27,K,2,0,"mat-header-cell",8),e.DNE(28,W,2,1,"mat-cell",9),e.bVm(),e.qex(29,15),e.DNE(30,Z,2,0,"th",16),e.DNE(31,H,3,0,"td",17),e.bVm(),e.qex(32,18),e.DNE(33,ee,2,0,"th",16),e.DNE(34,te,3,0,"td",17),e.bVm(),e.DNE(35,re,1,0,"mat-header-row",19),e.DNE(36,oe,1,0,"mat-row",20),e.k0s(),e.nrm(37,"mat-paginator",21),e.k0s()),2&n&&(e.R7$(10),e.Y8G("dataSource",r.dataSource),e.R7$(25),e.Y8G("matHeaderRowDef",r.displayedColumns),e.R7$(1),e.Y8G("matRowDefColumns",r.displayedColumns),e.R7$(1),e.Y8G("pageSizeOptions",e.lJ4(4,ne)))},dependencies:[k.$z,v.fg,u.rl,R.iy,G.B4,G.aE,d.Zl,d.tL,d.ji,d.cC,d.YV,d.iL,d.KS,d.$R,d.YZ,d.NB,b.KQ,x.oV]})}}return o})();function ae(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"Enter PO No"),e.k0s())}function se(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"Enter Receipt No"),e.k0s())}function le(o,s){if(1&o&&(e.j41(0,"mat-option",16),e.EFF(1),e.k0s()),2&o){const t=s.$implicit;e.Y8G("value",t.id.toString()),e.R7$(1),e.JRh(t.name)}}function me(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"Select User"),e.k0s())}function ce(o,s){if(1&o&&(e.j41(0,"mat-option",16),e.EFF(1),e.k0s()),2&o){const t=s.$implicit;e.Y8G("value",t.shipperCode),e.R7$(1),e.JRh(t.shipperName)}}function ue(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"Select Shipper"),e.k0s())}function pe(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",4)(1,"div",17)(2,"mat-form-field")(3,"mat-label"),e.EFF(4,"Item Code"),e.k0s(),e.nrm(5,"input",18),e.k0s(),e.j41(6,"mat-form-field")(7,"mat-label"),e.EFF(8,"Item Name"),e.k0s(),e.nrm(9,"input",19),e.k0s(),e.j41(10,"mat-form-field")(11,"mat-label"),e.EFF(12,"Order Qty"),e.k0s(),e.nrm(13,"input",20),e.k0s(),e.j41(14,"mat-form-field")(15,"mat-label"),e.EFF(16,"Already Received Qty"),e.k0s(),e.nrm(17,"input",21),e.k0s(),e.j41(18,"mat-form-field")(19,"mat-label"),e.EFF(20,"Receive Qty."),e.k0s(),e.j41(21,"input",22),e.bIt("change",function(r){const l=e.eBV(t).index,c=e.XpG();return e.Njj(c.setBalance(r.target,l))}),e.k0s(),e.j41(22,"mat-error",23),e.EFF(23," Enter Shipped Quantity "),e.k0s()()(),e.nrm(24,"div",2),e.k0s()}if(2&o){const t=s.index,n=e.XpG();e.R7$(1),e.Y8G("formGroupName",t),e.R7$(21),e.Y8G("hidden",n.f.saleOrderItems.controls[t].controls.qtyShipped.valid)}}let de=(()=>{class o{constructor(t,n,r,a){this.formBuilder=t,this.service=n,this.purchaseService=r,this.route=a,this._snackBar=(0,e.WQX)(F.UG),this.createForm(),this.GetUsers(),this.GetShippers()}createForm(){this.formGroup=this.formBuilder.group({billNo:["",i.k0.required],agentCode:["",i.k0.required],shipperCode:["",i.k0.required],receiptNo:["",i.k0.required],remark:[""],saleOrderItems:this.formBuilder.array([this.initItem()])})}initItem(){return this.formBuilder.group({itemcode:[""],itemName:[""],quantity:[""],alreadyShipped:[""],qtyShipped:["",i.k0.required]})}GetShippers(){this.purchaseService.GetShippers().subscribe(t=>{this.shippers=t})}GetUsers(){this.purchaseService.GetUsers().subscribe(t=>{this.users=t})}bindSOForID(t){t&&this.service.GetSODetailsForShipped(t).subscribe(n=>{const r=n.map(l=>this.formBuilder.group({itemcode:[l.itemcode,i.k0.required],itemName:[l.itemName],quantity:[l.quantity],qtyShipped:[0],alreadyShipped:[l.alreadyShipped]})),a=this.formBuilder.array(r);this.formGroup.setControl("saleOrderItems",a)})}onSubmit(){this.service.UpdateProductShipped(this.formGroup.value).subscribe(t=>{this.formGroup.reset(),this.formGroup.controls.saleOrderItems.clear(),this.openSnackBar("Product Shipped","Close")})}onShow(){let t=this.formGroup.controls.billNo.value;""!=t?this.bindSOForID(t):this.openSnackBar("Please Enter Sale Order No","Close")}get f(){return this.formGroup.controls}setBalance(t,n){const r=this.formGroup.controls.saleOrderItems;var a=r.at(n).get("quantity").value,l=r.at(n).get("alreadyShipped").value;let c=Number(a)-Number(l);return Number(t.value)>0&&Number(t.value)>Number(c)&&(this.openSnackBar("Shipped Qty cannot greater then "+c,"Close"),r.at(n).get("qtyShipped").setValue(0)),!1}openSnackBar(t,n){this._snackBar.open(t,n)}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(i.ok),e.rXU(_),e.rXU(y.z),e.rXU(h.nX))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-product-shipping"]],decls:47,vars:8,consts:[["novalidate","",1,"container"],[1,"fill-remaining-space"],[2,"padding-top","10px"],[3,"formGroup","ngSubmit"],[1,"example-container"],["matInput","","maxlength","10","formControlName","billNo"],[4,"ngIf"],["mat-stroked-button","","type","button",2,"margin-left","20px",3,"click"],["matInput","","maxlength","10","formControlName","receiptNo"],["formControlName","agentCode"],[3,"value",4,"ngFor","ngForOf"],["formControlName","shipperCode"],["matInput","","formControlName","remark",2,"width","600px"],["formArrayName","saleOrderItems",1,"example-container"],["class","example-container",4,"ngFor","ngForOf"],["mat-stroked-button","","type","button",3,"click"],[3,"value"],[3,"formGroupName"],["matInput","","type","text","readonly","","formControlName","itemcode"],["matInput","","type","text","readonly","","formControlName","itemName"],["matInput","","type","text","readonly","","formControlName","quantity"],["matInput","","type","text","readonly","","formControlName","alreadyShipped"],["matInput","","type","text","formControlName","qtyShipped",3,"change"],[3,"hidden"]],template:function(n,r){1&n&&(e.j41(0,"div",0)(1,"mat-toolbar")(2,"span",1),e.EFF(3,"Product Shipping"),e.k0s()(),e.nrm(4,"div",2),e.j41(5,"form",3),e.bIt("ngSubmit",function(){return r.onSubmit()}),e.j41(6,"div",4)(7,"mat-form-field")(8,"mat-label"),e.EFF(9,"Sale OrderNo"),e.k0s(),e.nrm(10,"input",5),e.DNE(11,ae,2,0,"mat-error",6),e.k0s(),e.j41(12,"button",7),e.bIt("click",function(){return r.onShow()}),e.EFF(13,"Show"),e.k0s()(),e.nrm(14,"div",2),e.j41(15,"div",4)(16,"mat-form-field")(17,"mat-label"),e.EFF(18,"Receipt No"),e.k0s(),e.nrm(19,"input",8),e.DNE(20,se,2,0,"mat-error",6),e.k0s(),e.j41(21,"mat-form-field")(22,"mat-label"),e.EFF(23,"Select User"),e.k0s(),e.j41(24,"mat-select",9),e.DNE(25,le,2,2,"mat-option",10),e.k0s(),e.DNE(26,me,2,0,"mat-error",6),e.k0s(),e.j41(27,"mat-form-field")(28,"mat-label"),e.EFF(29,"Select Shipper"),e.k0s(),e.j41(30,"mat-select",11),e.DNE(31,ce,2,2,"mat-option",10),e.k0s(),e.DNE(32,ue,2,0,"mat-error",6),e.k0s(),e.j41(33,"mat-form-field")(34,"mat-label"),e.EFF(35,"Remark"),e.k0s(),e.nrm(36,"textarea",12),e.k0s()(),e.nrm(37,"div",2),e.j41(38,"div",13)(39,"mat-toolbar")(40,"span",1),e.EFF(41,"Enter Item Shipped Detail"),e.k0s()(),e.nrm(42,"div",2),e.DNE(43,pe,25,2,"div",14),e.k0s(),e.nrm(44,"br"),e.j41(45,"button",15),e.bIt("click",function(){return r.onSubmit()}),e.EFF(46,"Submit"),e.k0s()()()),2&n&&(e.R7$(5),e.Y8G("formGroup",r.formGroup),e.R7$(6),e.Y8G("ngIf",null==r.formGroup.controls.billNo.errors?null:r.formGroup.controls.billNo.errors.required),e.R7$(9),e.Y8G("ngIf",null==r.formGroup.controls.receiptNo.errors?null:r.formGroup.controls.receiptNo.errors.required),e.R7$(5),e.Y8G("ngForOf",r.users),e.R7$(1),e.Y8G("ngIf",null==r.formGroup.controls.agentCode.errors?null:r.formGroup.controls.agentCode.errors.required),e.R7$(5),e.Y8G("ngForOf",r.shippers),e.R7$(1),e.Y8G("ngIf",null==r.formGroup.controls.shipperCode.errors?null:r.formGroup.controls.shipperCode.errors.required),e.R7$(11),e.Y8G("ngForOf",r.f.saleOrderItems.controls))},dependencies:[p.Sq,p.bT,g.wT,k.$z,v.fg,u.rl,u.nJ,u.TL,C.VO,b.KQ,i.qT,i.me,i.BC,i.cb,i.tU,i.j4,i.JD,i.$R,i.v8],styles:[".example-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] + mat-form-field[_ngcontent-%COMP%]{margin-left:8px}"]})}}return o})();function fe(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"Enter SO No"),e.k0s())}function he(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"Enter Receipt No"),e.k0s())}function ke(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"Enter Authorize No"),e.k0s())}function Se(o,s){if(1&o&&(e.j41(0,"mat-option",20),e.EFF(1),e.k0s()),2&o){const t=s.$implicit;e.Y8G("value",t.id.toString()),e.R7$(1),e.JRh(t.name)}}function ve(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"Select Authorized By"),e.k0s())}function be(o,s){if(1&o&&(e.j41(0,"mat-option",20),e.EFF(1),e.k0s()),2&o){const t=s.$implicit;e.Y8G("value",t.shipperCode),e.R7$(1),e.JRh(t.shipperName)}}function Fe(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"Select Shipper"),e.k0s())}function _e(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"Enter Receipt No"),e.k0s())}function ye(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"Select Authorize Date"),e.k0s())}function ge(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",4)(1,"div",21)(2,"mat-form-field",22)(3,"mat-label"),e.EFF(4,"Item Code"),e.k0s(),e.nrm(5,"input",23),e.k0s(),e.j41(6,"mat-form-field",22)(7,"mat-label"),e.EFF(8,"Item Name"),e.k0s(),e.nrm(9,"input",24),e.k0s(),e.j41(10,"mat-form-field",22)(11,"mat-label"),e.EFF(12,"Order Qty."),e.k0s(),e.nrm(13,"input",25),e.k0s(),e.j41(14,"mat-form-field",22)(15,"mat-label"),e.EFF(16,"Shipped Qty"),e.k0s(),e.nrm(17,"input",26),e.k0s(),e.j41(18,"mat-form-field",22)(19,"mat-label"),e.EFF(20,"Already Returned Qty"),e.k0s(),e.nrm(21,"input",27),e.k0s(),e.j41(22,"mat-form-field",22)(23,"mat-label"),e.EFF(24,"Return Qty."),e.k0s(),e.j41(25,"input",28),e.bIt("change",function(r){const l=e.eBV(t).index,c=e.XpG();return e.Njj(c.setBalance(r.target,l))}),e.k0s(),e.j41(26,"mat-error",29),e.EFF(27," Enter Return Quantity "),e.k0s()(),e.j41(28,"mat-form-field",22)(29,"mat-label"),e.EFF(30,"Select Reason"),e.k0s(),e.j41(31,"mat-select",30)(32,"mat-option",31),e.EFF(33,"Fungas"),e.k0s(),e.j41(34,"mat-option",32),e.EFF(35,"Expiry"),e.k0s(),e.j41(36,"mat-option",33),e.EFF(37,"Break"),e.k0s()(),e.j41(38,"mat-error",29),e.EFF(39,"Select Reason"),e.k0s()()(),e.nrm(40,"div",2),e.k0s()}if(2&o){const t=s.index,n=e.XpG();e.R7$(1),e.Y8G("formGroupName",t),e.R7$(25),e.Y8G("hidden",n.f.saleOrderItems.controls[t].controls.qtyReturned.valid),e.R7$(12),e.Y8G("hidden",n.f.saleOrderItems.controls[t].controls.returnReason.valid)}}let Ce=(()=>{class o{constructor(t,n,r,a){this.formBuilder=t,this.service=n,this.purchaseService=r,this.route=a,this._snackBar=(0,e.WQX)(F.UG),this.createForm(),this.GetUsers(),this.GetShippers()}createForm(){this.formGroup=this.formBuilder.group({billNo:["",i.k0.required],authorizedBy:["",i.k0.required],shipperCode:["",i.k0.required],receiptNo:["",i.k0.required],authorizedNo:["",i.k0.required],authorizedDate:["",i.k0.required],remark:[""],saleOrderItems:this.formBuilder.array([this.initItem()])})}openSnackBar(t,n){this._snackBar.open(t,n)}initItem(){return this.formBuilder.group({itemcode:[""],itemName:[""],quantity:[""],alreadyShipped:[""],alreadyReturned:[""],returnReason:[""],qtyReturned:["",i.k0.required]})}GetShippers(){this.purchaseService.GetShippers().subscribe(t=>{this.shippers=t})}GetUsers(){this.purchaseService.GetUsers().subscribe(t=>{this.users=t})}bindSOForID(t){t&&this.service.GetSOReturnByBillNo(t).subscribe(n=>{if(0==n.length)return void this.openSnackBar("Invalid SO No","Close");const r=n.map(l=>this.formBuilder.group({itemcode:[l.itemcode,i.k0.required],itemName:[l.itemName],quantity:[l.quantity],alreadyShipped:[l.alreadyShipped],alreadyReturned:[l.alreadyReturned],returnReason:[l.returnReason],qtyReturned:[0]})),a=this.formBuilder.array(r);this.formGroup.setControl("saleOrderItems",a)})}onSubmit(){console.log(JSON.stringify(this.formGroup.value)),this.service.UpdateProductReturn(this.formGroup.value).subscribe(t=>{this.formGroup.reset(),this.formGroup.controls.saleOrderItems.clear(),this.openSnackBar("Product Returned","Close")})}onShow(){let t=this.formGroup.controls.billNo.value;""!=t?this.bindSOForID(t):this.openSnackBar("Please Enter Sale Order No","Close")}get f(){return this.formGroup.controls}setBalance(t,n){const r=this.formGroup.controls.saleOrderItems;var a=r.at(n).get("alreadyReturned").value,l=r.at(n).get("alreadyShipped").value;let c=Number(l)-Number(a);return Number(t.value)>0&&Number(t.value)>Number(c)&&(this.openSnackBar("Return Qty cannot greater then "+c,"Close"),r.at(n).get("qtyReturned").setValue(0)),!1}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(i.ok),e.rXU(_),e.rXU(y.z),e.rXU(h.nX))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-sale-return"]],decls:66,vars:13,consts:[["novalidate","",1,"container"],[1,"fill-remaining-space"],[2,"padding-top","10px"],[3,"formGroup","ngSubmit"],[1,"example-container"],["matInput","","maxlength","10","formControlName","billNo","placeholder","Sale Order No"],[4,"ngIf"],["mat-stroked-button","","type","button",2,"margin-left","20px",3,"click"],["matInput","","maxlength","10","formControlName","receiptNo"],["matInput","","maxlength","10","formControlName","authorizedNo"],["formControlName","authorizedBy"],[3,"value",4,"ngFor","ngForOf"],["formControlName","shipperCode"],["matIconSuffix","",3,"for"],["matInput","","formControlName","authorizedDate",3,"matDatepicker"],["picker",""],["matInput","","formControlName","remark"],["formArrayName","saleOrderItems",1,"example-container"],["class","example-container",4,"ngFor","ngForOf"],["mat-stroked-button","","type","button",3,"click"],[3,"value"],[3,"formGroupName"],[2,"width","140px"],["matInput","","type","text","readonly","","formControlName","itemcode"],["matInput","","type","text","readonly","","formControlName","itemName"],["matInput","","type","text","readonly","","formControlName","quantity",2,"width","80px"],["matInput","","type","text","readonly","","formControlName","alreadyShipped",2,"width","80px"],["matInput","","type","text","readonly","","formControlName","alreadyReturned",2,"width","80px"],["matInput","","type","text","formControlName","qtyReturned",2,"width","80px",3,"change"],[3,"hidden"],["formControlName","returnReason"],["value","Fungas"],["value","Expiry"],["value","Break"]],template:function(n,r){if(1&n&&(e.j41(0,"div",0)(1,"mat-toolbar")(2,"span",1),e.EFF(3,"Sale Order Return"),e.k0s()(),e.nrm(4,"div",2),e.j41(5,"form",3),e.bIt("ngSubmit",function(){return r.onSubmit()}),e.j41(6,"div",4)(7,"mat-form-field")(8,"mat-label"),e.EFF(9,"Sale OrderNo"),e.k0s(),e.nrm(10,"input",5),e.DNE(11,fe,2,0,"mat-error",6),e.k0s(),e.j41(12,"button",7),e.bIt("click",function(){return r.onShow()}),e.EFF(13,"Show"),e.k0s()(),e.nrm(14,"div",2),e.j41(15,"div",4)(16,"mat-form-field")(17,"mat-label"),e.EFF(18,"Receipt No"),e.k0s(),e.nrm(19,"input",8),e.DNE(20,he,2,0,"mat-error",6),e.k0s(),e.j41(21,"mat-form-field")(22,"mat-label"),e.EFF(23,"Authorize No"),e.k0s(),e.nrm(24,"input",9),e.DNE(25,ke,2,0,"mat-error",6),e.k0s(),e.j41(26,"mat-form-field")(27,"mat-label"),e.EFF(28,"Select Authorized By"),e.k0s(),e.j41(29,"mat-select",10),e.DNE(30,Se,2,2,"mat-option",11),e.k0s(),e.DNE(31,ve,2,0,"mat-error",6),e.k0s(),e.j41(32,"mat-form-field")(33,"mat-label"),e.EFF(34,"Select Shipper"),e.k0s(),e.j41(35,"mat-select",12),e.DNE(36,be,2,2,"mat-option",11),e.k0s(),e.DNE(37,Fe,2,0,"mat-error",6),e.k0s(),e.j41(38,"mat-form-field")(39,"mat-label"),e.EFF(40,"Enter Receipt No"),e.k0s(),e.nrm(41,"input",8),e.DNE(42,_e,2,0,"mat-error",6),e.k0s(),e.nrm(43,"div",2),e.j41(44,"mat-form-field")(45,"mat-label"),e.EFF(46,"Authorized Date"),e.k0s(),e.nrm(47,"mat-datepicker-toggle",13)(48,"input",14)(49,"mat-datepicker",null,15),e.DNE(51,ye,2,0,"mat-error",6),e.k0s(),e.j41(52,"mat-form-field")(53,"mat-label"),e.EFF(54,"Remark"),e.k0s(),e.nrm(55,"textarea",16),e.k0s()(),e.nrm(56,"div",2),e.j41(57,"div",17)(58,"mat-toolbar")(59,"span",1),e.EFF(60,"Enter Item Return Detail"),e.k0s()(),e.nrm(61,"div",2),e.DNE(62,ge,41,3,"div",18),e.k0s(),e.nrm(63,"br"),e.j41(64,"button",19),e.bIt("click",function(){return r.onSubmit()}),e.EFF(65,"Submit"),e.k0s()()()),2&n){const a=e.sdS(50);e.R7$(5),e.Y8G("formGroup",r.formGroup),e.R7$(6),e.Y8G("ngIf",null==r.formGroup.controls.billNo.errors?null:r.formGroup.controls.billNo.errors.required),e.R7$(9),e.Y8G("ngIf",null==r.formGroup.controls.receiptNo.errors?null:r.formGroup.controls.receiptNo.errors.required),e.R7$(5),e.Y8G("ngIf",null==r.formGroup.controls.authorizedNo.errors?null:r.formGroup.controls.authorizedNo.errors.required),e.R7$(5),e.Y8G("ngForOf",r.users),e.R7$(1),e.Y8G("ngIf",null==r.formGroup.controls.authorizedBy.errors?null:r.formGroup.controls.authorizedBy.errors.required),e.R7$(5),e.Y8G("ngForOf",r.shippers),e.R7$(1),e.Y8G("ngIf",null==r.formGroup.controls.shipperCode.errors?null:r.formGroup.controls.shipperCode.errors.required),e.R7$(5),e.Y8G("ngIf",null==r.formGroup.controls.receiptNo.errors?null:r.formGroup.controls.receiptNo.errors.required),e.R7$(5),e.Y8G("for",a),e.R7$(1),e.Y8G("matDatepicker",a),e.R7$(3),e.Y8G("ngIf",null==r.formGroup.controls.authorizedDate.errors?null:r.formGroup.controls.authorizedDate.errors.required),e.R7$(11),e.Y8G("ngForOf",r.f.saleOrderItems.controls)}},dependencies:[p.Sq,p.bT,g.wT,k.$z,v.fg,u.rl,u.nJ,u.TL,u.yw,C.VO,b.KQ,f.Vh,f.bZ,f.bU,i.qT,i.me,i.BC,i.cb,i.tU,i.j4,i.JD,i.$R,i.v8],styles:[".example-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] + mat-form-field[_ngcontent-%COMP%]{margin-left:8px}"]})}}return o})();function Ge(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"Select Site"),e.k0s())}function Ne(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"Select Unit"),e.k0s())}function Ie(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"Select Challan Date"),e.k0s())}function Ee(o,s){if(1&o){const t=e.RV6();e.j41(0,"button",23),e.bIt("click",function(){e.eBV(t);const r=e.XpG().index,a=e.XpG();return e.Njj(a.removeItem(r))}),e.j41(1,"mat-icon"),e.EFF(2,"delete"),e.k0s()()}}function Re(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",4)(1,"div",18)(2,"mat-form-field")(3,"mat-label"),e.EFF(4,"Material Name"),e.k0s(),e.j41(5,"mat-select",19),e.bIt("selectionChange",function(r){const l=e.eBV(t).index,c=e.XpG();return e.Njj(c.onItemChange(r.value,l))}),e.j41(6,"mat-option",7),e.EFF(7,"Material 1"),e.k0s(),e.j41(8,"mat-option",8),e.EFF(9,"Material 2"),e.k0s()(),e.j41(10,"mat-error",20),e.EFF(11," Material is required "),e.k0s()(),e.nrm(12,"div",2),e.j41(13,"mat-form-field")(14,"mat-label"),e.EFF(15,"Deliver Quantity"),e.k0s(),e.j41(16,"input",21),e.bIt("change",function(r){const l=e.eBV(t).index,c=e.XpG();return e.Njj(c.setAmount(r.target,l))}),e.k0s(),e.j41(17,"mat-error",20),e.EFF(18," Enter Quantity "),e.k0s()(),e.nrm(19,"div",2),e.DNE(20,Ee,3,0,"button",22),e.k0s(),e.nrm(21,"div",2),e.k0s()}if(2&o){const t=s.index,n=e.XpG();e.R7$(1),e.Y8G("formGroupName",t),e.R7$(9),e.Y8G("hidden",n.f.saleOrderItems.controls[t].controls.itemcode.valid),e.R7$(7),e.Y8G("hidden",n.f.saleOrderItems.controls[t].controls.quantity.valid),e.R7$(3),e.Y8G("ngIf",n.f.saleOrderItems.controls.length>1)}}function Oe(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"Enter Challan No"),e.k0s())}function De(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"Select Receiver"),e.k0s())}function Te(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"Select Receiver"),e.k0s())}function Be(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"Select Shipper"),e.k0s())}function $e(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",4)(1,"div",15)(2,"mat-form-field")(3,"mat-label"),e.EFF(4,"Material Code"),e.k0s(),e.nrm(5,"input",16),e.k0s(),e.nrm(6,"div",2),e.j41(7,"mat-form-field")(8,"mat-label"),e.EFF(9,"Material Name"),e.k0s(),e.nrm(10,"input",17),e.k0s(),e.nrm(11,"div",2),e.j41(12,"mat-form-field")(13,"mat-label"),e.EFF(14,"Order Qty"),e.k0s(),e.nrm(15,"input",18),e.k0s(),e.nrm(16,"div",2),e.j41(17,"mat-form-field")(18,"mat-label"),e.EFF(19,"Already Received Qty"),e.k0s(),e.nrm(20,"input",19),e.k0s(),e.nrm(21,"div",2),e.j41(22,"mat-form-field")(23,"mat-label"),e.EFF(24,"Receive Qty."),e.k0s(),e.j41(25,"input",20),e.bIt("change",function(r){const l=e.eBV(t).index,c=e.XpG();return e.Njj(c.setBalance(r.target,l))}),e.k0s(),e.j41(26,"mat-error",21),e.EFF(27," Enter Receive Quantity "),e.k0s()()(),e.nrm(28,"div",2),e.k0s()}if(2&o){const t=s.index,n=e.XpG();e.R7$(1),e.Y8G("formGroupName",t),e.R7$(25),e.Y8G("hidden",n.f.purchaseOrderItems.controls[t].controls.qtyReceived.valid)}}const qe=[{path:"sale-order",component:E},{path:"send-material-to-unit",component:(()=>{class o{constructor(t,n,r,a){this.formBuilder=t,this.service=n,this.purchaseService=r,this.route=a,this._snackBar=(0,e.WQX)(F.UG),this.post="",this.invoiceData={billNo:"PO1003",date:"2025-04-30",customer:"1",remark:"Test Remark by Brijesh",deliveryDate:"2025-04-30",deliveryTo:"Sagarpur, New Delhi",saleOrderItems:[{itemcode:"Item100",quantity:10,unitPrice:100,amount:1e3},{itemcode:"Item101",quantity:20,unitPrice:200,amount:4e3},{itemcode:"Item102",quantity:50,unitPrice:10,amount:500}]}}ngOnInit(){this.createForm(),this.GetItems(),this.GetCustomers(),this.bindSOForID()}bindSOForID(){let t=this.route.snapshot.paramMap.get("billno");t&&this.service.GetSOByBillNo(t).subscribe(n=>{this.formGroup.patchValue(n);const r=n.saleOrderItems.map(l=>this.formBuilder.group({itemcode:[l.itemcode,i.k0.required],quantity:[l.quantity],unitPrice:[l.unitPrice],amount:[l.amount]})),a=this.formBuilder.array(r);this.formGroup.setControl("saleOrderItems",a)})}GetCustomers(){this.service.GetCustomers().subscribe(t=>{console.log(t),this.customers=t})}GetItems(){this.purchaseService.GetItems().subscribe(t=>{this.items=t})}createForm(){this.formGroup=this.formBuilder.group({billNo:[null,i.k0.required],date:[null,i.k0.required],customer:[null,i.k0.required],deliveryDate:[null,i.k0.required],remark:[null,i.k0.required],deliveryTo:[null,i.k0.required],saleOrderItems:this.formBuilder.array([this.initItem()])})}initItem(){return this.formBuilder.group({itemcode:["",i.k0.required],quantity:["",i.k0.required],unitPrice:["",i.k0.required],amount:["",i.k0.required]})}addItem(){this.formGroup.controls.saleOrderItems.push(this.initItem())}removeItem(t){this.formGroup.controls.saleOrderItems.removeAt(t)}get f(){return this.formGroup.controls}onSubmit(){console.log(this.formGroup.value),this.route.snapshot.paramMap.get("billno")?this.service.UpdateSaleOrder(this.formGroup.value).subscribe(r=>{this.openSnackBar("Data Updated","Close")}):this.service.saveSaleOrder(this.formGroup.value).subscribe(r=>{this.openSnackBar("Data Saved","Close")}),this.formGroup.reset(),this.formGroup.controls.saleOrderItems.clear()}onItemChange(t,n){let r=this.items.filter(l=>l.itemCode==t);this.formGroup.controls.saleOrderItems.at(n).get("unitPrice").setValue(r[0].price)}setAmount(t,n){const r=this.formGroup.controls.saleOrderItems;var a=r.at(n).get("unitPrice").value;const l=Number(t.value)*Number(a);r.at(n).get("amount").setValue(l)}downloadPdf(){this.service.generateInvoicePdf(this.invoiceData).subscribe(t=>{const n=window.URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="invoice.pdf",r.click(),window.URL.revokeObjectURL(n)})}openSnackBar(t,n){this._snackBar.open(t,n)}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(i.ok),e.rXU(_),e.rXU(y.z),e.rXU(h.nX))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-send-material-to-unit"]],decls:53,vars:8,consts:[["novalidate","",1,"container"],[1,"fill-remaining-space"],[2,"padding-top","10px"],[3,"formGroup","ngSubmit"],[1,"example-container"],["matInput","","maxlength","10","formControlName","billNo"],["formControlName","customer"],["value","1"],["value","2"],[4,"ngIf"],["matIconSuffix","",3,"for"],["matInput","","formControlName","deliveryDate",3,"matDatepicker"],["picker",""],["formArrayName","saleOrderItems",1,"example-container"],[1,"example-button-row"],["mat-stroked-button","","type","button",3,"click"],["class","example-container",4,"ngFor","ngForOf"],["mat-stroked-button","","type","button",3,"disabled","click"],[3,"formGroupName"],["formControlName","itemcode",3,"selectionChange"],[3,"hidden"],["matInput","","type","text","formControlName","quantity",3,"change"],["mat-mini-fab","","aria-label","Delete",3,"click",4,"ngIf"],["mat-mini-fab","","aria-label","Delete",3,"click"]],template:function(n,r){if(1&n&&(e.j41(0,"div",0)(1,"mat-toolbar")(2,"span",1),e.EFF(3,"Send Material to Workshop"),e.k0s()(),e.nrm(4,"div",2),e.j41(5,"form",3),e.bIt("ngSubmit",function(){return r.onSubmit()}),e.j41(6,"div",4)(7,"mat-form-field")(8,"mat-label"),e.EFF(9,"Challan No"),e.k0s(),e.nrm(10,"input",5),e.k0s(),e.nrm(11,"div",2),e.j41(12,"mat-form-field")(13,"mat-label"),e.EFF(14,"Select Site"),e.k0s(),e.j41(15,"mat-select",6)(16,"mat-option",7),e.EFF(17,"Site 1"),e.k0s(),e.j41(18,"mat-option",8),e.EFF(19,"Site 2"),e.k0s()(),e.DNE(20,Ge,2,0,"mat-error",9),e.k0s(),e.nrm(21,"div",2),e.j41(22,"mat-form-field")(23,"mat-label"),e.EFF(24,"Select Unit"),e.k0s(),e.j41(25,"mat-select",6)(26,"mat-option",7),e.EFF(27,"Unit 1"),e.k0s(),e.j41(28,"mat-option",8),e.EFF(29,"Unit 2"),e.k0s()(),e.DNE(30,Ne,2,0,"mat-error",9),e.k0s(),e.nrm(31,"div",2),e.j41(32,"mat-form-field")(33,"mat-label"),e.EFF(34,"Challan Date"),e.k0s(),e.nrm(35,"mat-datepicker-toggle",10)(36,"input",11)(37,"mat-datepicker",null,12),e.DNE(39,Ie,2,0,"mat-error",9),e.k0s()(),e.j41(40,"div",13)(41,"mat-toolbar")(42,"span",1),e.EFF(43,"Enter Material Details:"),e.k0s()(),e.j41(44,"div",14)(45,"button",15),e.bIt("click",function(){return r.addItem()}),e.EFF(46,"Add New Item"),e.k0s()(),e.nrm(47,"div",2),e.DNE(48,Re,22,4,"div",16),e.k0s(),e.nrm(49,"br"),e.j41(50,"div",14)(51,"button",17),e.bIt("click",function(){return r.onSubmit()}),e.EFF(52,"Submit"),e.k0s()()()()),2&n){const a=e.sdS(38);e.R7$(5),e.Y8G("formGroup",r.formGroup),e.R7$(15),e.Y8G("ngIf",null==r.formGroup.controls.customer.errors?null:r.formGroup.controls.customer.errors.required),e.R7$(10),e.Y8G("ngIf",null==r.formGroup.controls.customer.errors?null:r.formGroup.controls.customer.errors.required),e.R7$(5),e.Y8G("for",a),e.R7$(1),e.Y8G("matDatepicker",a),e.R7$(3),e.Y8G("ngIf",null==r.formGroup.controls.deliveryDate.errors?null:r.formGroup.controls.deliveryDate.errors.required),e.R7$(9),e.Y8G("ngForOf",r.f.saleOrderItems.controls),e.R7$(3),e.Y8G("disabled",!r.formGroup.valid)}},dependencies:[p.Sq,p.bT,g.wT,k.$z,k.$0,I.An,v.fg,u.rl,u.nJ,u.TL,u.yw,C.VO,b.KQ,f.Vh,f.bZ,f.bU,i.qT,i.me,i.BC,i.cb,i.tU,i.j4,i.JD,i.$R,i.v8],styles:[".example-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] + mat-form-field[_ngcontent-%COMP%]{margin-left:8px}"]})}}return o})()},{path:"material-receipt-by-unit",component:(()=>{class o{constructor(t,n,r){this.formBuilder=t,this.service=n,this.route=r,this._snackBar=(0,e.WQX)(F.UG),this.createForm(),this.GetUsers(),this.GetShippers()}createForm(){this.formGroup=this.formBuilder.group({billNo:["",i.k0.required],receiverCode:["",i.k0.required],shipperCode:["",i.k0.required],comment:[""],purchaseOrderItems:this.formBuilder.array([this.initItem()])})}initItem(){return this.formBuilder.group({itemcode:[""],itemName:[""],quantity:[""],alreadyReceived:[""],qtyReceived:["",i.k0.required]})}GetShippers(){this.service.GetShippers().subscribe(t=>{this.shippers=t})}GetUsers(){this.service.GetUsers().subscribe(t=>{this.receivers=t})}bindPOForID(t){if(t){const r=[{itemcode:"001",itemName:"Material 1",quantity:"3",alreadyReceived:"0",qtyReceived:"0"},{itemcode:"002",itemName:"Material 2",quantity:"4",alreadyReceived:"0",qtyReceived:"0"}].map(l=>this.formBuilder.group({itemcode:[l.itemcode,i.k0.required],itemName:[l.itemName],quantity:[l.quantity],qtyReceived:[0],alreadyReceived:[l.alreadyReceived]})),a=this.formBuilder.array(r);this.formGroup.setControl("purchaseOrderItems",a)}}onSubmit(){console.log(JSON.stringify(this.formGroup.value)),this.service.UpdateProductReceive(this.formGroup.value).subscribe(t=>{this.formGroup.reset(),this.formGroup.controls.purchaseOrderItems.clear(),this.openSnackBar("Product Received","Close")})}onShow(){this.bindPOForID(this.formGroup.controls.billNo.value)}get f(){return this.formGroup.controls}setBalance(t,n){const r=this.formGroup.controls.purchaseOrderItems;var a=r.at(n).get("quantity").value,l=r.at(n).get("alreadyReceived").value;let c=Number(a)-Number(l);return Number(t.value)>0&&Number(t.value)>Number(c)&&(this.openSnackBar("Receive Qty cannot greater then "+c,"Close"),r.at(n).get("qtyReceived").setValue(0)),!1}openSnackBar(t,n){this._snackBar.open(t,n)}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(i.ok),e.rXU(y.z),e.rXU(h.nX))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-receipt-material-by-unit"]],decls:54,vars:6,consts:[["novalidate","",1,"container"],[1,"fill-remaining-space"],[2,"padding-top","10px"],[3,"formGroup","ngSubmit"],[1,"example-container"],["matInput","","maxlength","10","formControlName","billNo"],[4,"ngIf"],["mat-stroked-button","","type","button",2,"margin-left","20px",3,"click"],["formControlName","receiverCode"],["value","1"],["value","2"],["formControlName","shipperCode"],["formArrayName","purchaseOrderItems",1,"example-container"],["class","example-container",4,"ngFor","ngForOf"],["mat-stroked-button","","type","button",3,"click"],[3,"formGroupName"],["matInput","","type","text","readonly","","formControlName","itemcode"],["matInput","","type","text","readonly","","formControlName","itemName",2,"background-color","green"],["matInput","","type","text","readonly","","formControlName","quantity",2,"background-color","green"],["matInput","","type","text","readonly","","formControlName","alreadyReceived",2,"background-color","green"],["matInput","","type","text","formControlName","qtyReceived",3,"change"],[3,"hidden"]],template:function(n,r){1&n&&(e.j41(0,"div",0)(1,"mat-toolbar")(2,"span",1),e.EFF(3,"Material Receive by Unit"),e.k0s()(),e.nrm(4,"div",2),e.j41(5,"form",3),e.bIt("ngSubmit",function(){return r.onSubmit()}),e.j41(6,"div",4)(7,"mat-form-field")(8,"mat-label"),e.EFF(9,"Challan No"),e.k0s(),e.nrm(10,"input",5),e.DNE(11,Oe,2,0,"mat-error",6),e.k0s(),e.j41(12,"button",7),e.bIt("click",function(){return r.onShow()}),e.EFF(13,"Show"),e.k0s(),e.nrm(14,"div",2),e.j41(15,"mat-form-field")(16,"mat-label"),e.EFF(17,"Select Receiver"),e.k0s(),e.j41(18,"mat-select",8)(19,"mat-option",9),e.EFF(20,"Brijesh"),e.k0s(),e.j41(21,"mat-option",10),e.EFF(22,"Rajesh"),e.k0s()(),e.DNE(23,De,2,0,"mat-error",6),e.k0s(),e.nrm(24,"div",2),e.j41(25,"mat-form-field")(26,"mat-label"),e.EFF(27,"Select Machine"),e.k0s(),e.j41(28,"mat-select",8)(29,"mat-option",9),e.EFF(30,"Machine 1"),e.k0s(),e.j41(31,"mat-option",10),e.EFF(32,"Machine 2"),e.k0s()(),e.DNE(33,Te,2,0,"mat-error",6),e.k0s(),e.nrm(34,"div",2),e.j41(35,"mat-form-field")(36,"mat-label"),e.EFF(37,"Select Shipper"),e.k0s(),e.j41(38,"mat-select",11)(39,"mat-option",9),e.EFF(40,"Shipper 1"),e.k0s(),e.j41(41,"mat-option",10),e.EFF(42,"Shipper 2"),e.k0s()(),e.DNE(43,Be,2,0,"mat-error",6),e.k0s(),e.nrm(44,"div",2),e.k0s(),e.j41(45,"div",12)(46,"mat-toolbar")(47,"span",1),e.EFF(48,"Enter Material Receive Detail"),e.k0s()(),e.nrm(49,"div",2),e.DNE(50,$e,29,2,"div",13),e.k0s(),e.nrm(51,"br"),e.j41(52,"button",14),e.bIt("click",function(){return r.onSubmit()}),e.EFF(53,"Submit"),e.k0s()()()),2&n&&(e.R7$(5),e.Y8G("formGroup",r.formGroup),e.R7$(6),e.Y8G("ngIf",null==r.formGroup.controls.billNo.errors?null:r.formGroup.controls.billNo.errors.required),e.R7$(12),e.Y8G("ngIf",null==r.formGroup.controls.receiverCode.errors?null:r.formGroup.controls.receiverCode.errors.required),e.R7$(10),e.Y8G("ngIf",null==r.formGroup.controls.receiverCode.errors?null:r.formGroup.controls.receiverCode.errors.required),e.R7$(10),e.Y8G("ngIf",null==r.formGroup.controls.shipperCode.errors?null:r.formGroup.controls.shipperCode.errors.required),e.R7$(7),e.Y8G("ngForOf",r.f.purchaseOrderItems.controls))},dependencies:[p.Sq,p.bT,g.wT,k.$z,v.fg,u.rl,u.nJ,u.TL,C.VO,b.KQ,i.qT,i.me,i.BC,i.cb,i.tU,i.j4,i.JD,i.$R,i.v8],styles:[".example-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] + mat-form-field[_ngcontent-%COMP%]{margin-left:8px}"]})}}return o})()},{path:"sale-order-list",component:ie},{path:"sale-order/:billno",component:E},{path:"product-shipping",component:de},{path:"so-return",component:Ce}];let Pe=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({imports:[h.iI.forChild(qe),h.iI]})}}return o})(),Ue=(()=>{class o{constructor(){console.log("sale module")}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({imports:[p.MD,Pe,j.G,i.X1,i.YN,S.q1]})}}return o})()}}]);